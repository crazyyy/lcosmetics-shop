function CallpyGlobal(){this.modules={},this.bloodseeker="https://callpy.com/",this.callpy_domain="callpy.com",this.language="ru"}CallpyGlobal.prototype={registerModule:function(moduleName){var module=!1;try{module=eval(moduleName)}catch(e){console.log(" Global Error"),console.log(e)}return"function"==typeof module?this.modules[moduleName]?console.log("Module "+moduleName+" already registred!"):(module=new module,this.modules[moduleName]=!0,console.log("Module Registred : "+moduleName)):console.log("Module "+moduleName+" does not exist!"),module},extend:function(){for(var e in{toString:null})return function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)e[a]=i[a]}return e};var t=["toString","valueOf","constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString"];return function(e){for(var i=1;i<arguments.length;i++){var a=arguments[i];for(var n in a)e[n]=a[n];for(var o=0;o<t.length;o++)n=t[o],a.hasOwnProperty(n)&&(e[n]=a[n])}return e}}};var kunnka=new CallpyGlobal;kunnka.centaur_warrunner=function(){this.module_name="Callpy ",this.module_log_rang=100;var e=this;window.sven||(sven=!1),window.tiny||(tiny=!1),1==sven?(this.invoker=callpy_storage.iowisp.invoker,this.lifestealer=callpy_storage.iowisp.lifestealer,this.earthshaker=callpy_storage.iowisp.earthshaker,kunnka.bloodseeker=callpy_storage.kunnka.bloodseeker,kunnka.callpy_domain=callpy_storage.kunnka.callpy_domain,kunnka.modules={}):(this.invoker={},this.invoker.browser=null,this.invoker.site=null,this.invoker.type=null,this.invoker.connected=!1,this.invoker.registered=!1,this.invoker.peer_key=0,this.invoker.peer_type=0,this.lifestealer={},this.earthshaker={}),this.init=function(){e.beastmaster||(e.axe=kunnka.registerModule("kunnka.CCookie"),e.invoker.browser=e.terrorblade(),e.invoker.type=e.medusa(),2!=e.invoker.type?e.invoker.site=e.slark():e.invoker.site=null,pudge=e.invoker.site,sven||1!=e.invoker.type||(localStorage.removeItem("callpy_cid"),localStorage.setItem("callpy_enterTime",(new Date).getTime()),localStorage.removeItem("callpy_am"),localStorage.removeItem("callpy_hm"),localStorage.removeItem("callpy_greets"),localStorage.removeItem("callpy_holds"),localStorage.removeItem("sandkung"),localStorage.removeItem("techies"),localStorage.removeItem("sladar")),e.beastmaster=kunnka.registerModule("kunnka.dragonknight"),e.clockwerk=kunnka.registerModule("kunnka.omniknight"),e.tidehunter=kunnka.registerModule("kunnka.wraithking"),e.nightstalker=kunnka.registerModule("kunnka.huskar"),e.realplexor=kunnka.registerModule("kunnka.Dklab_Realplexor"),e.clockwerk&&e.tidehunter&&e.nightstalker&&e.beastmaster&&(e.nightstalker.init(),e.tidehunter.brewmaster(),e.treantprotector(e.invoker.browser)&&e.beastmaster.doom()))},this.spiritbreaker=function(){switch(e.invoker.type){case 1:e.lycan=kunnka.registerModule("kunnka.chaosknight"),e.wisp=kunnka.registerModule("kunnka.timbersaw"),e.m_chat=kunnka.registerModule("kunnka.CChat"),e.magnus=kunnka.registerModule("kunnka.abaddon"),e.tusk=kunnka.registerModule("kunnka.eldertitan"),e.haste=kunnka.registerModule("kunnka.chargeofdark"),e.wisp&&(e.lycan.init(),e.wisp.init(),e.m_chat.init(),e.haste.init());break;case 2:e.m_chat=kunnka.registerModule("kunnka.CChat"),e.magnus=kunnka.registerModule("kunnka.abaddon"),e.legion=kunnka.registerModule("kunnka.earthspirit"),e.legion&&(e.legion.init(),e.m_chat.init());break;case 3:e.tusk=kunnka.registerModule("kunnka.eldertitan"),e.tusk.init();break;case 4:e.tusk=kunnka.registerModule("kunnka.drowranger");var t=document.createElement("style");t.type="text/css",t.innerHTML=localStorage.getItem("tiny"),document.getElementsByTagName("head")[0].appendChild(t),e.tusk.init()}},this.juggernaut=function(){2!=iowisp.invoker.type&&$jcallpy("<div>",{id:"callpy"}).appendTo("body"),iowisp.magnus&&iowisp.legion&&$jcallpy("<div>",{id:"callpy_flash_wrap",css:{position:"fixed",left:"-500px"},"data-status":"chat",html:'<div id="callpy_flash_wr"></div>'}).appendTo("#callpy")},this.shadowfiend=function(t){e.wisp&&1==e.invoker.type&&e.wisp.shadowfiend(t),e.legion&&2==e.invoker.type&&e.legion.shadowfiend(t)},this.razor=function(){switch(e.invoker.type){case 1:iowisp.wisp.razor();break;case 2:iowisp.legion.razor()}},this.venomancer=function(e){var t=!0;iowisp.earthshaker[e.key]||(t=!1),iowisp.wisp&&(iowisp.earthshaker[e.key]=e,iowisp.wisp.venomancer(e,t)),iowisp.legion&&(iowisp.earthshaker[e.site_id]||(iowisp.earthshaker[e.site_id]={}),iowisp.earthshaker[e.site_id][e.key]=e,iowisp.legion.venomancer(e))},this.morphling=function(e){1==iowisp.invoker.type&&e.key==iowisp.invoker.key||(iowisp.lifestealer[e.site_id]||(iowisp.lifestealer[e.site_id]={}),iowisp.lifestealer[e.site_id][e.key]=e),iowisp.legion&&iowisp.legion.morphling(e)},this.phantomlancer=function(e){iowisp.wisp?(iowisp.earthshaker[e.key]=null,iowisp.wisp.phantomlancer(e)):iowisp.earthshaker[e.site_id][e.key]=null},this.riki=function(e){iowisp.lifestealer[e.site_id]||(iowisp.lifestealer[e.site_id]={}),iowisp.m_chat.history&&iowisp.m_chat.history[e.site_id]&&iowisp.m_chat.history[e.site_id][e.key]&&(iowisp.m_chat.historyArchive[e.site_id]||(iowisp.m_chat.historyArchive[e.site_id]={}),iowisp.m_chat.history[e.site_id][e.key]=null),iowisp.lifestealer[e.site_id][e.key].online=!1,iowisp.lifestealer[e.site_id][e.key].activeStatus=iowisp.lifestealer[e.site_id][e.key].getActiveStatus(),iowisp.legion&&iowisp.legion.riki(e)},this.fvoid=function(e){iowisp.wisp&&iowisp.wisp.fvoid(e.url),iowisp.legion&&(e.noFocus||iowisp.legion.update_status({action:"update_status",status:"1"+iowisp.lifestealer[e.site_id][e.key].chatWindowStatus+iowisp.lifestealer[e.site_id][e.key].chatStatus,peer_key:iowisp.invoker.key,domain:e.domain,site_id:e.site_id,key:e.key,type:"1",where:"to_fms",id:e.key}),iowisp.legion.selected_user==e.key&&iowisp.invoker.site_id==e.site_id&&(e.width&&iowisp.legion.phantom({width:e.width}),iowisp.legion.fvoid(e)))},this.parseUrl=function(e){var t=document.createElement("a");return t.href=e,t},this.viper=function(e){if(iowisp.invoker.key!=e.key||iowisp.invoker.type!=e.type||iowisp.invoker.registered)1==e.type&&iowisp.morphling(e),2!=e.type&&3!=e.type||iowisp.venomancer(e),0==e.type&&iowisp.legion.venomancer(e);else{if(iowisp.wisp&&1==iowisp.invoker.type&&iowisp.wisp.sniper(e),iowisp.legion&&2==iowisp.invoker.type){iowisp.invoker.phrases=[];for(var t in e.phrases)iowisp.invoker.phrases.push(e.phrases[t]);0==iowisp.initialize_data.online&&localStorage.removeItem("callpy_mcid"),iowisp.legion.sniper(e)}iowisp.invoker.registered=!0}},this.bountyhunter=function(e){iowisp.invoker.key==e.key&&iowisp.invoker.type==e.type&&iowisp.invoker.registered?(iowisp.wisp&&1==iowisp.invoker.type&&iowisp.wisp.unregister(e),iowisp.legion&&2==iowisp.invoker.type&&(window.location.href=kunnka.bloodseeker.replace("https","http"),iowisp.legion.unregister(e))):(1==e.type&&iowisp.riki(e),2==e.type&&iowisp.phantomlancer(e))},this.broodmother=function(){var e={};1==iowisp.invoker.type&&iowisp.earthshaker[iowisp.wisp.weaver]&&(0==iowisp.wisp.weaver?iowisp.invoker.peer_type=0:iowisp.invoker.peer_type=2,iowisp.invoker.peer_key=iowisp.wisp.weaver,e.type=2,e.key=iowisp.wisp.weaver,localStorage.removeItem("sandkung"),localStorage.removeItem("techies")),2==iowisp.invoker.type&&iowisp.lifestealer[iowisp.invoker.site_id][iowisp.legion.selected_user]&&(0==iowisp.legion.selected_user?iowisp.invoker.peer_type=0:iowisp.invoker.peer_type=1,iowisp.invoker.peer_key=iowisp.legion.selected_user,e.type=1,e.key=iowisp.legion.selected_user),e.key&&e.type||(iowisp.invoker.peer_type=0,iowisp.invoker.peer_key=0)},this.treantprotector=function(){return!0},this.slark=function(){return iowisp.convertPunycode(location.host.replace(/www./i,""))},this.medusa=function(){if(window.top==window)return location.host.replace(/www./i,"")+"/"!=kunnka.bloodseeker.replace("https","http").replace("http://","")||"/manager"!=location.pathname&&"/manager/"!=location.pathname?location.host.replace(/www./i,"")+"/"!=kunnka.bloodseeker.replace("https","http").replace("http://","")||"/sites/design/"!=location.pathname&&"/sites/design"!=location.pathname?1:5:2;try{return parent.window.location.href.replace(/www./i,"")==kunnka.bloodseeker.replace("https","http")+"manager/"||parent.window.location.href.replace(/www./i,"")==kunnka.bloodseeker.replace("https","http")+"manager"?3:4}catch(e){return 3}},this.terrorblade=function(e){var t=window.navigator.userAgent,i=/Opera[ \/]+\w+\.\w+/i,a=/Version[ \/]+\w+\.\w+/i,n=/Firefox\/\w+\.\w+/i,o=/Chrome\/\w+\.\w+/i,l=/Version\/\w+\.\w+/i,s=/MSIE *\d+\.\w+/i,r=/Safari\/\w+\.\w+/i,c=new Array,p=/[ \/\.]/i,a=t.match(a),d=t.match(n),u=t.match(o),_=t.match(l),r=t.match(r),f=t.match(s),h=t.match(i);""==!h&""==!a?c[0]=a[0].replace(/Version/,"Opera"):""==!h?c[0]=h[0]:""==!f?c[0]=f[0]:""==!d?c[0]=d[0]:""==!u?c[0]=u[0]:""==!_&&""==!r&&(c[0]=_[0].replace("Version","Safari"));var m;return null!=c[0]&&(m=c[0].split(p)),null==e&&null!=m?(e=m[2].length,m[2]=m[2].substring(0,e),m):!1},this.isMobile=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},this.urlHighlight=function(e){var t,i,a=/(?:https?:\/\/|([^@\wа-яА-Я.\-0-9]{1})|^)(?:https?:\/\/)?((?:www|[\wа-яА-Я\-0-9]+\.)[^<\s]+[^<.,:;?!”»’“+\-\)\s])/gi,n=e.match(a),o=/(?:([^@\wа-яА-Я.\-0-9]{1})|^)(.*)/i;if(n)for(var l=0;l<n.length;l++)t=0==n[l].indexOf("https")||1==n[l].indexOf("https")?'$1<a href="$2" target="_blank">$2</a>':0==n[l].indexOf("http")||1==n[l].indexOf("http")?'$1<a href="$2" target="_blank">$2</a>':'$1<a href="//$2" target="_blank">$2</a>',i=n[l].replace(o,t),e=e.replace(n[l],i);var s=/([\w\-0-9а-яА-Я\_\+\=.]+@[\wа-яА-Я\-0-9]+\.[\w\-0-9а-яА-Я]+)/gi,r='<a href="mailto:$1">$1</a>';return e.replace(s,r)},this.parseTimestamp=function(e){var t=new Date,i=new Date(e),a=["янв","фев","мар","апр","мая","июн","июл","авг","сен","окт","ноя","дек"];return t.getDate()!=i.getDate()||t.getMonth()!=i.getMonth()||t.getYear()!=i.getYear()?i.getDate()+" "+a[i.getMonth()]+" "+i.getHours()+":"+(i.getMinutes()<10?"0"+i.getMinutes():i.getMinutes()):""+i.getHours()+":"+(i.getMinutes()<10?"0"+i.getMinutes():i.getMinutes())},this.escapeHtml=function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,function(e){return t[e]})},this.checkVisibility=function(){return document.mozHidden||document.msHidden||document.webkitHidden||document.hidden?0:1},this.isMsie=function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},this.convertPunycode=function(e){return"xn--"==e.substr(0,4)?kunnka.punycode.ToUnicode(e):e}};var iowisp=kunnka.registerModule("kunnka.centaur_warrunner"),io=iowisp;kunnka.punycode=new function(){function e(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:s}function t(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function i(e,t,i){var a;for(e=i?Math.floor(e/r):e>>1,e+=Math.floor(e/t),a=0;e>(s-c)*p>>1;a+=s)e=Math.floor(e/(s-c));return Math.floor(a+(s-c+1)*e/(e+d))}function a(e,t){return e-=(26>e-97)<<5,e+((!t&&26>e-65)<<5)}this.utf16={decode:function(e){for(var t,i,a=[],n=0,o=e.length;o>n;){if(t=e.charCodeAt(n++),55296===(63488&t)){if(i=e.charCodeAt(n++),55296!==(64512&t)||56320!==(64512&i))throw new RangeError("UTF-16(decode): Illegal UTF-16 sequence");t=((1023&t)<<10)+(1023&i)+65536}a.push(t)}return a},encode:function(e){for(var t,i=[],a=0,n=e.length;n>a;){if(t=e[a++],55296===(63488&t))throw new RangeError("UTF-16(encode): Illegal UTF-16 value");t>65535&&(t-=65536,i.push(String.fromCharCode(t>>>10&1023|55296)),t=56320|1023&t),i.push(String.fromCharCode(t))}return i.join("")}};var n=128,o=72,l="-",s=36,r=700,c=1,p=26,d=38,u=2147483647;this.decode=function(t,a){var r,d,_,f,h,m,y,g,v,w,k,b,C,x=[],T=[],S=t.length;for(r=n,_=0,f=o,h=t.lastIndexOf(l),0>h&&(h=0),m=0;h>m;++m){if(a&&(T[x.length]=t.charCodeAt(m)-65<26),t.charCodeAt(m)>=128)throw new RangeError("Illegal input >= 0x80");x.push(t.charCodeAt(m))}for(y=h>0?h+1:0;S>y;){for(g=_,v=1,w=s;;w+=s){if(y>=S)throw RangeError("punycode_bad_input(1)");if(k=e(t.charCodeAt(y++)),k>=s)throw RangeError("punycode_bad_input(2)");if(k>Math.floor((u-_)/v))throw RangeError("punycode_overflow(1)");if(_+=k*v,b=f>=w?c:w>=f+p?p:w-f,b>k)break;if(v>Math.floor(u/(s-b)))throw RangeError("punycode_overflow(2)");v*=s-b}if(d=x.length+1,f=i(_-g,d,0===g),Math.floor(_/d)>u-r)throw RangeError("punycode_overflow(3)");r+=Math.floor(_/d),_%=d,a&&T.splice(_,0,t.charCodeAt(y-1)-65<26),x.splice(_,0,r),_++}if(a)for(_=0,C=x.length;C>_;_++)T[_]&&(x[_]=String.fromCharCode(x[_]).toUpperCase().charCodeAt(0));return this.utf16.encode(x)},this.encode=function(e,r){var d,_,f,h,m,y,g,v,w,k,b,C;r&&(C=this.utf16.decode(e)),e=this.utf16.decode(e.toLowerCase());var x=e.length;if(r)for(y=0;x>y;y++)C[y]=e[y]!=C[y];var T=[];for(d=n,_=0,m=o,y=0;x>y;++y)e[y]<128&&T.push(String.fromCharCode(C?a(e[y],C[y]):e[y]));for(f=h=T.length,h>0&&T.push(l);x>f;){for(g=u,y=0;x>y;++y)b=e[y],b>=d&&g>b&&(g=b);if(g-d>Math.floor((u-_)/(f+1)))throw RangeError("punycode_overflow (1)");for(_+=(g-d)*(f+1),d=g,y=0;x>y;++y){if(b=e[y],d>b&&++_>u)return Error("punycode_overflow(2)");if(b==d){for(v=_,w=s;k=m>=w?c:w>=m+p?p:w-m,!(k>v);w+=s)T.push(String.fromCharCode(t(k+(v-k)%(s-k),0))),v=Math.floor((v-k)/(s-k));T.push(String.fromCharCode(t(v,r&&C[y]?1:0))),m=i(_,f+1,f==h),_=0,++f}}++_,++d}return T.join("")},this.ToASCII=function(e){for(var t=e.split("."),i=[],a=0;a<t.length;++a){var n=t[a];i.push(n.match(/[^A-Za-z0-9-]/)?"xn--"+kunnka.punycode.encode(n):n)}return i.join(".")},this.ToUnicode=function(e){for(var t=e.split("."),i=[],a=0;a<t.length;++a){var n=t[a];i.push(n.match(/^xn--/)?kunnka.punycode.decode(n.slice(4)):n)}return i.join(".")}},function(e,t){function i(e){var t=e.length,i=re.type(e);return re.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===i||"function"!==i&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function a(e){var t=Ce[e]={};return re.each(e.match(pe)||[],function(e,i){t[i]=!0}),t}function n(e,i,a,n){if(re.acceptData(e)){var o,l,s=re.expando,r="string"==typeof i,c=e.nodeType,p=c?re.cache:e,d=c?e[s]:e[s]&&s;if(d&&p[d]&&(n||p[d].data)||!r||a!==t)return d||(c?e[s]=d=K.pop()||re.guid++:d=s),p[d]||(p[d]={},c||(p[d].toJSON=re.noop)),"object"!=typeof i&&"function"!=typeof i||(n?p[d]=re.extend(p[d],i):p[d].data=re.extend(p[d].data,i)),o=p[d],n||(o.data||(o.data={}),o=o.data),a!==t&&(o[re.camelCase(i)]=a),r?(l=o[i],null==l&&(l=o[re.camelCase(i)])):l=o,l}}function o(e,t,i){if(re.acceptData(e)){var a,n,o,l=e.nodeType,r=l?re.cache:e,c=l?e[re.expando]:re.expando;if(r[c]){if(t&&(o=i?r[c]:r[c].data)){re.isArray(t)?t=t.concat(re.map(t,re.camelCase)):t in o?t=[t]:(t=re.camelCase(t),t=t in o?[t]:t.split(" "));for(a=0,n=t.length;n>a;a++)delete o[t[a]];if(!(i?s:re.isEmptyObject)(o))return}(i||(delete r[c].data,s(r[c])))&&(l?re.cleanData([e],!0):re.support.deleteExpando||r!=r.window?delete r[c]:r[c]=null)}}}function l(e,i,a){if(a===t&&1===e.nodeType){var n="data-"+i.replace(Te,"-$1").toLowerCase();if(a=e.getAttribute(n),"string"==typeof a){try{a="true"===a?!0:"false"===a?!1:"null"===a?null:+a+""===a?+a:xe.test(a)?re.parseJSON(a):a}catch(o){}re.data(e,i,a)}else a=t}return a}function s(e){var t;for(t in e)if(("data"!==t||!re.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function r(){return!0}function c(){return!1}function p(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function d(e,t,i){if(t=t||0,re.isFunction(t))return re.grep(e,function(e,a){var n=!!t.call(e,a,e);return n===i});if(t.nodeType)return re.grep(e,function(e){return e===t===i});if("string"==typeof t){var a=re.grep(e,function(e){return 1===e.nodeType});if(Pe.test(t))return re.filter(t,a,!i);t=re.filter(t,a)}return re.grep(e,function(e){return re.inArray(e,t)>=0===i})}function u(e){var t=Xe.split("|"),i=e.createDocumentFragment();if(i.createElement)for(;t.length;)i.createElement(t.pop());return i}function _(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function f(e){var t=e.getAttributeNode("type");return e.type=(t&&t.specified)+"/"+e.type,e}function h(e){var t=nt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function m(e,t){for(var i,a=0;null!=(i=e[a]);a++)re._data(i,"globalEval",!t||re._data(t[a],"globalEval"))}function y(e,t){if(1===t.nodeType&&re.hasData(e)){var i,a,n,o=re._data(e),l=re._data(t,o),s=o.events;if(s){delete l.handle,l.events={};for(i in s)for(a=0,n=s[i].length;n>a;a++)re.event.add(t,i,s[i][a])}l.data&&(l.data=re.extend({},l.data))}}function g(e,t){var i,a,n;if(1===t.nodeType){if(i=t.nodeName.toLowerCase(),!re.support.noCloneEvent&&t[re.expando]){n=re._data(t);for(a in n.events)re.removeEvent(t,a,n.handle);t.removeAttribute(re.expando)}"script"===i&&t.text!==e.text?(f(t).text=e.text,h(t)):"object"===i?(t.parentNode&&(t.outerHTML=e.outerHTML),re.support.html5Clone&&e.innerHTML&&!re.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===i&&tt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===i?t.defaultSelected=t.selected=e.defaultSelected:"input"!==i&&"textarea"!==i||(t.defaultValue=e.defaultValue)}}function v(e,i){var a,n,o=0,l=typeof e.getElementsByTagName!==J?e.getElementsByTagName(i||"*"):typeof e.querySelectorAll!==J?e.querySelectorAll(i||"*"):t;if(!l)for(l=[],a=e.childNodes||e;null!=(n=a[o]);o++)!i||re.nodeName(n,i)?l.push(n):re.merge(l,v(n,i));return i===t||i&&re.nodeName(e,i)?re.merge([e],l):l}function w(e){tt.test(e.type)&&(e.defaultChecked=e.checked)}function k(e,t){if(t in e)return t;for(var i=t.charAt(0).toUpperCase()+t.slice(1),a=t,n=xt.length;n--;)if(t=xt[n]+i,t in e)return t;return a}function b(e,t){return e=t||e,"none"===re.css(e,"display")||!re.contains(e.ownerDocument,e)}function C(e,t){for(var i,a,n,o=[],l=0,s=e.length;s>l;l++)a=e[l],a.style&&(o[l]=re._data(a,"olddisplay"),i=a.style.display,t?(o[l]||"none"!==i||(a.style.display=""),""===a.style.display&&b(a)&&(o[l]=re._data(a,"olddisplay",j(a.nodeName)))):o[l]||(n=b(a),(i&&"none"!==i||!n)&&re._data(a,"olddisplay",n?i:re.css(a,"display"))));for(l=0;s>l;l++)a=e[l],a.style&&(t&&"none"!==a.style.display&&""!==a.style.display||(a.style.display=t?o[l]||"":"none"));return e}function x(e,t,i){var a=yt.exec(t);return a?Math.max(0,a[1]-(i||0))+(a[2]||"px"):t}function T(e,t,i,a,n){for(var o=i===(a?"border":"content")?4:"width"===t?1:0,l=0;4>o;o+=2)"margin"===i&&(l+=re.css(e,i+Ct[o],!0,n)),a?("content"===i&&(l-=re.css(e,"padding"+Ct[o],!0,n)),"margin"!==i&&(l-=re.css(e,"border"+Ct[o]+"Width",!0,n))):(l+=re.css(e,"padding"+Ct[o],!0,n),"padding"!==i&&(l+=re.css(e,"border"+Ct[o]+"Width",!0,n)));return l}function S(e,t,i){var a=!0,n="width"===t?e.offsetWidth:e.offsetHeight,o=pt(e),l=re.support.boxSizing&&"border-box"===re.css(e,"boxSizing",!1,o);if(0>=n||null==n){if(n=dt(e,t,o),(0>n||null==n)&&(n=e.style[t]),gt.test(n))return n;a=l&&(re.support.boxSizingReliable||n===e.style[t]),n=parseFloat(n)||0}return n+T(e,t,i||(l?"border":"content"),a,o)+"px"}function j(e){var t=V,i=wt[e];return i||(i=E(e,t),"none"!==i&&i||(ct=(ct||re("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(ct[0].contentWindow||ct[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),i=E(e,t),ct.detach()),wt[e]=i),i}function E(e,t){var i=re(t.createElement(e)).appendTo(t.body),a=re.css(i[0],"display");return i.remove(),a}function I(e,t,i,a){var n;if(re.isArray(t))re.each(t,function(t,n){i||St.test(e)?a(e,n):I(e+"["+("object"==typeof n?t:"")+"]",n,i,a)});else if(i||"object"!==re.type(t))a(e,t);else for(n in t)I(e+"["+n+"]",t[n],i,a)}function $(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var a,n=0,o=t.toLowerCase().match(pe)||[];if(re.isFunction(i))for(;a=o[n++];)"+"===a[0]?(a=a.slice(1)||"*",(e[a]=e[a]||[]).unshift(i)):(e[a]=e[a]||[]).push(i)}}function D(e,t,i,a){function n(s){var r;return o[s]=!0,re.each(e[s]||[],function(e,s){var c=s(t,i,a);return"string"!=typeof c||l||o[c]?l?!(r=c):void 0:(t.dataTypes.unshift(c),n(c),!1)}),r}var o={},l=e===Pt;return n(t.dataTypes[0])||!o["*"]&&n("*")}function N(e,i){var a,n,o=re.ajaxSettings.flatOptions||{};for(n in i)i[n]!==t&&((o[n]?e:a||(a={}))[n]=i[n]);return a&&re.extend(!0,e,a),e}function L(e,i,a){var n,o,l,s,r=e.contents,c=e.dataTypes,p=e.responseFields;for(s in p)s in a&&(i[p[s]]=a[s]);for(;"*"===c[0];)c.shift(),o===t&&(o=e.mimeType||i.getResponseHeader("Content-Type"));if(o)for(s in r)if(r[s]&&r[s].test(o)){c.unshift(s);break}if(c[0]in a)l=c[0];else{for(s in a){if(!c[0]||e.converters[s+" "+c[0]]){l=s;break}n||(n=s)}l=l||n}return l?(l!==c[0]&&c.unshift(l),a[l]):void 0}function M(e,t){var i,a,n,o,l={},s=0,r=e.dataTypes.slice(),c=r[0];if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),r[1])for(n in e.converters)l[n.toLowerCase()]=e.converters[n];for(;a=r[++s];)if("*"!==a){if("*"!==c&&c!==a){if(n=l[c+" "+a]||l["* "+a],!n)for(i in l)if(o=i.split(" "),o[1]===a&&(n=l[c+" "+o[0]]||l["* "+o[0]])){n===!0?n=l[i]:l[i]!==!0&&(a=o[0],r.splice(s--,0,a));break}if(n!==!0)if(n&&e["throws"])t=n(t);else try{t=n(t)}catch(p){return{state:"parsererror",error:n?p:"No conversion from "+c+" to "+a}}}c=a}return{state:"success",data:t}}function A(){try{return new e.XMLHttpRequest}catch(t){}}function R(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function O(){return setTimeout(function(){Zt=t}),Zt=re.now()}function H(e,t){re.each(t,function(t,i){for(var a=(ni[t]||[]).concat(ni["*"]),n=0,o=a.length;o>n;n++)if(a[n].call(e,t,i))return})}function F(e,t,i){var a,n,o=0,l=ai.length,s=re.Deferred().always(function(){delete r.elem}),r=function(){if(n)return!1;for(var t=Zt||O(),i=Math.max(0,c.startTime+c.duration-t),a=i/c.duration||0,o=1-a,l=0,r=c.tweens.length;r>l;l++)c.tweens[l].run(o);return s.notifyWith(e,[c,o,i]),1>o&&r?i:(s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:re.extend({},t),opts:re.extend(!0,{specialEasing:{}},i),originalProperties:t,originalOptions:i,startTime:Zt||O(),duration:i.duration,tweens:[],createTween:function(t,i){var a=re.Tween(e,c.opts,t,i,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(a),a},stop:function(t){var i=0,a=t?c.tweens.length:0;if(n)return this;for(n=!0;a>i;i++)c.tweens[i].run(1);return t?s.resolveWith(e,[c,t]):s.rejectWith(e,[c,t]),this}}),p=c.props;for(q(p,c.opts.specialEasing);l>o;o++)if(a=ai[o].call(c,e,p,c.opts))return a;return H(c,p),re.isFunction(c.opts.start)&&c.opts.start.call(e,c),re.fx.timer(re.extend(r,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function q(e,t){var i,a,n,o,l;for(n in e)if(a=re.camelCase(n),o=t[a],i=e[n],re.isArray(i)&&(o=i[1],i=e[n]=i[0]),n!==a&&(e[a]=i,delete e[n]),l=re.cssHooks[a],l&&"expand"in l){i=l.expand(i),delete e[a];for(n in i)n in e||(e[n]=i[n],t[n]=o)}else t[a]=o}function B(e,t,i){var a,n,o,l,s,r,c,p,d,u=this,_=e.style,f={},h=[],m=e.nodeType&&b(e);i.queue||(p=re._queueHooks(e,"fx"),null==p.unqueued&&(p.unqueued=0,d=p.empty.fire,p.empty.fire=function(){p.unqueued||d()}),p.unqueued++,u.always(function(){u.always(function(){p.unqueued--,re.queue(e,"fx").length||p.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[_.overflow,_.overflowX,_.overflowY],"inline"===re.css(e,"display")&&"none"===re.css(e,"float")&&(re.support.inlineBlockNeedsLayout&&"inline"!==j(e.nodeName)?_.zoom=1:_.display="inline-block")),i.overflow&&(_.overflow="hidden",re.support.shrinkWrapBlocks||u.always(function(){_.overflow=i.overflow[0],_.overflowX=i.overflow[1],_.overflowY=i.overflow[2]}));for(n in t)if(l=t[n],ei.exec(l)){if(delete t[n],r=r||"toggle"===l,l===(m?"hide":"show"))continue;h.push(n)}if(o=h.length){s=re._data(e,"fxshow")||re._data(e,"fxshow",{}),"hidden"in s&&(m=s.hidden),r&&(s.hidden=!m),m?re(e).show():u.done(function(){re(e).hide()}),u.done(function(){var t;re._removeData(e,"fxshow");for(t in f)re.style(e,t,f[t])});for(n=0;o>n;n++)a=h[n],c=u.createTween(a,m?s[a]:0),f[a]=s[a]||re.style(e,a),a in s||(s[a]=c.start,m&&(c.end=c.start,c.start="width"===a||"height"===a?1:0))}}function z(e,t,i,a,n){return new z.prototype.init(e,t,i,a,n)}function P(e,t){var i,a={height:e},n=0;for(t=t?1:0;4>n;n+=2-t)i=Ct[n],a["margin"+i]=a["padding"+i]=e;return t&&(a.opacity=a.width=e),a}function W(e){return re.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var U,X,J=typeof t,V=e.document,Y=e.location,Q=e.jQuery1,G=e.$,Z={},K=[],ee="1.9.1",te=K.concat,ie=K.push,ae=K.slice,ne=K.indexOf,oe=Z.toString,le=Z.hasOwnProperty,se=ee.trim,re=function(e,t){return new re.fn.init(e,t,X)},ce=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,pe=/\S+/g,de=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ue=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,_e=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,fe=/^[\],:{}\s]*$/,he=/(?:^|:|,)(?:\s*\[)+/g,me=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,ye=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,ge=/^-ms-/,ve=/-([\da-z])/gi,we=function(e,t){return t.toUpperCase()},ke=function(e){(V.addEventListener||"load"===e.type||"complete"===V.readyState)&&(be(),re.ready())},be=function(){V.addEventListener?(V.removeEventListener("DOMContentLoaded",ke,!1),e.removeEventListener("load",ke,!1)):(V.detachEvent("onreadystatechange",ke),e.detachEvent("onload",ke))};re.fn=re.prototype={jQuery1:ee,constructor:re,init:function(e,i,a){var n,o;if(!e)return this;if("string"==typeof e){if(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:ue.exec(e),!n||!n[1]&&i)return!i||i.jQuery1?(i||a).find(e):this.constructor(i).find(e);if(n[1]){if(i=i instanceof re?i[0]:i,re.merge(this,re.parseHTML(n[1],i&&i.nodeType?i.ownerDocument||i:V,!0)),_e.test(n[1])&&re.isPlainObject(i))for(n in i)re.isFunction(this[n])?this[n](i[n]):this.attr(n,i[n]);return this}if(o=V.getElementById(n[2]),o&&o.parentNode){if(o.id!==n[2])return a.find(e);this.length=1,this[0]=o}return this.context=V,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):re.isFunction(e)?a.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),re.makeArray(e,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return ae.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=re.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return re.each(this,e,t)},ready:function(e){return re.ready.promise().done(e),this},slice:function(){return this.pushStack(ae.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(0>e?t:0);return this.pushStack(i>=0&&t>i?[this[i]]:[])},map:function(e){return this.pushStack(re.map(this,function(t,i){return e.call(t,i,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:ie,sort:[].sort,splice:[].splice},re.fn.init.prototype=re.fn,re.extend=re.fn.extend=function(){var e,i,a,n,o,l,s=arguments[0]||{},r=1,c=arguments.length,p=!1;for("boolean"==typeof s&&(p=s,s=arguments[1]||{},r=2),"object"==typeof s||re.isFunction(s)||(s={}),c===r&&(s=this,--r);c>r;r++)if(null!=(o=arguments[r]))for(n in o)e=s[n],a=o[n],s!==a&&(p&&a&&(re.isPlainObject(a)||(i=re.isArray(a)))?(i?(i=!1,l=e&&re.isArray(e)?e:[]):l=e&&re.isPlainObject(e)?e:{},s[n]=re.extend(p,l,a)):a!==t&&(s[n]=a));return s},re.extend({noConflict:function(t){return e.$===re&&(e.$=G),t&&e.jQuery1===re&&(e.jQuery1=Q),re},isReady:!1,readyWait:1,holdReady:function(e){e?re.readyWait++:re.ready(!0)},ready:function(e){if(e===!0?!--re.readyWait:!re.isReady){if(!V.body)return setTimeout(re.ready);re.isReady=!0,e!==!0&&--re.readyWait>0||(U.resolveWith(V,[re]),re.fn.trigger&&re(V).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===re.type(e)},isArray:Array.isArray||function(e){return"array"===re.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):"object"==typeof e||"function"==typeof e?Z[oe.call(e)]||"object":typeof e},isPlainObject:function(e){if(!e||"object"!==re.type(e)||e.nodeType||re.isWindow(e))return!1;try{if(e.constructor&&!le.call(e,"constructor")&&!le.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}var a;for(a in e);return a===t||le.call(e,a)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,i){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(i=t,t=!1),t=t||V;var a=_e.exec(e),n=!i&&[];return a?[t.createElement(a[1])]:(a=re.buildFragment([e],t,n),n&&re(n).remove(),re.merge([],a.childNodes))},parseJSON:function(t){return e.JSON&&e.JSON.parse?e.JSON.parse(t):null===t?t:"string"==typeof t&&(t=re.trim(t),t&&fe.test(t.replace(me,"@").replace(ye,"]").replace(he,"")))?new Function("return "+t)():void re.error("Invalid JSON: "+t)},parseXML:function(i){var a,n;if(!i||"string"!=typeof i)return null;try{e.DOMParser?(n=new DOMParser,a=n.parseFromString(i,"text/xml")):(a=new ActiveXObject("Microsoft.XMLDOM"),a.async="false",a.loadXML(i))}catch(o){a=t}return a&&a.documentElement&&!a.getElementsByTagName("parsererror").length||re.error("Invalid XML: "+i),a},noop:function(){},globalEval:function(t){t&&re.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(ge,"ms-").replace(ve,we)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,a){var n,o=0,l=e.length,s=i(e);if(a){if(s)for(;l>o&&(n=t.apply(e[o],a),n!==!1);o++);else for(o in e)if(n=t.apply(e[o],a),n===!1)break}else if(s)for(;l>o&&(n=t.call(e[o],o,e[o]),n!==!1);o++);else for(o in e)if(n=t.call(e[o],o,e[o]),n===!1)break;return e},trim:se&&!se.call("\ufeff ")?function(e){return null==e?"":se.call(e)}:function(e){return null==e?"":(e+"").replace(de,"")},makeArray:function(e,t){var a=t||[];return null!=e&&(i(Object(e))?re.merge(a,"string"==typeof e?[e]:e):ie.call(a,e)),a},inArray:function(e,t,i){var a;if(t){if(ne)return ne.call(t,e,i);for(a=t.length,i=i?0>i?Math.max(0,a+i):i:0;a>i;i++)if(i in t&&t[i]===e)return i}return-1},merge:function(e,i){var a=i.length,n=e.length,o=0;if("number"==typeof a)for(;a>o;o++)e[n++]=i[o];else for(;i[o]!==t;)e[n++]=i[o++];return e.length=n,e},grep:function(e,t,i){var a,n=[],o=0,l=e.length;for(i=!!i;l>o;o++)a=!!t(e[o],o),i!==a&&n.push(e[o]);return n},map:function(e,t,a){var n,o=0,l=e.length,s=i(e),r=[];if(s)for(;l>o;o++)n=t(e[o],o,a),null!=n&&(r[r.length]=n);else for(o in e)n=t(e[o],o,a),null!=n&&(r[r.length]=n);return te.apply([],r)},guid:1,proxy:function(e,i){var a,n,o;return"string"==typeof i&&(o=e[i],i=e,e=o),re.isFunction(e)?(a=ae.call(arguments,2),n=function(){return e.apply(i||this,a.concat(ae.call(arguments)))},n.guid=e.guid=e.guid||re.guid++,n):t},access:function(e,i,a,n,o,l,s){var r=0,c=e.length,p=null==a;if("object"===re.type(a)){o=!0;for(r in a)re.access(e,i,r,a[r],!0,l,s)}else if(n!==t&&(o=!0,re.isFunction(n)||(s=!0),p&&(s?(i.call(e,n),i=null):(p=i,i=function(e,t,i){return p.call(re(e),i)})),i))for(;c>r;r++)i(e[r],a,s?n:n.call(e[r],r,i(e[r],a)));return o?e:p?i.call(e):c?i(e[0],a):l},now:function(){return(new Date).getTime()}}),re.ready.promise=function(t){if(!U)if(U=re.Deferred(),"complete"===V.readyState)setTimeout(re.ready);else if(V.addEventListener)V.addEventListener("DOMContentLoaded",ke,!1),e.addEventListener("load",ke,!1);else{V.attachEvent("onreadystatechange",ke),e.attachEvent("onload",ke);var i=!1;try{i=null==e.frameElement&&V.documentElement}catch(a){}i&&i.doScroll&&!function n(){if(!re.isReady){try{i.doScroll("left")}catch(e){return setTimeout(n,50)}be(),re.ready()}}()}return U.promise(t)},re.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){Z["[object "+t+"]"]=t.toLowerCase()}),X=re(V);var Ce={};re.Callbacks=function(e){e="string"==typeof e?Ce[e]||a(e):re.extend({},e);var i,n,o,l,s,r,c=[],p=!e.once&&[],d=function(t){
for(n=e.memory&&t,o=!0,s=r||0,r=0,l=c.length,i=!0;c&&l>s;s++)if(c[s].apply(t[0],t[1])===!1&&e.stopOnFalse){n=!1;break}i=!1,c&&(p?p.length&&d(p.shift()):n?c=[]:u.disable())},u={add:function(){if(c){var t=c.length;!function a(t){re.each(t,function(t,i){var n=re.type(i);"function"===n?e.unique&&u.has(i)||c.push(i):i&&i.length&&"string"!==n&&a(i)})}(arguments),i?l=c.length:n&&(r=t,d(n))}return this},remove:function(){return c&&re.each(arguments,function(e,t){for(var a;(a=re.inArray(t,c,a))>-1;)c.splice(a,1),i&&(l>=a&&l--,s>=a&&s--)}),this},has:function(e){return e?re.inArray(e,c)>-1:!(!c||!c.length)},empty:function(){return c=[],this},disable:function(){return c=p=n=t,this},disabled:function(){return!c},lock:function(){return p=t,n||u.disable(),this},locked:function(){return!p},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!c||o&&!p||(i?p.push(t):d(t)),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!o}};return u},re.extend({Deferred:function(e){var t=[["resolve","done",re.Callbacks("once memory"),"resolved"],["reject","fail",re.Callbacks("once memory"),"rejected"],["notify","progress",re.Callbacks("memory")]],i="pending",a={state:function(){return i},always:function(){return n.done(arguments).fail(arguments),this},then:function(){var e=arguments;return re.Deferred(function(i){re.each(t,function(t,o){var l=o[0],s=re.isFunction(e[t])&&e[t];n[o[1]](function(){var e=s&&s.apply(this,arguments);e&&re.isFunction(e.promise)?e.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[l+"With"](this===a?i.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?re.extend(e,a):a}},n={};return a.pipe=a.then,re.each(t,function(e,o){var l=o[2],s=o[3];a[o[1]]=l.add,s&&l.add(function(){i=s},t[1^e][2].disable,t[2][2].lock),n[o[0]]=function(){return n[o[0]+"With"](this===n?a:this,arguments),this},n[o[0]+"With"]=l.fireWith}),a.promise(n),e&&e.call(n,n),n},when:function(e){var t,i,a,n=0,o=ae.call(arguments),l=o.length,s=1!==l||e&&re.isFunction(e.promise)?l:0,r=1===s?e:re.Deferred(),c=function(e,i,a){return function(n){i[e]=this,a[e]=arguments.length>1?ae.call(arguments):n,a===t?r.notifyWith(i,a):--s||r.resolveWith(i,a)}};if(l>1)for(t=new Array(l),i=new Array(l),a=new Array(l);l>n;n++)o[n]&&re.isFunction(o[n].promise)?o[n].promise().done(c(n,a,o)).fail(r.reject).progress(c(n,i,t)):--s;return s||r.resolveWith(a,o),r.promise()}}),re.support=function(){var t,i,a,n,o,l,s,r,c,p,d=V.createElement("div");if(d.setAttribute("className","t"),d.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=d.getElementsByTagName("*"),a=d.getElementsByTagName("a")[0],!i||!a||!i.length)return{};o=V.createElement("select"),s=o.appendChild(V.createElement("option")),n=d.getElementsByTagName("input")[0],a.style.cssText="top:1px;float:left;opacity:.5",t={getSetAttribute:"t"!==d.className,leadingWhitespace:3===d.firstChild.nodeType,tbody:!d.getElementsByTagName("tbody").length,htmlSerialize:!!d.getElementsByTagName("link").length,style:/top/.test(a.getAttribute("style")),hrefNormalized:"/a"===a.getAttribute("href"),opacity:/^0.5/.test(a.style.opacity),cssFloat:!!a.style.cssFloat,checkOn:!!n.value,optSelected:s.selected,enctype:!!V.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==V.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===V.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},n.checked=!0,t.noCloneChecked=n.cloneNode(!0).checked,o.disabled=!0,t.optDisabled=!s.disabled;try{delete d.test}catch(u){t.deleteExpando=!1}n=V.createElement("input"),n.setAttribute("value",""),t.input=""===n.getAttribute("value"),n.value="t",n.setAttribute("type","radio"),t.radioValue="t"===n.value,n.setAttribute("checked","t"),n.setAttribute("name","t"),l=V.createDocumentFragment(),l.appendChild(n),t.appendChecked=n.checked,t.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,d.attachEvent&&(d.attachEvent("onclick",function(){t.noCloneEvent=!1}),d.cloneNode(!0).click());for(p in{submit:!0,change:!0,focusin:!0})d.setAttribute(r="on"+p,"t"),t[p+"Bubbles"]=r in e||d.attributes[r].expando===!1;return d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===d.style.backgroundClip,re(function(){var i,a,n,o="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",l=V.getElementsByTagName("body")[0];l&&(i=V.createElement("div"),i.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",l.appendChild(i).appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",n=d.getElementsByTagName("td"),n[0].style.cssText="padding:0;margin:0;border:0;display:none",c=0===n[0].offsetHeight,n[0].style.display="",n[1].style.display="none",t.reliableHiddenOffsets=c&&0===n[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=4===d.offsetWidth,t.doesNotIncludeMarginInBodyOffset=1!==l.offsetTop,e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(d,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(d,null)||{width:"4px"}).width,a=d.appendChild(V.createElement("div")),a.style.cssText=d.style.cssText=o,a.style.marginRight=a.style.width="0",d.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(a,null)||{}).marginRight)),typeof d.style.zoom!==J&&(d.innerHTML="",d.style.cssText=o+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.innerHTML="<div></div>",d.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==d.offsetWidth,t.inlineBlockNeedsLayout&&(l.style.zoom=1)),l.removeChild(i),i=d=n=a=null)}),i=o=l=s=a=n=null,t}();var xe=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Te=/([A-Z])/g;re.extend({cache:{},expando:"jQuery1"+(ee+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?re.cache[e[re.expando]]:e[re.expando],!!e&&!s(e)},data:function(e,t,i){return n(e,t,i)},removeData:function(e,t){return o(e,t)},_data:function(e,t,i){return n(e,t,i,!0)},_removeData:function(e,t){return o(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&re.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),re.fn.extend({data:function(e,i){var a,n,o=this[0],s=0,r=null;if(e===t){if(this.length&&(r=re.data(o),1===o.nodeType&&!re._data(o,"parsedAttrs"))){for(a=o.attributes;s<a.length;s++)n=a[s].name,n.indexOf("data-")||(n=re.camelCase(n.slice(5)),l(o,n,r[n]));re._data(o,"parsedAttrs",!0)}return r}return"object"==typeof e?this.each(function(){re.data(this,e)}):re.access(this,function(i){return i===t?o?l(o,e,re.data(o,e)):null:void this.each(function(){re.data(this,e,i)})},null,i,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){re.removeData(this,e)})}}),re.extend({queue:function(e,t,i){var a;return e?(t=(t||"fx")+"queue",a=re._data(e,t),i&&(!a||re.isArray(i)?a=re._data(e,t,re.makeArray(i)):a.push(i)),a||[]):void 0},dequeue:function(e,t){t=t||"fx";var i=re.queue(e,t),a=i.length,n=i.shift(),o=re._queueHooks(e,t),l=function(){re.dequeue(e,t)};"inprogress"===n&&(n=i.shift(),a--),o.cur=n,n&&("fx"===t&&i.unshift("inprogress"),delete o.stop,n.call(e,l,o)),!a&&o&&o.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return re._data(e,i)||re._data(e,i,{empty:re.Callbacks("once memory").add(function(){re._removeData(e,t+"queue"),re._removeData(e,i)})})}}),re.fn.extend({queue:function(e,i){var a=2;return"string"!=typeof e&&(i=e,e="fx",a--),arguments.length<a?re.queue(this[0],e):i===t?this:this.each(function(){var t=re.queue(this,e,i);re._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&re.dequeue(this,e)})},dequeue:function(e){return this.each(function(){re.dequeue(this,e)})},delay:function(e,t){return e=re.fx?re.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,i){var a=setTimeout(t,e);i.stop=function(){clearTimeout(a)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,i){var a,n=1,o=re.Deferred(),l=this,s=this.length,r=function(){--n||o.resolveWith(l,[l])};for("string"!=typeof e&&(i=e,e=t),e=e||"fx";s--;)a=re._data(l[s],e+"queueHooks"),a&&a.empty&&(n++,a.empty.add(r));return r(),o.promise(i)}});var Se,je,Ee=/[\t\r\n]/g,Ie=/\r/g,$e=/^(?:input|select|textarea|button|object)$/i,De=/^(?:a|area)$/i,Ne=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,Le=/^(?:checked|selected)$/i,Me=re.support.getSetAttribute,Ae=re.support.input;re.fn.extend({attr:function(e,t){return re.access(this,re.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){re.removeAttr(this,e)})},prop:function(e,t){return re.access(this,re.prop,e,t,arguments.length>1)},removeProp:function(e){return e=re.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(i){}})},addClass:function(e){var t,i,a,n,o,l=0,s=this.length,r="string"==typeof e&&e;if(re.isFunction(e))return this.each(function(t){re(this).addClass(e.call(this,t,this.className))});if(r)for(t=(e||"").match(pe)||[];s>l;l++)if(i=this[l],a=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Ee," "):" ")){for(o=0;n=t[o++];)a.indexOf(" "+n+" ")<0&&(a+=n+" ");i.className=re.trim(a)}return this},removeClass:function(e){var t,i,a,n,o,l=0,s=this.length,r=0===arguments.length||"string"==typeof e&&e;if(re.isFunction(e))return this.each(function(t){re(this).removeClass(e.call(this,t,this.className))});if(r)for(t=(e||"").match(pe)||[];s>l;l++)if(i=this[l],a=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Ee," "):"")){for(o=0;n=t[o++];)for(;a.indexOf(" "+n+" ")>=0;)a=a.replace(" "+n+" "," ");i.className=e?re.trim(a):""}return this},toggleClass:function(e,t){var i=typeof e,a="boolean"==typeof t;return re.isFunction(e)?this.each(function(i){re(this).toggleClass(e.call(this,i,this.className,t),t)}):this.each(function(){if("string"===i)for(var n,o=0,l=re(this),s=t,r=e.match(pe)||[];n=r[o++];)s=a?s:!l.hasClass(n),l[s?"addClass":"removeClass"](n);else i!==J&&"boolean"!==i||(this.className&&re._data(this,"__className__",this.className),this.className=this.className||e===!1?"":re._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",i=0,a=this.length;a>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(Ee," ").indexOf(t)>=0)return!0;return!1},val:function(e){var i,a,n,o=this[0];{if(arguments.length)return n=re.isFunction(e),this.each(function(i){var o,l=re(this);1===this.nodeType&&(o=n?e.call(this,i,l.val()):e,null==o?o="":"number"==typeof o?o+="":re.isArray(o)&&(o=re.map(o,function(e){return null==e?"":e+""})),a=re.valHooks[this.type]||re.valHooks[this.nodeName.toLowerCase()],a&&"set"in a&&a.set(this,o,"value")!==t||(this.value=o))});if(o)return a=re.valHooks[o.type]||re.valHooks[o.nodeName.toLowerCase()],a&&"get"in a&&(i=a.get(o,"value"))!==t?i:(i=o.value,"string"==typeof i?i.replace(Ie,""):null==i?"":i)}}}),re.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){for(var t,i,a=e.options,n=e.selectedIndex,o="select-one"===e.type||0>n,l=o?null:[],s=o?n+1:a.length,r=0>n?s:o?n:0;s>r;r++)if(i=a[r],(i.selected||r===n)&&(re.support.optDisabled?!i.disabled:null===i.getAttribute("disabled"))&&(!i.parentNode.disabled||!re.nodeName(i.parentNode,"optgroup"))){if(t=re(i).val(),o)return t;l.push(t)}return l},set:function(e,t){var i=re.makeArray(t);return re(e).find("option").each(function(){this.selected=re.inArray(re(this).val(),i)>=0}),i.length||(e.selectedIndex=-1),i}}},attr:function(e,i,a){var n,o,l,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return typeof e.getAttribute===J?re.prop(e,i,a):(o=1!==s||!re.isXMLDoc(e),o&&(i=i.toLowerCase(),n=re.attrHooks[i]||(Ne.test(i)?je:Se)),a===t?n&&o&&"get"in n&&null!==(l=n.get(e,i))?l:(typeof e.getAttribute!==J&&(l=e.getAttribute(i)),null==l?t:l):null!==a?n&&o&&"set"in n&&(l=n.set(e,a,i))!==t?l:(e.setAttribute(i,a+""),a):void re.removeAttr(e,i))},removeAttr:function(e,t){var i,a,n=0,o=t&&t.match(pe);if(o&&1===e.nodeType)for(;i=o[n++];)a=re.propFix[i]||i,Ne.test(i)?!Me&&Le.test(i)?e[re.camelCase("default-"+i)]=e[a]=!1:e[a]=!1:re.attr(e,i,""),e.removeAttribute(Me?i:a)},attrHooks:{type:{set:function(e,t){if(!re.support.radioValue&&"radio"===t&&re.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,i,a){var n,o,l,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return l=1!==s||!re.isXMLDoc(e),l&&(i=re.propFix[i]||i,o=re.propHooks[i]),a!==t?o&&"set"in o&&(n=o.set(e,a,i))!==t?n:e[i]=a:o&&"get"in o&&null!==(n=o.get(e,i))?n:e[i]},propHooks:{tabIndex:{get:function(e){var i=e.getAttributeNode("tabindex");return i&&i.specified?parseInt(i.value,10):$e.test(e.nodeName)||De.test(e.nodeName)&&e.href?0:t}}}}),je={get:function(e,i){var a=re.prop(e,i),n="boolean"==typeof a&&e.getAttribute(i),o="boolean"==typeof a?Ae&&Me?null!=n:Le.test(i)?e[re.camelCase("default-"+i)]:!!n:e.getAttributeNode(i);return o&&o.value!==!1?i.toLowerCase():t},set:function(e,t,i){return t===!1?re.removeAttr(e,i):Ae&&Me||!Le.test(i)?e.setAttribute(!Me&&re.propFix[i]||i,i):e[re.camelCase("default-"+i)]=e[i]=!0,i}},Ae&&Me||(re.attrHooks.value={get:function(e,i){var a=e.getAttributeNode(i);return re.nodeName(e,"input")?e.defaultValue:a&&a.specified?a.value:t},set:function(e,t,i){return re.nodeName(e,"input")?void(e.defaultValue=t):Se&&Se.set(e,t,i)}}),Me||(Se=re.valHooks.button={get:function(e,i){var a=e.getAttributeNode(i);return a&&("id"===i||"name"===i||"coords"===i?""!==a.value:a.specified)?a.value:t},set:function(e,i,a){var n=e.getAttributeNode(a);return n||e.setAttributeNode(n=e.ownerDocument.createAttribute(a)),n.value=i+="","value"===a||i===e.getAttribute(a)?i:t}},re.attrHooks.contenteditable={get:Se.get,set:function(e,t,i){Se.set(e,""===t?!1:t,i)}},re.each(["width","height"],function(e,t){re.attrHooks[t]=re.extend(re.attrHooks[t],{set:function(e,i){return""===i?(e.setAttribute(t,"auto"),i):void 0}})})),re.support.hrefNormalized||(re.each(["href","src","width","height"],function(e,i){re.attrHooks[i]=re.extend(re.attrHooks[i],{get:function(e){var a=e.getAttribute(i,2);return null==a?t:a}})}),re.each(["href","src"],function(e,t){re.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}})),re.support.style||(re.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),re.support.optSelected||(re.propHooks.selected=re.extend(re.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),re.support.enctype||(re.propFix.enctype="encoding"),re.support.checkOn||re.each(["radio","checkbox"],function(){re.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),re.each(["radio","checkbox"],function(){re.valHooks[this]=re.extend(re.valHooks[this],{set:function(e,t){return re.isArray(t)?e.checked=re.inArray(re(e).val(),t)>=0:void 0}})});var Re=/^(?:input|select|textarea)$/i,Oe=/^key/,He=/^(?:mouse|contextmenu)|click/,Fe=/^(?:focusinfocus|focusoutblur)$/,qe=/^([^.]*)(?:\.(.+)|)$/;re.event={global:{},add:function(e,i,a,n,o){var l,s,r,c,p,d,u,_,f,h,m,y=re._data(e);if(y){for(a.handler&&(c=a,a=c.handler,o=c.selector),a.guid||(a.guid=re.guid++),(s=y.events)||(s=y.events={}),(d=y.handle)||(d=y.handle=function(e){return typeof re===J||e&&re.event.triggered===e.type?t:re.event.dispatch.apply(d.elem,arguments)},d.elem=e),i=(i||"").match(pe)||[""],r=i.length;r--;)l=qe.exec(i[r])||[],f=m=l[1],h=(l[2]||"").split(".").sort(),p=re.event.special[f]||{},f=(o?p.delegateType:p.bindType)||f,p=re.event.special[f]||{},u=re.extend({type:f,origType:m,data:n,handler:a,guid:a.guid,selector:o,needsContext:o&&re.expr.match.needsContext.test(o),namespace:h.join(".")},c),(_=s[f])||(_=s[f]=[],_.delegateCount=0,p.setup&&p.setup.call(e,n,h,d)!==!1||(e.addEventListener?e.addEventListener(f,d,!1):e.attachEvent&&e.attachEvent("on"+f,d))),p.add&&(p.add.call(e,u),u.handler.guid||(u.handler.guid=a.guid)),o?_.splice(_.delegateCount++,0,u):_.push(u),re.event.global[f]=!0;e=null}},remove:function(e,t,i,a,n){var o,l,s,r,c,p,d,u,_,f,h,m=re.hasData(e)&&re._data(e);if(m&&(p=m.events)){for(t=(t||"").match(pe)||[""],c=t.length;c--;)if(s=qe.exec(t[c])||[],_=h=s[1],f=(s[2]||"").split(".").sort(),_){for(d=re.event.special[_]||{},_=(a?d.delegateType:d.bindType)||_,u=p[_]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),r=o=u.length;o--;)l=u[o],!n&&h!==l.origType||i&&i.guid!==l.guid||s&&!s.test(l.namespace)||a&&a!==l.selector&&("**"!==a||!l.selector)||(u.splice(o,1),l.selector&&u.delegateCount--,d.remove&&d.remove.call(e,l));r&&!u.length&&(d.teardown&&d.teardown.call(e,f,m.handle)!==!1||re.removeEvent(e,_,m.handle),delete p[_])}else for(_ in p)re.event.remove(e,_+t[c],i,a,!0);re.isEmptyObject(p)&&(delete m.handle,re._removeData(e,"events"))}},trigger:function(i,a,n,o){var l,s,r,c,p,d,u,_=[n||V],f=le.call(i,"type")?i.type:i,h=le.call(i,"namespace")?i.namespace.split("."):[];if(r=d=n=n||V,3!==n.nodeType&&8!==n.nodeType&&!Fe.test(f+re.event.triggered)&&(f.indexOf(".")>=0&&(h=f.split("."),f=h.shift(),h.sort()),s=f.indexOf(":")<0&&"on"+f,i=i[re.expando]?i:new re.Event(f,"object"==typeof i&&i),i.isTrigger=!0,i.namespace=h.join("."),i.namespace_re=i.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,i.result=t,i.target||(i.target=n),a=null==a?[i]:re.makeArray(a,[i]),p=re.event.special[f]||{},o||!p.trigger||p.trigger.apply(n,a)!==!1)){if(!o&&!p.noBubble&&!re.isWindow(n)){for(c=p.delegateType||f,Fe.test(c+f)||(r=r.parentNode);r;r=r.parentNode)_.push(r),d=r;d===(n.ownerDocument||V)&&_.push(d.defaultView||d.parentWindow||e)}for(u=0;(r=_[u++])&&!i.isPropagationStopped();)i.type=u>1?c:p.bindType||f,l=(re._data(r,"events")||{})[i.type]&&re._data(r,"handle"),l&&l.apply(r,a),l=s&&r[s],l&&re.acceptData(r)&&l.apply&&l.apply(r,a)===!1&&i.preventDefault();if(i.type=f,!o&&!i.isDefaultPrevented()&&(!p._default||p._default.apply(n.ownerDocument,a)===!1)&&("click"!==f||!re.nodeName(n,"a"))&&re.acceptData(n)&&s&&n[f]&&!re.isWindow(n)){d=n[s],d&&(n[s]=null),re.event.triggered=f;try{n[f]()}catch(m){}re.event.triggered=t,d&&(n[s]=d)}return i.result}},dispatch:function(e){e=re.event.fix(e);var i,a,n,o,l,s=[],r=ae.call(arguments),c=(re._data(this,"events")||{})[e.type]||[],p=re.event.special[e.type]||{};if(r[0]=e,e.delegateTarget=this,!p.preDispatch||p.preDispatch.call(this,e)!==!1){for(s=re.event.handlers.call(this,e,c),i=0;(o=s[i++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,l=0;(n=o.handlers[l++])&&!e.isImmediatePropagationStopped();)e.namespace_re&&!e.namespace_re.test(n.namespace)||(e.handleObj=n,e.data=n.data,a=((re.event.special[n.origType]||{}).handle||n.handler).apply(o.elem,r),a!==t&&(e.result=a)===!1&&(e.preventDefault(),e.stopPropagation()));return p.postDispatch&&p.postDispatch.call(this,e),e.result}},handlers:function(e,i){var a,n,o,l,s=[],r=i.delegateCount,c=e.target;if(r&&c.nodeType&&(!e.button||"click"!==e.type))for(;c!=this;c=c.parentNode||this)if(1===c.nodeType&&(c.disabled!==!0||"click"!==e.type)){for(o=[],l=0;r>l;l++)n=i[l],a=n.selector+" ",o[a]===t&&(o[a]=n.needsContext?re(a,this).index(c)>=0:re.find(a,this,null,[c]).length),o[a]&&o.push(n);o.length&&s.push({elem:c,handlers:o})}return r<i.length&&s.push({elem:this,handlers:i.slice(r)}),s},fix:function(e){if(e[re.expando])return e;var t,i,a,n=e.type,o=e,l=this.fixHooks[n];for(l||(this.fixHooks[n]=l=He.test(n)?this.mouseHooks:Oe.test(n)?this.keyHooks:{}),a=l.props?this.props.concat(l.props):this.props,e=new re.Event(o),t=a.length;t--;)i=a[t],e[i]=o[i];return e.target||(e.target=o.srcElement||V),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,l.filter?l.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,i){var a,n,o,l=i.button,s=i.fromElement;return null==e.pageX&&null!=i.clientX&&(n=e.target.ownerDocument||V,o=n.documentElement,a=n.body,e.pageX=i.clientX+(o&&o.scrollLeft||a&&a.scrollLeft||0)-(o&&o.clientLeft||a&&a.clientLeft||0),e.pageY=i.clientY+(o&&o.scrollTop||a&&a.scrollTop||0)-(o&&o.clientTop||a&&a.clientTop||0)),!e.relatedTarget&&s&&(e.relatedTarget=s===e.target?i.toElement:s),e.which||l===t||(e.which=1&l?1:2&l?3:4&l?2:0),e}},special:{load:{noBubble:!0},click:{trigger:function(){return re.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0}},focus:{trigger:function(){if(this!==V.activeElement&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===V.activeElement&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,i,a){var n=re.extend(new re.Event,i,{type:e,isSimulated:!0,originalEvent:{}});a?re.event.trigger(n,null,t):re.event.dispatch.call(t,n),n.isDefaultPrevented()&&i.preventDefault()}},re.removeEvent=V.removeEventListener?function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)}:function(e,t,i){var a="on"+t;e.detachEvent&&(typeof e[a]===J&&(e[a]=null),e.detachEvent(a,i))},re.Event=function(e,t){return this instanceof re.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?r:c):this.type=e,t&&re.extend(this,t),this.timeStamp=e&&e.timeStamp||re.now(),void(this[re.expando]=!0)):new re.Event(e,t)},re.Event.prototype={isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=r,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=r,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=r,this.stopPropagation()}},re.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){re.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,a=this,n=e.relatedTarget,o=e.handleObj;return n&&(n===a||re.contains(a,n))||(e.type=o.origType,i=o.handler.apply(this,arguments),e.type=t),i}}}),re.support.submitBubbles||(re.event.special.submit={setup:function(){return re.nodeName(this,"form")?!1:void re.event.add(this,"click._submit keypress._submit",function(e){var i=e.target,a=re.nodeName(i,"input")||re.nodeName(i,"button")?i.form:t;a&&!re._data(a,"submitBubbles")&&(re.event.add(a,"submit._submit",function(e){e._submit_bubble=!0}),re._data(a,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&re.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return re.nodeName(this,"form")?!1:void re.event.remove(this,"._submit")}}),re.support.changeBubbles||(re.event.special.change={setup:function(){return Re.test(this.nodeName)?("checkbox"!==this.type&&"radio"!==this.type||(re.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),re.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),re.event.simulate("change",this,e,!0)})),!1):void re.event.add(this,"beforeactivate._change",function(e){var t=e.target;Re.test(t.nodeName)&&!re._data(t,"changeBubbles")&&(re.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||re.event.simulate("change",this.parentNode,e,!0)}),re._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return re.event.remove(this,"._change"),!Re.test(this.nodeName)}}),re.support.focusinBubbles||re.each({focus:"focusin",blur:"focusout"},function(e,t){var i=0,a=function(e){re.event.simulate(t,e.target,re.event.fix(e),!0)};re.event.special[t]={setup:function(){0===i++&&V.addEventListener(e,a,!0)},teardown:function(){0===--i&&V.removeEventListener(e,a,!0)}}}),re.fn.extend({on:function(e,i,a,n,o){var l,s;if("object"==typeof e){"string"!=typeof i&&(a=a||i,i=t);for(l in e)this.on(l,i,a,e[l],o);return this}if(null==a&&null==n?(n=i,a=i=t):null==n&&("string"==typeof i?(n=a,a=t):(n=a,a=i,i=t)),n===!1)n=c;else if(!n)return this;return 1===o&&(s=n,n=function(e){return re().off(e),s.apply(this,arguments)},n.guid=s.guid||(s.guid=re.guid++)),this.each(function(){re.event.add(this,e,n,a,i)})},one:function(e,t,i,a){return this.on(e,t,i,a,1)},off:function(e,i,a){var n,o;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,re(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(o in e)this.off(o,i,e[o]);return this}return i!==!1&&"function"!=typeof i||(a=i,i=t),a===!1&&(a=c),this.each(function(){re.event.remove(this,e,a,i)})},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,a){return this.on(t,e,i,a)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)},trigger:function(e,t){return this.each(function(){re.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];return i?re.event.trigger(e,t,i,!0):void 0}}),function(e,t){function i(e){return fe.test(e+"")}function a(){var e,t=[];return e=function(i,a){return t.push(i+=" ")>x.cacheLength&&delete e[t.shift()],e[i]=a}}function n(e){return e[F]=!0,e}function o(e){var t=D.createElement("div");try{return e(t)}catch(i){return!1}finally{t=null}}function l(e,t,i,a){var n,o,l,s,r,c,p,_,f,h;if((t?t.ownerDocument||t:q)!==D&&$(t),t=t||D,i=i||[],!e||"string"!=typeof e)return i;if(1!==(s=t.nodeType)&&9!==s)return[];if(!L&&!a){if(n=he.exec(e))if(l=n[1]){if(9===s){if(o=t.getElementById(l),!o||!o.parentNode)return i;if(o.id===l)return i.push(o),i}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(l))&&O(t,o)&&o.id===l)return i.push(o),i}else{if(n[2])return G.apply(i,Z.call(t.getElementsByTagName(e),0)),i;if((l=n[3])&&B.getByClassName&&t.getElementsByClassName)return G.apply(i,Z.call(t.getElementsByClassName(l),0)),i}if(B.qsa&&!M.test(e)){if(p=!0,_=F,f=t,h=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(c=d(e),(p=t.getAttribute("id"))?_=p.replace(ge,"\\$&"):t.setAttribute("id",_),_="[id='"+_+"'] ",r=c.length;r--;)c[r]=_+u(c[r]);f=_e.test(e)&&t.parentNode||t,h=c.join(",")}if(h)try{return G.apply(i,Z.call(f.querySelectorAll(h),0)),i}catch(m){}finally{p||t.removeAttribute("id")}}}return w(e.replace(le,"$1"),t,i,a)}function s(e,t){var i=t&&e,a=i&&(~t.sourceIndex||V)-(~e.sourceIndex||V);if(a)return a;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function r(e){return function(t){var i=t.nodeName.toLowerCase();return"input"===i&&t.type===e}}function c(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function p(e){return n(function(t){return t=+t,n(function(i,a){for(var n,o=e([],i.length,t),l=o.length;l--;)i[n=o[l]]&&(i[n]=!(a[n]=i[n]))})})}function d(e,t){var i,a,n,o,s,r,c,p=U[e+" "];if(p)return t?0:p.slice(0);for(s=e,r=[],c=x.preFilter;s;){i&&!(a=se.exec(s))||(a&&(s=s.slice(a[0].length)||s),r.push(n=[])),i=!1,(a=ce.exec(s))&&(i=a.shift(),n.push({value:i,type:a[0].replace(le," ")}),s=s.slice(i.length));for(o in x.filter)!(a=ue[o].exec(s))||c[o]&&!(a=c[o](a))||(i=a.shift(),n.push({value:i,type:o,matches:a}),s=s.slice(i.length));if(!i)break}return t?s.length:s?l.error(e):U(e,r).slice(0)}function u(e){for(var t=0,i=e.length,a="";i>t;t++)a+=e[t].value;return a}function _(e,t,i){var a=t.dir,n=i&&"parentNode"===a,o=P++;return t.first?function(t,i,o){for(;t=t[a];)if(1===t.nodeType||n)return e(t,i,o)}:function(t,i,l){var s,r,c,p=z+" "+o;if(l){for(;t=t[a];)if((1===t.nodeType||n)&&e(t,i,l))return!0}else for(;t=t[a];)if(1===t.nodeType||n)if(c=t[F]||(t[F]={}),(r=c[a])&&r[0]===p){if((s=r[1])===!0||s===C)return s===!0}else if(r=c[a]=[p],r[1]=e(t,i,l)||C,r[1]===!0)return!0}}function f(e){return e.length>1?function(t,i,a){for(var n=e.length;n--;)if(!e[n](t,i,a))return!1;return!0}:e[0]}function h(e,t,i,a,n){for(var o,l=[],s=0,r=e.length,c=null!=t;r>s;s++)(o=e[s])&&(i&&!i(o,a,n)||(l.push(o),c&&t.push(s)));return l}function m(e,t,i,a,o,l){return a&&!a[F]&&(a=m(a)),o&&!o[F]&&(o=m(o,l)),n(function(n,l,s,r){var c,p,d,u=[],_=[],f=l.length,m=n||v(t||"*",s.nodeType?[s]:s,[]),y=!e||!n&&t?m:h(m,u,e,s,r),g=i?o||(n?e:f||a)?[]:l:y;if(i&&i(y,g,s,r),a)for(c=h(g,_),a(c,[],s,r),p=c.length;p--;)(d=c[p])&&(g[_[p]]=!(y[_[p]]=d));if(n){if(o||e){if(o){for(c=[],p=g.length;p--;)(d=g[p])&&c.push(y[p]=d);o(null,g=[],c,r)}for(p=g.length;p--;)(d=g[p])&&(c=o?K.call(n,d):u[p])>-1&&(n[c]=!(l[c]=d))}}else g=h(g===l?g.splice(f,g.length):g),o?o(null,l,g,r):G.apply(l,g)})}function y(e){for(var t,i,a,n=e.length,o=x.relative[e[0].type],l=o||x.relative[" "],s=o?1:0,r=_(function(e){return e===t},l,!0),c=_(function(e){return K.call(t,e)>-1},l,!0),p=[function(e,i,a){return!o&&(a||i!==I)||((t=i).nodeType?r(e,i,a):c(e,i,a))}];n>s;s++)if(i=x.relative[e[s].type])p=[_(f(p),i)];else{if(i=x.filter[e[s].type].apply(null,e[s].matches),i[F]){for(a=++s;n>a&&!x.relative[e[a].type];a++);return m(s>1&&f(p),s>1&&u(e.slice(0,s-1)).replace(le,"$1"),i,a>s&&y(e.slice(s,a)),n>a&&y(e=e.slice(a)),n>a&&u(e))}p.push(i)}return f(p)}function g(e,t){var i=0,a=t.length>0,o=e.length>0,s=function(n,s,r,c,p){var d,u,_,f=[],m=0,y="0",g=n&&[],v=null!=p,w=I,k=n||o&&x.find.TAG("*",p&&s.parentNode||s),b=z+=null==w?1:Math.random()||.1;for(v&&(I=s!==D&&s,C=i);null!=(d=k[y]);y++){if(o&&d){for(u=0;_=e[u++];)if(_(d,s,r)){c.push(d);break}v&&(z=b,C=++i)}a&&((d=!_&&d)&&m--,n&&g.push(d))}if(m+=y,a&&y!==m){for(u=0;_=t[u++];)_(g,f,s,r);if(n){if(m>0)for(;y--;)g[y]||f[y]||(f[y]=Q.call(c));f=h(f)}G.apply(c,f),v&&!n&&f.length>0&&m+t.length>1&&l.uniqueSort(c)}return v&&(z=b,I=w),g};return a?n(s):s}function v(e,t,i){for(var a=0,n=t.length;n>a;a++)l(e,t[a],i);return i}function w(e,t,i,a){var n,o,l,s,r,c=d(e);if(!a&&1===c.length){if(o=c[0]=c[0].slice(0),o.length>2&&"ID"===(l=o[0]).type&&9===t.nodeType&&!L&&x.relative[o[1].type]){if(t=x.find.ID(l.matches[0].replace(we,ke),t)[0],!t)return i;e=e.slice(o.shift().value.length)}for(n=ue.needsContext.test(e)?0:o.length;n--&&(l=o[n],!x.relative[s=l.type]);)if((r=x.find[s])&&(a=r(l.matches[0].replace(we,ke),_e.test(o[0].type)&&t.parentNode||t))){if(o.splice(n,1),e=a.length&&u(o),!e)return G.apply(i,Z.call(a,0)),i;break}}return j(e,c)(a,t,L,i,_e.test(e)),i}function k(){}var b,C,x,T,S,j,E,I,$,D,N,L,M,A,R,O,H,F="sizzle"+-new Date,q=e.document,B={},z=0,P=0,W=a(),U=a(),X=a(),J=typeof t,V=1<<31,Y=[],Q=Y.pop,G=Y.push,Z=Y.slice,K=Y.indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(this[t]===e)return t;return-1},ee="[\\x20\\t\\r\\n\\f]",te="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ie=te.replace("w","w#"),ae="([*^$|!~]?=)",ne="\\["+ee+"*("+te+")"+ee+"*(?:"+ae+ee+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ie+")|)|)"+ee+"*\\]",oe=":("+te+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ne.replace(3,8)+")*)|.*)\\)|)",le=new RegExp("^"+ee+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ee+"+$","g"),se=new RegExp("^"+ee+"*,"+ee+"*"),ce=new RegExp("^"+ee+"*([\\x20\\t\\r\\n\\f>+~])"+ee+"*"),pe=new RegExp(oe),de=new RegExp("^"+ie+"$"),ue={
ID:new RegExp("^#("+te+")"),CLASS:new RegExp("^\\.("+te+")"),NAME:new RegExp("^\\[name=['\"]?("+te+")['\"]?\\]"),TAG:new RegExp("^("+te.replace("w","w*")+")"),ATTR:new RegExp("^"+ne),PSEUDO:new RegExp("^"+oe),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ee+"*(even|odd|(([+-]|)(\\d*)n|)"+ee+"*(?:([+-]|)"+ee+"*(\\d+)|))"+ee+"*\\)|)","i"),needsContext:new RegExp("^"+ee+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ee+"*((?:-\\d)?\\d*)"+ee+"*\\)|)(?=[^-]|$)","i")},_e=/[\x20\t\r\n\f]*[+~]/,fe=/^[^{]+\{\s*\[native code/,he=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,me=/^(?:input|select|textarea|button)$/i,ye=/^h\d$/i,ge=/'|\\/g,ve=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,we=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,ke=function(e,t){var i="0x"+t-65536;return i!==i?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{Z.call(q.documentElement.childNodes,0)[0].nodeType}catch(be){Z=function(e){for(var t,i=[];t=this[e++];)i.push(t);return i}}S=l.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},$=l.setDocument=function(e){var a=e?e.ownerDocument||e:q;return a!==D&&9===a.nodeType&&a.documentElement?(D=a,N=a.documentElement,L=S(a),B.tagNameNoComments=o(function(e){return e.appendChild(a.createComment("")),!e.getElementsByTagName("*").length}),B.attributes=o(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),B.getByClassName=o(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",e.getElementsByClassName&&e.getElementsByClassName("e").length?(e.lastChild.className="e",2===e.getElementsByClassName("e").length):!1}),B.getByName=o(function(e){e.id=F+0,e.innerHTML="<a name='"+F+"'></a><div name='"+F+"'></div>",N.insertBefore(e,N.firstChild);var t=a.getElementsByName&&a.getElementsByName(F).length===2+a.getElementsByName(F+0).length;return B.getIdNotName=!a.getElementById(F),N.removeChild(e),t}),x.attrHandle=o(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==J&&"#"===e.firstChild.getAttribute("href")})?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},B.getIdNotName?(x.find.ID=function(e,t){if(typeof t.getElementById!==J&&!L){var i=t.getElementById(e);return i&&i.parentNode?[i]:[]}},x.filter.ID=function(e){var t=e.replace(we,ke);return function(e){return e.getAttribute("id")===t}}):(x.find.ID=function(e,i){if(typeof i.getElementById!==J&&!L){var a=i.getElementById(e);return a?a.id===e||typeof a.getAttributeNode!==J&&a.getAttributeNode("id").value===e?[a]:t:[]}},x.filter.ID=function(e){var t=e.replace(we,ke);return function(e){var i=typeof e.getAttributeNode!==J&&e.getAttributeNode("id");return i&&i.value===t}}),x.find.TAG=B.tagNameNoComments?function(e,t){return typeof t.getElementsByTagName!==J?t.getElementsByTagName(e):void 0}:function(e,t){var i,a=[],n=0,o=t.getElementsByTagName(e);if("*"===e){for(;i=o[n++];)1===i.nodeType&&a.push(i);return a}return o},x.find.NAME=B.getByName&&function(e,t){return typeof t.getElementsByName!==J?t.getElementsByName(name):void 0},x.find.CLASS=B.getByClassName&&function(e,t){return typeof t.getElementsByClassName===J||L?void 0:t.getElementsByClassName(e)},A=[],M=[":focus"],(B.qsa=i(a.querySelectorAll))&&(o(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||M.push("\\["+ee+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||M.push(":checked")}),o(function(e){e.innerHTML="<input type='hidden' i=''/>",e.querySelectorAll("[i^='']").length&&M.push("[*^$]="+ee+"*(?:\"\"|'')"),e.querySelectorAll(":enabled").length||M.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),M.push(",.*:")})),(B.matchesSelector=i(R=N.matchesSelector||N.mozMatchesSelector||N.webkitMatchesSelector||N.oMatchesSelector||N.msMatchesSelector))&&o(function(e){B.disconnectedMatch=R.call(e,"div"),R.call(e,"[s!='']:x"),A.push("!=",oe)}),M=new RegExp(M.join("|")),A=new RegExp(A.join("|")),O=i(N.contains)||N.compareDocumentPosition?function(e,t){var i=9===e.nodeType?e.documentElement:e,a=t&&t.parentNode;return e===a||!(!a||1!==a.nodeType||!(i.contains?i.contains(a):e.compareDocumentPosition&&16&e.compareDocumentPosition(a)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},H=N.compareDocumentPosition?function(e,t){var i;return e===t?(E=!0,0):(i=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t))?1&i||e.parentNode&&11===e.parentNode.nodeType?e===a||O(q,e)?-1:t===a||O(q,t)?1:0:4&i?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var i,n=0,o=e.parentNode,l=t.parentNode,r=[e],c=[t];if(e===t)return E=!0,0;if(!o||!l)return e===a?-1:t===a?1:o?-1:l?1:0;if(o===l)return s(e,t);for(i=e;i=i.parentNode;)r.unshift(i);for(i=t;i=i.parentNode;)c.unshift(i);for(;r[n]===c[n];)n++;return n?s(r[n],c[n]):r[n]===q?-1:c[n]===q?1:0},E=!1,[0,0].sort(H),B.detectDuplicates=E,D):D},l.matches=function(e,t){return l(e,null,null,t)},l.matchesSelector=function(e,t){if((e.ownerDocument||e)!==D&&$(e),t=t.replace(ve,"='$1']"),B.matchesSelector&&!L&&(!A||!A.test(t))&&!M.test(t))try{var i=R.call(e,t);if(i||B.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(a){}return l(t,D,null,[e]).length>0},l.contains=function(e,t){return(e.ownerDocument||e)!==D&&$(e),O(e,t)},l.attr=function(e,t){var i;return(e.ownerDocument||e)!==D&&$(e),L||(t=t.toLowerCase()),(i=x.attrHandle[t])?i(e):L||B.attributes?e.getAttribute(t):((i=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:i&&i.specified?i.value:null},l.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},l.uniqueSort=function(e){var t,i=[],a=1,n=0;if(E=!B.detectDuplicates,e.sort(H),E){for(;t=e[a];a++)t===e[a-1]&&(n=i.push(a));for(;n--;)e.splice(i[n],1)}return e},T=l.getText=function(e){var t,i="",a=0,n=e.nodeType;if(n){if(1===n||9===n||11===n){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=T(e)}else if(3===n||4===n)return e.nodeValue}else for(;t=e[a];a++)i+=T(t);return i},x=l.selectors={cacheLength:50,createPseudo:n,match:ue,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(we,ke),e[3]=(e[4]||e[5]||"").replace(we,ke),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||l.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&l.error(e[0]),e},PSEUDO:function(e){var t,i=!e[5]&&e[2];return ue.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:i&&pe.test(i)&&(t=d(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(we,ke).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=W[e+" "];return t||(t=new RegExp("(^|"+ee+")"+e+"("+ee+"|$)"))&&W(e,function(e){return t.test(e.className||typeof e.getAttribute!==J&&e.getAttribute("class")||"")})},ATTR:function(e,t,i){return function(a){var n=l.attr(a,e);return null==n?"!="===t:t?(n+="","="===t?n===i:"!="===t?n!==i:"^="===t?i&&0===n.indexOf(i):"*="===t?i&&n.indexOf(i)>-1:"$="===t?i&&n.slice(-i.length)===i:"~="===t?(" "+n+" ").indexOf(i)>-1:"|="===t?n===i||n.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(e,t,i,a,n){var o="nth"!==e.slice(0,3),l="last"!==e.slice(-4),s="of-type"===t;return 1===a&&0===n?function(e){return!!e.parentNode}:function(t,i,r){var c,p,d,u,_,f,h=o!==l?"nextSibling":"previousSibling",m=t.parentNode,y=s&&t.nodeName.toLowerCase(),g=!r&&!s;if(m){if(o){for(;h;){for(d=t;d=d[h];)if(s?d.nodeName.toLowerCase()===y:1===d.nodeType)return!1;f=h="only"===e&&!f&&"nextSibling"}return!0}if(f=[l?m.firstChild:m.lastChild],l&&g){for(p=m[F]||(m[F]={}),c=p[e]||[],_=c[0]===z&&c[1],u=c[0]===z&&c[2],d=_&&m.childNodes[_];d=++_&&d&&d[h]||(u=_=0)||f.pop();)if(1===d.nodeType&&++u&&d===t){p[e]=[z,_,u];break}}else if(g&&(c=(t[F]||(t[F]={}))[e])&&c[0]===z)u=c[1];else for(;(d=++_&&d&&d[h]||(u=_=0)||f.pop())&&((s?d.nodeName.toLowerCase()!==y:1!==d.nodeType)||!++u||(g&&((d[F]||(d[F]={}))[e]=[z,u]),d!==t)););return u-=n,u===a||u%a===0&&u/a>=0}}},PSEUDO:function(e,t){var i,a=x.pseudos[e]||x.setFilters[e.toLowerCase()]||l.error("unsupported pseudo: "+e);return a[F]?a(t):a.length>1?(i=[e,e,"",t],x.setFilters.hasOwnProperty(e.toLowerCase())?n(function(e,i){for(var n,o=a(e,t),l=o.length;l--;)n=K.call(e,o[l]),e[n]=!(i[n]=o[l])}):function(e){return a(e,0,i)}):a}},pseudos:{not:n(function(e){var t=[],i=[],a=j(e.replace(le,"$1"));return a[F]?n(function(e,t,i,n){for(var o,l=a(e,null,n,[]),s=e.length;s--;)(o=l[s])&&(e[s]=!(t[s]=o))}):function(e,n,o){return t[0]=e,a(t,null,o,i),!i.pop()}}),has:n(function(e){return function(t){return l(e,t).length>0}}),contains:n(function(e){return function(t){return(t.textContent||t.innerText||T(t)).indexOf(e)>-1}}),lang:n(function(e){return de.test(e||"")||l.error("unsupported lang: "+e),e=e.replace(we,ke).toLowerCase(),function(t){var i;do if(i=L?t.getAttribute("xml:lang")||t.getAttribute("lang"):t.lang)return i=i.toLowerCase(),i===e||0===i.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===N},focus:function(e){return e===D.activeElement&&(!D.hasFocus||D.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!x.pseudos.empty(e)},header:function(e){return ye.test(e.nodeName)},input:function(e){return me.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:p(function(){return[0]}),last:p(function(e,t){return[t-1]}),eq:p(function(e,t,i){return[0>i?i+t:i]}),even:p(function(e,t){for(var i=0;t>i;i+=2)e.push(i);return e}),odd:p(function(e,t){for(var i=1;t>i;i+=2)e.push(i);return e}),lt:p(function(e,t,i){for(var a=0>i?i+t:i;--a>=0;)e.push(a);return e}),gt:p(function(e,t,i){for(var a=0>i?i+t:i;++a<t;)e.push(a);return e})}};for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[b]=r(b);for(b in{submit:!0,reset:!0})x.pseudos[b]=c(b);j=l.compile=function(e,t){var i,a=[],n=[],o=X[e+" "];if(!o){for(t||(t=d(e)),i=t.length;i--;)o=y(t[i]),o[F]?a.push(o):n.push(o);o=X(e,g(n,a))}return o},x.pseudos.nth=x.pseudos.eq,x.filters=k.prototype=x.pseudos,x.setFilters=new k,$(),l.attr=re.attr,re.find=l,re.expr=l.selectors,re.expr[":"]=re.expr.pseudos,re.unique=l.uniqueSort,re.text=l.getText,re.isXMLDoc=l.isXML,re.contains=l.contains}(e);var Be=/Until$/,ze=/^(?:parents|prev(?:Until|All))/,Pe=/^.[^:#\[\.,]*$/,We=re.expr.match.needsContext,Ue={children:!0,contents:!0,next:!0,prev:!0};re.fn.extend({find:function(e){var t,i,a,n=this.length;if("string"!=typeof e)return a=this,this.pushStack(re(e).filter(function(){for(t=0;n>t;t++)if(re.contains(a[t],this))return!0}));for(i=[],t=0;n>t;t++)re.find(e,this[t],i);return i=this.pushStack(n>1?re.unique(i):i),i.selector=(this.selector?this.selector+" ":"")+e,i},has:function(e){var t,i=re(e,this),a=i.length;return this.filter(function(){for(t=0;a>t;t++)if(re.contains(this,i[t]))return!0})},not:function(e){return this.pushStack(d(this,e,!1))},filter:function(e){return this.pushStack(d(this,e,!0))},is:function(e){return!!e&&("string"==typeof e?We.test(e)?re(e,this.context).index(this[0])>=0:re.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){for(var i,a=0,n=this.length,o=[],l=We.test(e)||"string"!=typeof e?re(e,t||this.context):0;n>a;a++)for(i=this[a];i&&i.ownerDocument&&i!==t&&11!==i.nodeType;){if(l?l.index(i)>-1:re.find.matchesSelector(i,e)){o.push(i);break}i=i.parentNode}return this.pushStack(o.length>1?re.unique(o):o)},index:function(e){return e?"string"==typeof e?re.inArray(this[0],re(e)):re.inArray(e.jQuery1?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var i="string"==typeof e?re(e,t):re.makeArray(e&&e.nodeType?[e]:e),a=re.merge(this.get(),i);return this.pushStack(re.unique(a))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),re.fn.andSelf=re.fn.addBack,re.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return re.dir(e,"parentNode")},parentsUntil:function(e,t,i){return re.dir(e,"parentNode",i)},next:function(e){return p(e,"nextSibling")},prev:function(e){return p(e,"previousSibling")},nextAll:function(e){return re.dir(e,"nextSibling")},prevAll:function(e){return re.dir(e,"previousSibling")},nextUntil:function(e,t,i){return re.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return re.dir(e,"previousSibling",i)},siblings:function(e){return re.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return re.sibling(e.firstChild)},contents:function(e){return re.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:re.merge([],e.childNodes)}},function(e,t){re.fn[e]=function(i,a){var n=re.map(this,t,i);return Be.test(e)||(a=i),a&&"string"==typeof a&&(n=re.filter(a,n)),n=this.length>1&&!Ue[e]?re.unique(n):n,this.length>1&&ze.test(e)&&(n=n.reverse()),this.pushStack(n)}}),re.extend({filter:function(e,t,i){return i&&(e=":not("+e+")"),1===t.length?re.find.matchesSelector(t[0],e)?[t[0]]:[]:re.find.matches(e,t)},dir:function(e,i,a){for(var n=[],o=e[i];o&&9!==o.nodeType&&(a===t||1!==o.nodeType||!re(o).is(a));)1===o.nodeType&&n.push(o),o=o[i];return n},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}});var Xe="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Je=/ jQuery1\d+="(?:null|\d+)"/g,Ve=new RegExp("<(?:"+Xe+")[\\s/>]","i"),Ye=/^\s+/,Qe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ge=/<([\w:]+)/,Ze=/<tbody/i,Ke=/<|&#?\w+;/,et=/<(?:script|style|link)/i,tt=/^(?:checkbox|radio)$/i,it=/checked\s*(?:[^=]|=\s*.checked.)/i,at=/^$|\/(?:java|ecma)script/i,nt=/^true\/(.*)/,ot=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,lt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:re.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},st=u(V),rt=st.appendChild(V.createElement("div"));lt.optgroup=lt.option,lt.tbody=lt.tfoot=lt.colgroup=lt.caption=lt.thead,lt.th=lt.td,re.fn.extend({text:function(e){return re.access(this,function(e){return e===t?re.text(this):this.empty().append((this[0]&&this[0].ownerDocument||V).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(re.isFunction(e))return this.each(function(t){re(this).wrapAll(e.call(this,t))});if(this[0]){var t=re(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return re.isFunction(e)?this.each(function(t){re(this).wrapInner(e.call(this,t))}):this.each(function(){var t=re(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=re.isFunction(e);return this.each(function(i){re(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){re.nodeName(this,"body")||re(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||this.insertBefore(e,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var i,a=0;null!=(i=this[a]);a++)(!e||re.filter(e,[i]).length>0)&&(t||1!==i.nodeType||re.cleanData(v(i)),i.parentNode&&(t&&re.contains(i.ownerDocument,i)&&m(v(i,"script")),i.parentNode.removeChild(i)));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&re.cleanData(v(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&re.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return re.clone(this,e,t)})},html:function(e){return re.access(this,function(e){var i=this[0]||{},a=0,n=this.length;if(e===t)return 1===i.nodeType?i.innerHTML.replace(Je,""):t;if("string"==typeof e&&!et.test(e)&&(re.support.htmlSerialize||!Ve.test(e))&&(re.support.leadingWhitespace||!Ye.test(e))&&!lt[(Ge.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Qe,"<$1></$2>");try{for(;n>a;a++)i=this[a]||{},1===i.nodeType&&(re.cleanData(v(i,!1)),i.innerHTML=e);i=0}catch(o){}}i&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){var t=re.isFunction(e);return t||"string"==typeof e||(e=re(e).not(this).detach()),this.domManip([e],!0,function(e){var t=this.nextSibling,i=this.parentNode;i&&(re(this).remove(),i.insertBefore(e,t))})},detach:function(e){return this.remove(e,!0)},domManip:function(e,i,a){e=te.apply([],e);var n,o,l,s,r,c,p=0,d=this.length,u=this,m=d-1,y=e[0],g=re.isFunction(y);if(g||!(1>=d||"string"!=typeof y||re.support.checkClone)&&it.test(y))return this.each(function(n){var o=u.eq(n);g&&(e[0]=y.call(this,n,i?o.html():t)),o.domManip(e,i,a)});if(d&&(c=re.buildFragment(e,this[0].ownerDocument,!1,this),n=c.firstChild,1===c.childNodes.length&&(c=n),n)){for(i=i&&re.nodeName(n,"tr"),s=re.map(v(c,"script"),f),l=s.length;d>p;p++)o=c,p!==m&&(o=re.clone(o,!0,!0),l&&re.merge(s,v(o,"script"))),a.call(i&&re.nodeName(this[p],"table")?_(this[p],"tbody"):this[p],o,p);if(l)for(r=s[s.length-1].ownerDocument,re.map(s,h),p=0;l>p;p++)o=s[p],at.test(o.type||"")&&!re._data(o,"globalEval")&&re.contains(r,o)&&(o.src?re.ajax({url:o.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):re.globalEval((o.text||o.textContent||o.innerHTML||"").replace(ot,"")));c=n=null}return this}}),re.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){re.fn[e]=function(e){for(var i,a=0,n=[],o=re(e),l=o.length-1;l>=a;a++)i=a===l?this:this.clone(!0),re(o[a])[t](i),ie.apply(n,i.get());return this.pushStack(n)}}),re.extend({clone:function(e,t,i){var a,n,o,l,s,r=re.contains(e.ownerDocument,e);if(re.support.html5Clone||re.isXMLDoc(e)||!Ve.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(rt.innerHTML=e.outerHTML,rt.removeChild(o=rt.firstChild)),!(re.support.noCloneEvent&&re.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||re.isXMLDoc(e)))for(a=v(o),s=v(e),l=0;null!=(n=s[l]);++l)a[l]&&g(n,a[l]);if(t)if(i)for(s=s||v(e),a=a||v(o),l=0;null!=(n=s[l]);l++)y(n,a[l]);else y(e,o);return a=v(o,"script"),a.length>0&&m(a,!r&&v(e,"script")),a=s=n=null,o},buildFragment:function(e,t,i,a){for(var n,o,l,s,r,c,p,d=e.length,_=u(t),f=[],h=0;d>h;h++)if(o=e[h],o||0===o)if("object"===re.type(o))re.merge(f,o.nodeType?[o]:o);else if(Ke.test(o)){for(s=s||_.appendChild(t.createElement("div")),r=(Ge.exec(o)||["",""])[1].toLowerCase(),p=lt[r]||lt._default,s.innerHTML=p[1]+o.replace(Qe,"<$1></$2>")+p[2],n=p[0];n--;)s=s.lastChild;if(!re.support.leadingWhitespace&&Ye.test(o)&&f.push(t.createTextNode(Ye.exec(o)[0])),!re.support.tbody)for(o="table"!==r||Ze.test(o)?"<table>"!==p[1]||Ze.test(o)?0:s:s.firstChild,n=o&&o.childNodes.length;n--;)re.nodeName(c=o.childNodes[n],"tbody")&&!c.childNodes.length&&o.removeChild(c);for(re.merge(f,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=_.lastChild}else f.push(t.createTextNode(o));for(s&&_.removeChild(s),re.support.appendChecked||re.grep(v(f,"input"),w),h=0;o=f[h++];)if((!a||-1===re.inArray(o,a))&&(l=re.contains(o.ownerDocument,o),s=v(_.appendChild(o),"script"),l&&m(s),i))for(n=0;o=s[n++];)at.test(o.type||"")&&i.push(o);return s=null,_},cleanData:function(e,t){for(var i,a,n,o,l=0,s=re.expando,r=re.cache,c=re.support.deleteExpando,p=re.event.special;null!=(i=e[l]);l++)if((t||re.acceptData(i))&&(n=i[s],o=n&&r[n])){if(o.events)for(a in o.events)p[a]?re.event.remove(i,a):re.removeEvent(i,a,o.handle);r[n]&&(delete r[n],c?delete i[s]:typeof i.removeAttribute!==J?i.removeAttribute(s):i[s]=null,K.push(n))}}});var ct,pt,dt,ut=/alpha\([^)]*\)/i,_t=/opacity\s*=\s*([^)]*)/,ft=/^(top|right|bottom|left)$/,ht=/^(none|table(?!-c[ea]).+)/,mt=/^margin/,yt=new RegExp("^("+ce+")(.*)$","i"),gt=new RegExp("^("+ce+")(?!px)[a-z%]+$","i"),vt=new RegExp("^([+-])=("+ce+")","i"),wt={BODY:"block"},kt={position:"absolute",visibility:"hidden",display:"block"},bt={letterSpacing:0,fontWeight:400},Ct=["Top","Right","Bottom","Left"],xt=["Webkit","O","Moz","ms"];re.fn.extend({css:function(e,i){return re.access(this,function(e,i,a){var n,o,l={},s=0;if(re.isArray(i)){for(o=pt(e),n=i.length;n>s;s++)l[i[s]]=re.css(e,i[s],!1,o);return l}return a!==t?re.style(e,i,a):re.css(e,i)},e,i,arguments.length>1)},show:function(){return C(this,!0)},hide:function(){return C(this)},toggle:function(e){var t="boolean"==typeof e;return this.each(function(){(t?e:b(this))?re(this).show():re(this).hide()})}}),re.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=dt(e,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":re.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,i,a,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,l,s,r=re.camelCase(i),c=e.style;if(i=re.cssProps[r]||(re.cssProps[r]=k(c,r)),s=re.cssHooks[i]||re.cssHooks[r],a===t)return s&&"get"in s&&(o=s.get(e,!1,n))!==t?o:c[i];if(l=typeof a,"string"===l&&(o=vt.exec(a))&&(a=(o[1]+1)*o[2]+parseFloat(re.css(e,i)),l="number"),!(null==a||"number"===l&&isNaN(a)||("number"!==l||re.cssNumber[r]||(a+="px"),re.support.clearCloneStyle||""!==a||0!==i.indexOf("background")||(c[i]="inherit"),s&&"set"in s&&(a=s.set(e,a,n))===t)))try{c[i]=a}catch(p){}}},css:function(e,i,a,n){var o,l,s,r=re.camelCase(i);return i=re.cssProps[r]||(re.cssProps[r]=k(e.style,r)),s=re.cssHooks[i]||re.cssHooks[r],s&&"get"in s&&(l=s.get(e,!0,a)),l===t&&(l=dt(e,i,n)),"normal"===l&&i in bt&&(l=bt[i]),""===a||a?(o=parseFloat(l),a===!0||re.isNumeric(o)?o||0:l):l},swap:function(e,t,i,a){var n,o,l={};for(o in t)l[o]=e.style[o],e.style[o]=t[o];n=i.apply(e,a||[]);for(o in t)e.style[o]=l[o];return n}}),e.getComputedStyle?(pt=function(t){return e.getComputedStyle(t,null)},dt=function(e,i,a){var n,o,l,s=a||pt(e),r=s?s.getPropertyValue(i)||s[i]:t,c=e.style;return s&&(""!==r||re.contains(e.ownerDocument,e)||(r=re.style(e,i)),gt.test(r)&&mt.test(i)&&(n=c.width,o=c.minWidth,l=c.maxWidth,c.minWidth=c.maxWidth=c.width=r,r=s.width,c.width=n,c.minWidth=o,c.maxWidth=l)),r}):V.documentElement.currentStyle&&(pt=function(e){return e.currentStyle},dt=function(e,i,a){var n,o,l,s=a||pt(e),r=s?s[i]:t,c=e.style;return null==r&&c&&c[i]&&(r=c[i]),gt.test(r)&&!ft.test(i)&&(n=c.left,o=e.runtimeStyle,l=o&&o.left,l&&(o.left=e.currentStyle.left),c.left="fontSize"===i?"1em":r,r=c.pixelLeft+"px",c.left=n,l&&(o.left=l)),""===r?"auto":r}),re.each(["height","width"],function(e,t){re.cssHooks[t]={get:function(e,i,a){return i?0===e.offsetWidth&&ht.test(re.css(e,"display"))?re.swap(e,kt,function(){return S(e,t,a)}):S(e,t,a):void 0},set:function(e,i,a){var n=a&&pt(e);return x(e,i,a?T(e,t,a,re.support.boxSizing&&"border-box"===re.css(e,"boxSizing",!1,n),n):0)}}}),re.support.opacity||(re.cssHooks.opacity={get:function(e,t){return _t.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var i=e.style,a=e.currentStyle,n=re.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=a&&a.filter||i.filter||"";i.zoom=1,(t>=1||""===t)&&""===re.trim(o.replace(ut,""))&&i.removeAttribute&&(i.removeAttribute("filter"),""===t||a&&!a.filter)||(i.filter=ut.test(o)?o.replace(ut,n):o+" "+n)}}),re(function(){re.support.reliableMarginRight||(re.cssHooks.marginRight={get:function(e,t){return t?re.swap(e,{display:"inline-block"},dt,[e,"marginRight"]):void 0}}),!re.support.pixelPosition&&re.fn.position&&re.each(["top","left"],function(e,t){re.cssHooks[t]={get:function(e,i){return i?(i=dt(e,t),gt.test(i)?re(e).position()[t]+"px":i):void 0}}})}),re.expr&&re.expr.filters&&(re.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!re.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||re.css(e,"display"))},re.expr.filters.visible=function(e){return!re.expr.filters.hidden(e)}),re.each({margin:"",padding:"",border:"Width"},function(e,t){re.cssHooks[e+t]={expand:function(i){for(var a=0,n={},o="string"==typeof i?i.split(" "):[i];4>a;a++)n[e+Ct[a]+t]=o[a]||o[a-2]||o[0];return n}},mt.test(e)||(re.cssHooks[e+t].set=x)});var Tt=/%20/g,St=/\[\]$/,jt=/\r?\n/g,Et=/^(?:submit|button|image|reset|file)$/i,It=/^(?:input|select|textarea|keygen)/i;re.fn.extend({serialize:function(){return re.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=re.prop(this,"elements");return e?re.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!re(this).is(":disabled")&&It.test(this.nodeName)&&!Et.test(e)&&(this.checked||!tt.test(e))}).map(function(e,t){var i=re(this).val();return null==i?null:re.isArray(i)?re.map(i,function(e){return{name:t.name,value:e.replace(jt,"\r\n")}}):{name:t.name,value:i.replace(jt,"\r\n")}}).get()}}),re.param=function(e,i){var a,n=[],o=function(e,t){t=re.isFunction(t)?t():null==t?"":t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(i===t&&(i=re.ajaxSettings&&re.ajaxSettings.traditional),re.isArray(e)||e.jQuery1&&!re.isPlainObject(e))re.each(e,function(){o(this.name,this.value)});else for(a in e)I(a,e[a],i,o);return n.join("&").replace(Tt,"+")},re.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){re.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),re.fn.hover=function(e,t){return this.mouseenter(e).mouseleave(t||e)};var $t,Dt,Nt=re.now(),Lt=/\?/,Mt=/#.*$/,At=/([?&])_=[^&]*/,Rt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Ot=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ht=/^(?:GET|HEAD)$/,Ft=/^\/\//,qt=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Bt=re.fn.load,zt={},Pt={},Wt="*/".concat("*");try{Dt=Y.href}catch(Ut){Dt=V.createElement("a"),Dt.href="",Dt=Dt.href}$t=qt.exec(Dt.toLowerCase())||[],re.fn.load=function(e,i,a){if("string"!=typeof e&&Bt)return Bt.apply(this,arguments);var n,o,l,s=this,r=e.indexOf(" ");return r>=0&&(n=e.slice(r,e.length),e=e.slice(0,r)),re.isFunction(i)?(a=i,i=t):i&&"object"==typeof i&&(l="POST"),s.length>0&&re.ajax({url:e,type:l,dataType:"html",data:i}).done(function(e){o=arguments,s.html(n?re("<div>").append(re.parseHTML(e)).find(n):e)}).complete(a&&function(e,t){s.each(a,o||[e.responseText,t,e])}),this},re.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){re.fn[t]=function(e){return this.on(t,e)}}),re.each(["get","post"],function(e,i){re[i]=function(e,a,n,o){return re.isFunction(a)&&(o=o||n,n=a,a=t),re.ajax({url:e,type:i,dataType:o,data:a,success:n})}}),re.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Dt,type:"GET",isLocal:Ot.test($t[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Wt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":re.parseJSON,"text xml":re.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?N(N(e,re.ajaxSettings),t):N(re.ajaxSettings,e)},ajaxPrefilter:$(zt),ajaxTransport:$(Pt),ajax:function(e,i){function a(e,i,a,n){var o,d,g,v,k,C=i;2!==w&&(w=2,r&&clearTimeout(r),p=t,s=n||"",b.readyState=e>0?4:0,a&&(v=L(u,b,a)),e>=200&&300>e||304===e?(u.ifModified&&(k=b.getResponseHeader("Last-Modified"),k&&(re.lastModified[l]=k),k=b.getResponseHeader("etag"),k&&(re.etag[l]=k)),204===e?(o=!0,C="nocontent"):304===e?(o=!0,C="notmodified"):(o=M(u,v),C=o.state,d=o.data,g=o.error,o=!g)):(g=C,!e&&C||(C="error",0>e&&(e=0))),b.status=e,b.statusText=(i||C)+"",o?h.resolveWith(_,[d,C,b]):h.rejectWith(_,[b,C,g]),b.statusCode(y),y=t,c&&f.trigger(o?"ajaxSuccess":"ajaxError",[b,u,o?d:g]),m.fireWith(_,[b,C]),c&&(f.trigger("ajaxComplete",[b,u]),--re.active||re.event.trigger("ajaxStop")))}"object"==typeof e&&(i=e,e=t),i=i||{};var n,o,l,s,r,c,p,d,u=re.ajaxSetup({},i),_=u.context||u,f=u.context&&(_.nodeType||_.jQuery1)?re(_):re.event,h=re.Deferred(),m=re.Callbacks("once memory"),y=u.statusCode||{},g={},v={},w=0,k="canceled",b={readyState:0,getResponseHeader:function(e){var t;if(2===w){if(!d)for(d={};t=Rt.exec(s);)d[t[1].toLowerCase()]=t[2];t=d[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===w?s:null},setRequestHeader:function(e,t){var i=e.toLowerCase();return w||(e=v[i]=v[i]||e,g[e]=t),this},overrideMimeType:function(e){return w||(u.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>w)for(t in e)y[t]=[y[t],e[t]];else b.always(e[b.status]);return this},abort:function(e){var t=e||k;return p&&p.abort(t),a(0,t),this}};if(h.promise(b).complete=m.add,b.success=b.done,b.error=b.fail,u.url=((e||u.url||Dt)+"").replace(Mt,"").replace(Ft,$t[1]+"//"),u.type=i.method||i.type||u.method||u.type,u.dataTypes=re.trim(u.dataType||"*").toLowerCase().match(pe)||[""],null==u.crossDomain&&(n=qt.exec(u.url.toLowerCase()),u.crossDomain=!(!n||n[1]===$t[1]&&n[2]===$t[2]&&(n[3]||("http:"===n[1]?80:443))==($t[3]||("http:"===$t[1]?80:443)))),u.data&&u.processData&&"string"!=typeof u.data&&(u.data=re.param(u.data,u.traditional)),D(zt,u,i,b),2===w)return b;c=u.global,c&&0===re.active++&&re.event.trigger("ajaxStart"),u.type=u.type.toUpperCase(),u.hasContent=!Ht.test(u.type),l=u.url,u.hasContent||(u.data&&(l=u.url+=(Lt.test(l)?"&":"?")+u.data,delete u.data),u.cache===!1&&(u.url=At.test(l)?l.replace(At,"$1_="+Nt++):l+(Lt.test(l)?"&":"?")+"_="+Nt++)),u.ifModified&&(re.lastModified[l]&&b.setRequestHeader("If-Modified-Since",re.lastModified[l]),re.etag[l]&&b.setRequestHeader("If-None-Match",re.etag[l])),(u.data&&u.hasContent&&u.contentType!==!1||i.contentType)&&b.setRequestHeader("Content-Type",u.contentType),b.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+("*"!==u.dataTypes[0]?", "+Wt+"; q=0.01":""):u.accepts["*"]);for(o in u.headers)b.setRequestHeader(o,u.headers[o]);
if(u.beforeSend&&(u.beforeSend.call(_,b,u)===!1||2===w))return b.abort();k="abort";for(o in{success:1,error:1,complete:1})b[o](u[o]);if(p=D(Pt,u,i,b)){b.readyState=1,c&&f.trigger("ajaxSend",[b,u]),u.async&&u.timeout>0&&(r=setTimeout(function(){b.abort("timeout")},u.timeout));try{w=1,p.send(g,a)}catch(C){if(!(2>w))throw C;a(-1,C)}}else a(-1,"No Transport");return b},getScript:function(e,i){return re.get(e,t,i,"script")},getJSON:function(e,t,i){return re.get(e,t,i,"json")}}),re.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return re.globalEval(e),e}}}),re.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),re.ajaxTransport("script",function(e){if(e.crossDomain){var i,a=V.head||re("head")[0]||V.documentElement;return{send:function(t,n){i=V.createElement("script"),i.async=!0,e.scriptCharset&&(i.charset=e.scriptCharset),i.src=e.url,i.onload=i.onreadystatechange=function(e,t){(t||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),i=null,t||n(200,"success"))},a.insertBefore(i,a.firstChild)},abort:function(){i&&i.onload(t,!0)}}}});var Xt=[],Jt=/(=)\?(?=&|$)|\?\?/;re.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Xt.pop()||re.expando+"_"+Nt++;return this[e]=!0,e}}),re.ajaxPrefilter("json jsonp",function(i,a,n){var o,l,s,r=i.jsonp!==!1&&(Jt.test(i.url)?"url":"string"==typeof i.data&&!(i.contentType||"").indexOf("application/x-www-form-urlencoded")&&Jt.test(i.data)&&"data");return r||"jsonp"===i.dataTypes[0]?(o=i.jsonpCallback=re.isFunction(i.jsonpCallback)?i.jsonpCallback():i.jsonpCallback,r?i[r]=i[r].replace(Jt,"$1"+o):i.jsonp!==!1&&(i.url+=(Lt.test(i.url)?"&":"?")+i.jsonp+"="+o),i.converters["script json"]=function(){return s||re.error(o+" was not called"),s[0]},i.dataTypes[0]="json",l=e[o],e[o]=function(){s=arguments},n.always(function(){e[o]=l,i[o]&&(i.jsonpCallback=a.jsonpCallback,Xt.push(o)),s&&re.isFunction(l)&&l(s[0]),s=l=t}),"script"):void 0});var Vt,Yt,Qt=0,Gt=e.ActiveXObject&&function(){var e;for(e in Vt)Vt[e](t,!0)};re.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&A()||R()}:A,Yt=re.ajaxSettings.xhr(),re.support.cors=!!Yt&&"withCredentials"in Yt,Yt=re.support.ajax=!!Yt,Yt&&re.ajaxTransport(function(i){if(!i.crossDomain||re.support.cors){var a;return{send:function(n,o){var l,s,r=i.xhr();if(i.username?r.open(i.type,i.url,i.async,i.username,i.password):r.open(i.type,i.url,i.async),i.xhrFields)for(s in i.xhrFields)r[s]=i.xhrFields[s];i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");try{for(s in n)r.setRequestHeader(s,n[s])}catch(c){}r.send(i.hasContent&&i.data||null),a=function(e,n){var s,c,p,d;try{if(a&&(n||4===r.readyState))if(a=t,l&&(r.onreadystatechange=re.noop,Gt&&delete Vt[l]),n)4!==r.readyState&&r.abort();else{d={},s=r.status,c=r.getAllResponseHeaders(),"string"==typeof r.responseText&&(d.text=r.responseText);try{p=r.statusText}catch(u){p=""}s||!i.isLocal||i.crossDomain?1223===s&&(s=204):s=d.text?200:404}}catch(_){n||o(-1,_)}d&&o(s,p,d,c)},i.async?4===r.readyState?setTimeout(a):(l=++Qt,Gt&&(Vt||(Vt={},re(e).unload(Gt)),Vt[l]=a),r.onreadystatechange=a):a()},abort:function(){a&&a(t,!0)}}}});var Zt,Kt,ei=/^(?:toggle|show|hide)$/,ti=new RegExp("^(?:([+-])=|)("+ce+")([a-z%]*)$","i"),ii=/queueHooks$/,ai=[B],ni={"*":[function(e,t){var i,a,n=this.createTween(e,t),o=ti.exec(t),l=n.cur(),s=+l||0,r=1,c=20;if(o){if(i=+o[2],a=o[3]||(re.cssNumber[e]?"":"px"),"px"!==a&&s){s=re.css(n.elem,e,!0)||i||1;do r=r||".5",s/=r,re.style(n.elem,e,s+a);while(r!==(r=n.cur()/l)&&1!==r&&--c)}n.unit=a,n.start=s,n.end=o[1]?s+(o[1]+1)*i:i}return n}]};re.Animation=re.extend(F,{tweener:function(e,t){re.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var i,a=0,n=e.length;n>a;a++)i=e[a],ni[i]=ni[i]||[],ni[i].unshift(t)},prefilter:function(e,t){t?ai.unshift(e):ai.push(e)}}),re.Tween=z,z.prototype={constructor:z,init:function(e,t,i,a,n,o){this.elem=e,this.prop=i,this.easing=n||"swing",this.options=t,this.start=this.now=this.cur(),this.end=a,this.unit=o||(re.cssNumber[i]?"":"px")},cur:function(){var e=z.propHooks[this.prop];return e&&e.get?e.get(this):z.propHooks._default.get(this)},run:function(e){var t,i=z.propHooks[this.prop];return this.options.duration?this.pos=t=re.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):z.propHooks._default.set(this),this}},z.prototype.init.prototype=z.prototype,z.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=re.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){re.fx.step[e.prop]?re.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[re.cssProps[e.prop]]||re.cssHooks[e.prop])?re.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},z.propHooks.scrollTop=z.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},re.each(["toggle","show","hide"],function(e,t){var i=re.fn[t];re.fn[t]=function(e,a,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(P(t,!0),e,a,n)}}),re.fn.extend({fadeTo:function(e,t,i,a){return this.filter(b).css("opacity",0).show().end().animate({opacity:t},e,i,a)},animate:function(e,t,i,a){var n=re.isEmptyObject(e),o=re.speed(t,i,a),l=function(){var t=F(this,re.extend({},e),o);l.finish=function(){t.stop(!0)},(n||re._data(this,"finish"))&&t.stop(!0)};return l.finish=l,n||o.queue===!1?this.each(l):this.queue(o.queue,l)},stop:function(e,i,a){var n=function(e){var t=e.stop;delete e.stop,t(a)};return"string"!=typeof e&&(a=i,i=e,e=t),i&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=re.timers,l=re._data(this);if(i)l[i]&&l[i].stop&&n(l[i]);else for(i in l)l[i]&&l[i].stop&&ii.test(i)&&n(l[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(a),t=!1,o.splice(i,1));!t&&a||re.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,i=re._data(this),a=i[e+"queue"],n=i[e+"queueHooks"],o=re.timers,l=a?a.length:0;for(i.finish=!0,re.queue(this,e,[]),n&&n.cur&&n.cur.finish&&n.cur.finish.call(this),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;l>t;t++)a[t]&&a[t].finish&&a[t].finish.call(this);delete i.finish})}}),re.each({slideDown:P("show"),slideUp:P("hide"),slideToggle:P("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){re.fn[e]=function(e,i,a){return this.animate(t,e,i,a)}}),re.speed=function(e,t,i){var a=e&&"object"==typeof e?re.extend({},e):{complete:i||!i&&t||re.isFunction(e)&&e,duration:e,easing:i&&t||t&&!re.isFunction(t)&&t};return a.duration=re.fx.off?0:"number"==typeof a.duration?a.duration:a.duration in re.fx.speeds?re.fx.speeds[a.duration]:re.fx.speeds._default,null!=a.queue&&a.queue!==!0||(a.queue="fx"),a.old=a.complete,a.complete=function(){re.isFunction(a.old)&&a.old.call(this),a.queue&&re.dequeue(this,a.queue)},a},re.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},re.timers=[],re.fx=z.prototype.init,re.fx.tick=function(){var e,i=re.timers,a=0;for(Zt=re.now();a<i.length;a++)e=i[a],e()||i[a]!==e||i.splice(a--,1);i.length||re.fx.stop(),Zt=t},re.fx.timer=function(e){e()&&re.timers.push(e)&&re.fx.start()},re.fx.interval=13,re.fx.start=function(){Kt||(Kt=setInterval(re.fx.tick,re.fx.interval))},re.fx.stop=function(){clearInterval(Kt),Kt=null},re.fx.speeds={slow:600,fast:200,_default:400},re.fx.step={},re.expr&&re.expr.filters&&(re.expr.filters.animated=function(e){return re.grep(re.timers,function(t){return e===t.elem}).length}),re.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){re.offset.setOffset(this,e,t)});var i,a,n={top:0,left:0},o=this[0],l=o&&o.ownerDocument;if(l)return i=l.documentElement,re.contains(i,o)?(typeof o.getBoundingClientRect!==J&&(n=o.getBoundingClientRect()),a=W(l),{top:n.top+(a.pageYOffset||i.scrollTop)-(i.clientTop||0),left:n.left+(a.pageXOffset||i.scrollLeft)-(i.clientLeft||0)}):n},re.offset={setOffset:function(e,t,i){var a=re.css(e,"position");"static"===a&&(e.style.position="relative");var n,o,l=re(e),s=l.offset(),r=re.css(e,"top"),c=re.css(e,"left"),p=("absolute"===a||"fixed"===a)&&re.inArray("auto",[r,c])>-1,d={},u={};p?(u=l.position(),n=u.top,o=u.left):(n=parseFloat(r)||0,o=parseFloat(c)||0),re.isFunction(t)&&(t=t.call(e,i,s)),null!=t.top&&(d.top=t.top-s.top+n),null!=t.left&&(d.left=t.left-s.left+o),"using"in t?t.using.call(e,d):l.css(d)}},re.fn.extend({position:function(){if(this[0]){var e,t,i={top:0,left:0},a=this[0];return"fixed"===re.css(a,"position")?t=a.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),re.nodeName(e[0],"html")||(i=e.offset()),i.top+=re.css(e[0],"borderTopWidth",!0),i.left+=re.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-re.css(a,"marginTop",!0),left:t.left-i.left-re.css(a,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||V.documentElement;e&&!re.nodeName(e,"html")&&"static"===re.css(e,"position");)e=e.offsetParent;return e||V.documentElement})}}),re.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,i){var a=/Y/.test(i);re.fn[e]=function(n){return re.access(this,function(e,n,o){var l=W(e);return o===t?l?i in l?l[i]:l.document.documentElement[n]:e[n]:void(l?l.scrollTo(a?re(l).scrollLeft():o,a?o:re(l).scrollTop()):e[n]=o)},e,n,arguments.length,null)}}),re.each({Height:"height",Width:"width"},function(e,i){re.each({padding:"inner"+e,content:i,"":"outer"+e},function(a,n){re.fn[n]=function(n,o){var l=arguments.length&&(a||"boolean"!=typeof n),s=a||(n===!0||o===!0?"margin":"border");return re.access(this,function(i,a,n){var o;return re.isWindow(i)?i.document.documentElement["client"+e]:9===i.nodeType?(o=i.documentElement,Math.max(i.body["scroll"+e],o["scroll"+e],i.body["offset"+e],o["offset"+e],o["client"+e])):n===t?re.css(i,a,s):re.style(i,a,n,s)},i,l?n:t,l,null)}})}),e.jQuery1=e.$=re,"function"==typeof define&&define.amd&&define.amd.jQuery1&&define("jQuery1",[],function(){return re})}(window),$jcallpy=jQuery1.noConflict(),kunnka.CCookie=function(){this.module_name="Cookie ",this.module_log_rang=100;this.caustic=function(e,t,i,a,n,o){document.cookie=e+"="+escape(t)+(i?"; expires="+i:"")+(a?"; path="+a:"")+(n?"; domain="+n:"")+(o?"; secure":"")},this.epicenter=function(e){var t=" "+document.cookie,i=" "+e+"=",a=null,n=0,o=0;return t.length>0&&(n=t.indexOf(i),-1!=n&&(n+=i.length,o=t.indexOf(";",n),-1==o&&(o=t.length),a=unescape(t.substring(n,o)))),a},this.sprint=function(e){document.cookie=e+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;"}},kunnka.dragonknight=function(){this.module_name="Loader ",this.module_log_rang=100;var e=this;this.doom=function(){var t;if(1!=iowisp.invoker.type)if(2!=iowisp.invoker.type){if(5==iowisp.invoker.type)return void $jcallpy.ajax({type:"POST",url:("http:"==location.protocol?kunnka.bloodseeker.replace("https","http"):kunnka.bloodseeker)+"admn/",data:{action:"get_chat_client_data",site_id:window.global_site_id},success:function(e){e=JSON.parse(e),iowisp.invoker.site=e.site_info.domain,iowisp.invoker.site_info=e.site_info,iowisp.invoker.key=0,iowisp.invoker.channel="",iowisp.invoker.peer_key=e.manager.id,iowisp.invoker.peer_type=2,iowisp.invoker.site_id=e.site_info.id,iowisp.invoker.department_id=e.department_id,iowisp.invoker.clientInfo={userData:null,formData:null},iowisp.earthshaker={},iowisp.earthshaker[e.manager.id]=e.manager,iowisp.earthshaker[e.manager.id].key=e.manager.id,iowisp.lycan=kunnka.registerModule("kunnka.chaosknight"),iowisp.wisp=kunnka.registerModule("kunnka.timbersaw"),iowisp.m_chat=kunnka.registerModule("kunnka.CChat"),1==global_widgetUpdated&&localStorage.removeItem("tiny"),$jcallpy.callpy_init("_init")}})}else t=iowisp.nightstalker.format_data(iowisp.tidehunter.antimage("get_scripts_mng",{0:"multi",1:iowisp.invoker.browser[0],2:iowisp.invoker.type,3:window.mozRTCPeerConnection||window.webkitRTCPeerConnection?1:0}));else{var i,a,n,o;iowisp.axe.epicenter("callpy_key")&&"NaN"!=iowisp.axe.epicenter("callpy_key")&&"0"!=iowisp.axe.epicenter("callpy_key")&&"null"!=iowisp.axe.epicenter("callpy_key")&&iowisp.axe.epicenter("callpy_chnl")&&"NaN"!=iowisp.axe.epicenter("callpy_chnl")?(i=iowisp.axe.epicenter("callpy_key"),a=iowisp.axe.epicenter("callpy_chnl")):sven&&callpy_storage.iowisp.invoker.key&&"0"!=callpy_storage.iowisp.invoker.key&&"null"!=callpy_storage.iowisp.invoker.key?(iowisp.axe.caustic("callpy_key",callpy_storage.iowisp.invoker.key,"Mon, 01-Jan-2101 00:00:00 GMT","/"),iowisp.axe.caustic("callpy_chnl",callpy_storage.iowisp.invoker.channel,"Mon, 01-Jan-2101 00:00:00 GMT","/"),iowisp.invoker.key=parseInt(callpy_storage.iowisp.invoker.key),iowisp.invoker.channel=callpy_storage.iowisp.invoker.channel,i=iowisp.invoker.key,a=callpy_storage.iowisp.invoker.channel):(sven=!1,i=0,a="",n=Math.floor((new Date).getTime()/1e3),localStorage.setItem("callpy_fEnt",n)),n=localStorage.getItem("callpy_fEnt"),n||(n=Math.floor((new Date).getTime()/1e3),localStorage.setItem("callpy_fEnt",n)),o=localStorage.getItem("callpy_vsts"),o||(o=0),o++,localStorage.setItem("callpy_vsts",o),window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),t=sven?iowisp.nightstalker.format_data(iowisp.tidehunter.antimage("user_data",{0:encodeURIComponent(iowisp.invoker.site),1:navigator.userAgent,2:iowisp.invoker.type,3:i,4:sven?1:0,5:encodeURIComponent(window.location.href),6:document.mozHidden||document.msHidden||document.webkitHidden||document.hidden?1:0,7:window.mozRTCPeerConnection||window.webkitRTCPeerConnection?1:0,8:encodeURIComponent(iowisp.convertPunycode(window.location.origin)),9:$jcallpy(window).width(),10:a,11:document.title})):iowisp.nightstalker.format_data(iowisp.tidehunter.antimage("user_data",{0:encodeURIComponent(iowisp.invoker.site),1:navigator.userAgent,2:iowisp.invoker.type,3:i,4:sven?1:0,5:encodeURIComponent(window.location.href),6:document.mozHidden||document.msHidden||document.webkitHidden||document.hidden?1:0,7:window.mozRTCPeerConnection||window.webkitRTCPeerConnection?1:0,8:encodeURIComponent(iowisp.convertPunycode(window.location.origin)),9:$jcallpy(window).width(),10:a,11:document.title,12:n,13:encodeURIComponent(document.referrer),14:o,15:"callpy.com"!=iowisp.invoker.site?kunnka.language:null}))}1==iowisp.invoker.type||2==iowisp.invoker.type?e.load_script(kunnka.bloodseeker+(1==iowisp.invoker.type?"d":"mngr")+"/?"+t,document.getElementsByTagName("head")[0],iowisp.spiritbreaker):iowisp.spiritbreaker()},this.load_script=function(e,t,i){var a=document.createElement("script");a.type="text/javascript",a.src=e,i&&(a.onload=i),t.appendChild(a)},this.mirana=function(e,t,i){var a=document.createElement("link");a.rel="stylesheet",a.href=e,i&&(a.onload=i),t.appendChild(a)}},kunnka.huskar=function(){this.module_name="Bridge ",this.module_log_rang=100;var e=this;this.flash_object=null,this.init=function(){var e=null;1==iowisp.invoker.type&&(e=function(e){window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),e.origin==window.location.origin&&iowisp.nightstalker.troll(e.data)}),2==iowisp.invoker.type&&(e=function(e){e.origin==iowisp.invoker.origin&&iowisp.nightstalker.crystalmaiden(e.data)}),3==iowisp.invoker.type&&(e=function(e){e.origin==kunnka.bloodseeker.substr(0,kunnka.bloodseeker.length-1).replace("https","http")&&iowisp.nightstalker.puck(e.data)}),4==iowisp.invoker.type&&(e=function(e){window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),e.origin==window.location.origin&&iowisp.nightstalker.emberspirit(e.data)}),e&&(window.addEventListener?window.addEventListener("message",e,!1):window.attachEvent("onmessage",e))},this.storm=function(t){if(iowisp.clockwerk.windranger(e.module_name+"<<<--- Flash",t,e.module_log_rang),t)switch(t.action){case"register_client":iowisp.viper(t);break;case"phrase_added":iowisp.legion.phrase_added(t);break;case"unregister_client":iowisp.bountyhunter(t);break;case"manager_changed":iowisp.shadowfiend(t);break;case"end_call":iowisp.m_chat;break;case"end_dialup":iowisp.m_chat&&iowisp.m_chat.end_dialup_from_peer(t);break;case"necrophos":break;case"enigma":iowisp.m_chat&&(iowisp.wisp&&(iowisp.magnus.access_equip||"2"==localStorage.getItem("sandkung"))||iowisp.magnus.access_equip&&iowisp.legion&&iowisp.legion.selected_user==t.key&&iowisp.invoker.site_id==t.site_id?iowisp.nightstalker.phoenix(iowisp.tidehunter.antimage("end_dialup")):(iowisp.m_chat.call_type=t.webRTC,iowisp.magnus.call_type=t.webRTC?"webrtc":"flash",iowisp.magnus.peer_webRTCtype=t.peerRTCType?t.peerRTCType:"chrome",iowisp.legion?(iowisp.legion.selected_user==t.key&&iowisp.invoker.site_id==t.site_id&&(iowisp.m_chat.lich="incoming"),iowisp.lifestealer[t.site_id][t.key].isActive=2,$jcallpy.general_panel("add",{id:t.key,site_id:t.site_id}),$jcallpy.callpy_notify("drawNotification",{siteId:t.site_id,clientId:t.key,siteUrl:iowisp.invoker.site_info[t.site_id].domain,type:"incoming",title:"№"+t.key+", "+iowisp.lifestealer[t.site_id][t.key].city,text:"Входящий звонок..."})):(localStorage.setItem("sandkung","1"),iowisp.m_chat.lich="incoming",$jcallpy.callpy_status("set","incoming_call_on"))));break;case"call_state":break;case"call_createOffer":break;case"peerDisabledCamera":break;case"callToAudio":break;case"darkseer":iowisp.wisp&&iowisp.wisp.darkseer(t);break;case"update_active_state":iowisp.wisp&&iowisp.wisp.batrider(t);break;case"tab_visibility":iowisp.legion&&iowisp.legion.ancientapparation(t);break;case"go_url":iowisp.fvoid(t);break;case"set_new_user":iowisp.legion&&iowisp.legion.set_new_user(t);break;case"send_message":iowisp.m_chat&&iowisp.m_chat.kotel(t);break;case"automessage":iowisp.legion&&iowisp.legion.got_automessage(t);break;case"set_message_history":iowisp.m_chat&&iowisp.m_chat.feast(t);break;case"get_scroll_cw":if(iowisp.tusk){var i=0;if(1==iowisp.lycan.toss){i="call"!=iowisp.m_chat.lich?iowisp.tusk.skywrath():document.getElementById("callpy_iframeid").contentWindow.iowisp.tusk.skywrath();var a=0;1==iowisp.lycan.toss&&(a=$jcallpy(window).width())}iowisp.nightstalker.phoenix(iowisp.tidehunter.antimage("scroll_cw",{0:i,1:document.cookie,2:iowisp.tusk.getInputs()}))}break;case"scroll":iowisp.tusk&&("1"==iowisp.invoker.type&&("2"!=localStorage.getItem("techies")||1!=iowisp.lycan.toss&&("call"!=iowisp.m_chat.lich&&window.location.href!=t.url||"call"==iowisp.m_chat.lich&&document.getElementById("callpy_iframeid").contentWindow.location.href!=t.url))||("call"!=iowisp.m_chat.lich?iowisp.tusk.scroll(t):e.devourer(t))),iowisp.legion&&iowisp.legion.proxy_screen&&iowisp.legion.selected_user==t.key&&iowisp.invoker.site_id==t.site_id&&(iowisp.invoker.ancientapparation=1,iowisp.legion.frameScrollPosition=t.height,e.shadowdemon(t));break;case"scroll_cw":iowisp.legion.scroll_cw(t);break;case"input_field":case"textarea_field":iowisp.legion&&t.key==iowisp.legion.selected_user&&t.site_id==iowisp.invoker.site_id?"callpy_chat_input_box"!=t.input.id?e.shadowdemon(t):$jcallpy.chat("typing",{text:t.value}):iowisp.wisp&&"2"==localStorage.getItem("techies")&&(iowisp.lycan.toss||"call"!=iowisp.m_chat.lich&&window.location.href==t.url||"call"==iowisp.m_chat.lich&&document.getElementById("callpy_iframeid").contentWindow.location.href==t.url)&&"callpy_chat_input_box"!=t.input.id&&("call"!=iowisp.m_chat.lich?"input_field"==t.action?iowisp.tusk.input_field(t):iowisp.tusk.textarea_field(t):e.devourer(t));break;case"select_field":iowisp.legion&&t.key==iowisp.legion.selected_user&&t.site_id==iowisp.invoker.site_id?e.shadowdemon(t):iowisp.wisp&&"2"==localStorage.getItem("techies")&&(iowisp.lycan.toss||"call"!=iowisp.m_chat.lich&&window.location.href==t.url||"call"==iowisp.m_chat.lich&&document.getElementById("callpy_iframeid").contentWindow.location.href==t.url)&&("call"!=iowisp.m_chat.lich?iowisp.tusk.select_field(t):e.devourer(t));break;case"writing_text":iowisp.wisp&&iowisp.m_chat.managerWriting();break;case"window_resize":iowisp.legion&&t.key==iowisp.legion.selected_user&&t.site_id==iowisp.invoker.site_id&&(t.width=parseInt(t.width),t.height=parseInt(t.height),iowisp.legion.phantom(t));break;case"select_area":iowisp.wisp&&(iowisp.lycan.toss||!iowisp.lycan.toss&&t.url&&(window.location.href==t.url&&"call"!=iowisp.m_chat.lich||"call"==iowisp.m_chat.lich&&t.url==document.getElementById("callpy_iframeid").contentWindow.location.href))&&("call"!=iowisp.m_chat.lich?$jcallpy.callpy_select("create",{client_id:t.key,element_id:t.element_id,cords:{upLeft:{x:parseInt(t.x1),y:parseInt(t.y1)},botRight:{x:parseInt(t.x2),y:parseInt(t.y2)}}}):iowisp.nightstalker.devourer(t));break;case"visual_message":iowisp.wisp&&(iowisp.lycan.toss||!iowisp.lycan.toss&&t.url&&(window.location.href==t.url&&"call"!=iowisp.m_chat.lich||"call"==iowisp.m_chat.lich&&t.url==document.getElementById("callpy_iframeid").contentWindow.location.href))&&("call"!=iowisp.m_chat.lich?$jcallpy.callpy_pointer("create",{client_id:t.key,element_id:t.element_id,circle:{left:t.circle.left,top:t.circle.top},tooltip:{left:t.tooltip.left,top:t.tooltip.top},message:t.message}):iowisp.nightstalker.devourer(t));break;case"unselect_area":localStorage.removeItem("techies"),$jcallpy.callpy_status("set","remote_control_end");break;case"delete_select_area":iowisp.legion&&iowisp.legion.selected_user==t.key&&iowisp.invoker.site_id==t.site_id&&$jcallpy.tools("del_tools",{client_id:t.key,site_id:t.site_id,element_id:t.element_id,type:"select"});break;case"delete_visual_message":iowisp.legion&&iowisp.legion.selected_user==t.key&&iowisp.invoker.site_id==t.site_id&&$jcallpy.tools("del_tools",{client_id:t.key,site_id:t.site_id,element_id:t.element_id,type:"pointer"});break;case"set_elements":iowisp.legion&&iowisp.legion.set_elements(t);break;case"remote_control_request":localStorage.setItem("techies","1"),$jcallpy.callpy_status("set","remote_control_on");break;case"remote_control_request_cancel":localStorage.removeItem("techies"),$jcallpy.callpy_status("set","remote_control_off");break;case"remote_control_answer":iowisp.legion&&iowisp.legion.godstrength(t);break;case"click":iowisp.legion&&iowisp.legion.click(t),iowisp.tusk&&(1==iowisp.lycan.toss||"call"!=iowisp.m_chat.lich&&window.location.href==t.url||"call"==iowisp.m_chat.lich&&document.getElementById("callpy_iframeid").contentWindow.location.href==t.url)&&("1"==iowisp.invoker.type&&"2"!=localStorage.getItem("techies")||("call"!=iowisp.m_chat.lich?iowisp.tusk.click(t):e.devourer(t)));break;case"mouse_position":iowisp.legion&&iowisp.legion.mouse_position(t);break;case"notification":iowisp.legion&&iowisp.legion.gotNotification(t);break;case"drop_session":break;case"force_drop_session":iowisp.legion&&(window.location.href="/manager/logout/");break;case"site_settings_changed":iowisp.m_chat.craggy(t);break;case"manager_name_changed":1==iowisp.invoker.type&&(iowisp.earthshaker[iowisp.invoker.peer_key].name=t.name,iowisp.earthshaker[iowisp.invoker.peer_key].position=t.position,$jcallpy.callpy_consultant("set"));break;case"manager_avatar_changed":1==iowisp.invoker.type&&(iowisp.earthshaker[iowisp.invoker.peer_key].avatar=t.avatar,$jcallpy.callpy_consultant("set"));break;case"icecandidate":break;case"description":break;case"changeCallState":break;case"ping":"request"==t.pingtype?iowisp.magnus.ping_request(t):iowisp.wisp&&"call"!=iowisp.m_chat.lich&&"calling_to_manager"!=iowisp.m_chat.lich||iowisp.magnus.ping_answer();break;case"update_activity":break;case"update_status":iowisp.legion&&iowisp.legion.update_status(t);break;case"disconnect_request":iowisp.wisp&&iowisp.wisp.disconnect_request();break;case"disconnect_answer":iowisp.wisp&&iowisp.wisp.disconnect_answer(t);break;case"dscnt_from_rplx":1==iowisp.invoker.type&&(iowisp.realplexor.acid(iowisp.invoker.site_id+"_c_"+iowisp.invoker.key+"_"+iowisp.invoker.channel,null),iowisp.realplexor.execute());break;case"userData":iowisp.legion&&iowisp.legion.userData(t);break;case"formData":iowisp.legion&&iowisp.legion.formData(t);break;case"department_field_added":iowisp.legion?iowisp.legion.depFieldAdded(t):iowisp.wisp.depFieldAdded(t);break;case"department_form_changed":iowisp.legion?iowisp.legion.depFormChanged(t):iowisp.wisp.depFormChanged(t);break;case"department_field_deleted":iowisp.legion?iowisp.legion.depFieldDeleted(t):iowisp.wisp.depFieldDeleted(t);break;case"department_added":iowisp.legion?iowisp.legion.depAdded(t):iowisp.wisp.depAdded(t);break;case"department_edited":iowisp.legion?iowisp.legion.depEdited(t):iowisp.wisp.depEdited(t);break;case"departmentConsult":iowisp.legion?iowisp.legion.departmentConsult(t):iowisp.wisp.departmentConsult(t)}},this.getController=function(e){var t="d";switch(e){case"add_phrase":case"edit_phrase":case"delete_phrase":case"get_scripts_mng":case"select_new_user":case"change_manager":case"tabStats":t=1!=iowisp.invoker.type||"change_manager"!=e?"mngr":"d";break;default:t="d"}return t},this.xspot=function(t,i){var a=!1;if(3!=iowisp.invoker.type&&4!=iowisp.invoker.type){try{i.where=t,"UTF-8"!=document.charset&&(i.charset=document.charset),"blade"!=t?$jcallpy.ajax({type:"POST",url:("http:"==location.protocol?kunnka.bloodseeker.replace("https","http"):kunnka.bloodseeker)+e.getController(i.action)+"/",data:i}):$jcallpy.ajax({type:"POST",url:("http:"==location.protocol?kunnka.bloodseeker.replace("https","http"):kunnka.bloodseeker)+e.getController(i.action)+"/",data:i,success:function(t){if(t)try{e.storm(JSON.parse(t))}catch(i){}}}),a=!0}catch(n){iowisp.clockwerk.windranger(e.module_name+"Error",n,e.module_log_rang)}return a}3==iowisp.invoker.type&&e.berserkcall({action:t,data:i}),4==iowisp.invoker.type&&e.ghostship({action:t,data:i})},this.phoenix=function(t){return t.domain=iowisp.invoker.site,0!=iowisp.invoker.peer_key&&0!=iowisp.invoker.peer_type&&3!=iowisp.invoker.type&&4!=iowisp.invoker.type?(t=e.battlehunger(t),t=e.helix(t),1==iowisp.invoker.type&&(t=e.add_channel_data(t)),iowisp.clockwerk.windranger(e.module_name+"--->>> Peer",t,e.module_log_rang),e.xspot("to_fms",t),!0):(3==iowisp.invoker.type&&e.xspot("to_peer",t),void(4==iowisp.invoker.type&&e.xspot("to_peer",t)))},this.blade=function(t){1==iowisp.invoker.type&&(t=e.add_channel_data(t)),iowisp.clockwerk.windranger(e.module_name+"--->>> PHP",t,e.module_log_rang),e.xspot("blade",t)},this.to_fms=function(t){t=e.battlehunger(t),1==iowisp.invoker.type&&(t=e.add_channel_data(t)),iowisp.clockwerk.windranger(e.module_name+"--->>> All",t,e.module_log_rang),e.xspot("to_fms",t)},this.battlehunger=function(e){return e.site_id=iowisp.invoker.site_id,e.key=iowisp.invoker.key,e.type=iowisp.invoker.type,e},this.helix=function(e){return e.peer_key=iowisp.invoker.peer_key,e.peer_type=iowisp.invoker.peer_type,e},this.add_channel_data=function(e){return e.channel=iowisp.invoker.channel,e},this.is_array=function(e){return"object"==typeof e&&(e instanceof Array||e instanceof Object)},this.format_data=function(t){var i=e.data_to_str(t,"&",null);return i.slice(0,i.length-1)},this.data_to_str=function(t,i,a){var n="";for(var o in t)n+=e.is_array(t[o])?e.data_to_str(t[o],i,a?a+"["+o+"]":o):(a?a+"["+o+"]":o)+"="+t[o]+i;return n},this.shadowdemon=function(e){iowisp.legion.proxy_screen.postMessage(JSON.stringify(e),iowisp.invoker.origin)},this.devourer=function(e){document.getElementById("callpy_iframeid").contentWindow.postMessage(JSON.stringify(e),location.protocol+"//"+document.getElementById("callpy_iframeid").contentWindow.location.host)},this.berserkcall=function(e){parent.postMessage(JSON.stringify(e),kunnka.bloodseeker.substr(0,kunnka.bloodseeker.length-1).replace("https","http"))},this.ghostship=function(e){parent.postMessage(JSON.stringify(e),location.protocol+"//"+parent.location.host)},this.crystalmaiden=function(t){try{switch(t=JSON.parse(t),t.action){case"to_peer":if(2==iowisp.invoker.type&&("scroll"==t.data.action||"click"==t.data.action||"input_field"==t.data.action)){if(!$jcallpy.tools("status").navigate)return;"1"==iowisp.lifestealer[iowisp.invoker.site_id][iowisp.legion.selected_user].tabStatus&&(t.data.url="")}e.phoenix(t.data);break;case"get_cookies":0==iowisp.invoker.peer_cookies&&(e.shadowdemon(iowisp.tidehunter.antimage("set_cookies",{0:iowisp.invoker.peer_cookie})),iowisp.invoker.peer_cookies=!0);break;case"get_data":iowisp.legion.getDataForProxy(t);break;case"toolsData":$jcallpy.tools("add_tools",t.toolsData);break;case"set_locationhref":iowisp.legion.proxyScreenLocation=t.url;break;case"visibility":"focus"==t.status&&(iowisp.legion.toss=!0);break;case"iframe_loaded":iowisp.legion.load_frame_handler()}}catch(i){}},this.troll=function(t){try{switch(t=JSON.parse(t),t.action){case"to_peer":e.phoenix(t.data);break;case"focus":iowisp.lycan.onfocus_handler({focusFrame:!0});break;case"blur":iowisp.lycan.focusedWindow||iowisp.lycan.onblur_handler();break;case"iframe_loaded":"call"!=iowisp.m_chat.lich?iowisp.nightstalker.phoenix({action:"go_url",url:window.location.href,width:$jcallpy(document).width(),height:$jcallpy(document).height(),scroll:iowisp.tusk.skywrath(),elements:{selects:$jcallpy.callpy_select(),pointers:$jcallpy.callpy_pointer()},noFocus:!0,title:document.title}):iowisp.nightstalker.phoenix({action:"go_url",url:document.getElementById("callpy_iframeid").contentWindow.location.href,width:$jcallpy(document).width(),height:$jcallpy(document).height(),scroll:document.getElementById("callpy_iframeid").contentWindow.iowisp.tusk.skywrath(),elements:{selects:document.getElementById("callpy_iframeid").contentWindow.$jcallpy.callpy_select(),pointers:document.getElementById("callpy_iframeid").contentWindow.$jcallpy.callpy_pointer()},noFocus:!0,title:document.getElementById("callpy_iframeid").contentWindow.document.title})}}catch(i){}},this.puck=function(t){try{switch(t=JSON.parse(t),t.action){case"click":iowisp.tusk.click(t);break;case"scroll":iowisp.tusk.scroll(t);break;case"input_field":iowisp.tusk.input_field(t);break;case"textarea_field":iowisp.tusk.textarea_field(t);break;case"select_field":iowisp.tusk.select_field(t);break;case"pointer_click":$jcallpy.control("pointer",t.status);break;case"select_click":$jcallpy.control("select",t.status);break;case"go_url":window.location.href=t.url;break;case"block_click":$jcallpy.control("block_click");break;case"get_location":e.berserkcall({action:"info",url:document.location.href,url_togo:t.url});break;case"get_locationhref":e.berserkcall({action:"set_locationhref",url:document.location.href}),t.tools.select&&$jcallpy.control("select",!0),t.tools.pointer&&$jcallpy.control("pointer",!0);break;case"set_cookies":iowisp.tusk.heap(t);break;case"delete_tool":"select"==t.type?$jcallpy("#remote-select-page-box-"+t.element_id).remove():$jcallpy("#remote-control-circle"+t.element_id+", #callpy_tooltip_pointer_block"+t.element_id).remove();break;case"draw_elements":t.deletePrevious&&($jcallpy(".remote-selected-page-box").remove(),$jcallpy(".callpy_lable_tooltip_wrapper").remove(),$jcallpy(".remote-control-circle").remove());for(var i=0;i<t.elements.selects.length;i++)$jcallpy.control("create_select",t.elements.selects[i]);for(var i=0;i<t.elements.pointers.length;i++)$jcallpy.control("create_pointer2",t.elements.pointers[i])}}catch(a){}},this.emberspirit=function(e){try{switch(e=JSON.parse(e),e.action){case"click":iowisp.tusk.click(e);break;case"scroll":iowisp.tusk.scroll(e);break;case"input_field":iowisp.tusk.input_field(e);break;case"textarea_field":
iowisp.tusk.textarea_field(e);break;case"pointer_click":$jcallpy.control("pointer",{active:e.active});break;case"select_click":$jcallpy.control("select",{active:e.active});break;case"go_url":window.location.href=e.url;break;case"block_click":$jcallpy.control("block_click");break;case"select_area":$jcallpy.callpy_select("create",{client_id:e.key,element_id:e.element_id,cords:{upLeft:{x:parseInt(e.x1),y:parseInt(e.y1)},botRight:{x:parseInt(e.x2),y:parseInt(e.y2)}}});break;case"visual_message":$jcallpy.callpy_pointer("create",{client_id:e.key,element_id:e.element_id,circle:{left:e.circle.left,top:e.circle.top},tooltip:{left:e.tooltip.left,top:e.tooltip.top},message:e.message})}}catch(t){}}},kunnka.omniknight=function(){this.module_name="Logger ",this.module_log_rang=100;this.message_level=0,this.windranger=function(e,t,i){if(console&&i>this.message_level)try{}catch(a){}}},kunnka.wraithking=function(){this.module_name="Message ",this.module_log_rang=100;var e=this;this.templates={},this.brewmaster=function(){e.templates.user_data=["site","browser","type","key","from_ls","referer","hidden","webRTCsupp","origin","width","channel","title","enter","fromref","visits","lang"],e.templates.get_scripts_mng=["site","browser","type","webRTCsupp"],e.templates.get_site_info=["site_id"],e.templates.get_lan_info=["login"],e.templates.add_phrase=["key","phrase","color"],e.templates.delete_phrase=["key","id"],e.templates.lan_register=["site_id","login","tariff","info"],e.templates.update_site_settings=["name","value","site_id"],e.templates.change_tariff=["key","tariff"],e.templates.delete_manager=["key"],e.templates.change_manager=["user","manager","site","domain","statusData"],e.templates.set_client_type=["type"],e.templates.set_fms_server=["fms_server"],e.templates.set_fms_app=["fms_app"],e.templates.set_key=["key"],e.templates.set_site=["site"],e.templates.set_site_id=["site_id"],e.templates.set_peer=["key","type","rtmfp_key"],e.templates.set_message_history=["history"],e.templates.set_origin=["origin","cookies","webRTCsupp"],e.templates.clear_peer=[],e.templates.connect_to_fms=[],e.templates.disconnect_from_fms=[],e.templates.ping=["pingtype"],e.templates.send_message=["message","managerName","channel"],e.templates.automessage=["message","time"],e.templates.update_call_set=["audio","video"],e.templates.start_call=[],e.templates.enigma=["webRTC","peerRTCType"],e.templates.necrophos=["peerRTCType"],e.templates.end_call=[],e.templates.end_dialup=[],e.templates.call_state=["state"],e.templates.call_createOffer=[],e.templates.darkseer=[],e.templates.get_scroll=[],e.templates.get_scroll_cw=[],e.templates.go_url=["url","origin","width","height","scroll","elements"],e.templates.set_elements=["elements"],e.templates.select_new_user=["site","oldSite","siteId","oldSiteId","managerId","oldId","newId","withHistory"],e.templates.click=["x","y","tag","id","onclick","outerHtml","elementX","elementY","parentTag","parentId","parentOnclick","parentOuterHtml","parentElementX","parentElementY","url"],e.templates.mouse_position=["coords"],e.templates.visual_message=["circle","tooltip","message","element_id","url"],e.templates.delete_visual_message=["element_id"],e.templates.remote_control_request=[],e.templates.remote_control_request_cancel=[],e.templates.remote_control_answer=["request"],e.templates.get_cookies=[],e.templates.get_data=["type"],e.templates.set_cookies=["cookies"],e.templates.input_field=["input","value","url"],e.templates.textarea_field=["input","value","url"],e.templates.select_field=["select","values","selected","url"],e.templates.writing_text=[],e.templates.notification=["ntype"],e.templates.select_area=["x1","y1","x2","y2","element_id","url"],e.templates.delete_select_area=["element_id"],e.templates.unselect_area=["close"],e.templates.mouse_up=["element","mousesx","mousesy","mousecx","mousecy"],e.templates.scroll=["height","url"],e.templates.scroll_cw=["height","cookie","inputs"],e.templates.window_resize=["width","height"],e.templates.tab_visibility=["isVisible"],e.templates.icecandidate=["label","id","candidate"],e.templates.description=["descriptor","video"],e.templates.changeCallState=["video"],e.templates.update_activity=["id","level","site_id"],e.templates.disconnect_request=["site_url","site_id","key","type","referer","hidden","webRTCsupp","origin","chatWindowStatus","manager","browser","width","enter","title","visits"]},this.antimage=function(t,i){if(e.templates[t]){var a={action:t};for(var n in i)a[e.templates[t][n]]=i[n];return a}return!1}},kunnka.Dklab_Realplexor_Loader={JS_MAX_BOUNCES:10,JS_WAIT_RECONNECT_DELAY:.01,JS_WAIT_URI:"https://rp."+kunnka.callpy_domain,JS_WAIT_TIMEOUT:10,JS_IDENTIFIER:"identifier",JS_DEBUG:1,_bounceCount:0,_namespace:null,_prevReqTime:null,_lastXmlhttp:null,_isXDomain:!1,_ids:{},_callAndReturnException:null,_doc:function(){return document},_getXmlHttp:function(){var e;if("undefined"!=typeof XMLHttpRequest&&(e=new XMLHttpRequest,window.XDomainRequest&&(e=new XDomainRequest,this._isXDomain=!0)),!e)try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}if(!e)try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}return e},_log:function(e,t){if(this.JS_DEBUG&&window.console){t||(t="log");if((""+e).match(/^([^\r\n]+)\r?\n([\s\S]*)$/)){var i=RegExp.$1,a=RegExp.$2;console.groupCollapsed?(console.groupCollapsed(i),console[t](a+"\n"),console.groupEnd()):(console.info(i),console[t](a+"\n"))}else console[t](e)}},_error:function(e,t){this._log(e,"error"),this._log(t)},_processPart:function(e){var t=0,i=e.ids;if(null==i)throw'Cannot find "ids" property within the response part';var a=e.data;if(void 0==a)throw'Cannot find "data" property within the response part';for(var n in i)if(i.hasOwnProperty(n)){var o=i[n];null!=this._namespace&&0==n.indexOf(this._namespace)&&(n=n.substring(this._namespace.length)),this._ids[n]||(this._ids[n]={cursor:null,callbacks:[]});var l=this._ids[n];l.cursor=o;for(var s=0;s<l.callbacks.length;s++){var r=this._callAndReturnException(l.callbacks[s],[a,n,l.cursor]);r&&(this._error("Error executing callback #"+s+" for ID "+n+": "+r,"Data:\n"+a),t++)}}return t},_parseResponseTextIntoParts:function(text){if(!text.match(/^\s*\[[\s\S]*\]\s*$/i))throw"Response is not a complete JSON";var parts;return eval("parts = "+text),parts},_processResponseText:function(e){e=e.replace(/^[\s\S]*?(?=\[)/g,""),this._log("Received response:\n"+e);for(var t=this._parseResponseTextIntoParts(e),i=0,a=0;a<t.length;a++)i+=this._processPart(t[a]);return i},_onresponse:function(e){var t=Math.round(1e3*this.JS_WAIT_RECONNECT_DELAY);try{if(!this._doc().body)return}catch(i){return}try{if(e.match(/^\s*$/))throw e="","Empty response";this._processResponseText(e),this._bounceCount=0}catch(a){var n=(new Date).getTime();n-this._prevReqTime<this.JS_WAIT_TIMEOUT/2*1e3?(this._bounceCount++,this._log("Bounce detected (bounceCount = "+this._bounceCount+")")):this._log("Disconnect detected"),""!=e&&this._error(a.message?a.message:a,"Response:\n"+e),this._prevReqTime=n}if(this._bounceCount>this.JS_MAX_BOUNCES){var o=this._bounceCount-this.JS_MAX_BOUNCES+2;t=1e3+500*o*o,t>15e3&&(t=15e3)}if(!this._lastXmlhttp){this._log("Next query in "+t+" ms"),iowisp.lycan&&(iowisp.lycan.toss,iowisp.lycan.storage.lastSave=(new Date).getTime(),localStorage.setItem("callpy_data",JSON.stringify(iowisp.lycan.storage)),localStorage.setItem("callpy_lastRpx",iowisp.lycan.storage.lastSave));var l=this;setTimeout(function(){l._loopFunc()},t)}},_makeRequestId:function(){var e=[];for(var t in this._ids)if(this._ids.hasOwnProperty(t)){var i=this._ids[t];if(!i.callbacks.length)continue;e.push((null!==i.cursor?i.cursor+":":"")+(null!=this._namespace?this._namespace:"")+t)}return e.join(",")},_loopFunc:function(){var e=this._makeRequestId();if(e.length){var t=this.JS_IDENTIFIER+"="+e,i=null,a=null;t.length+this.JS_WAIT_URI.length<1700?(i=this.JS_WAIT_URI+"?"+t,i+="&ncrnd="+(new Date).getTime()):(i=this.JS_WAIT_URI,a=t+"\n");var n=this._getXmlHttp();if(!n)return void this._error("No XMLHttpRequest found!");var o=this;n.open(a?"POST":"GET",i,!0),o._isXDomain?n.onload=function(){o._lastXmlhttp&&(o._lastXmlhttp=null,o._onresponse(""+n.responseText),o=null)}:n.onreadystatechange=function(){4==n.readyState&&o._lastXmlhttp&&(o._lastXmlhttp=null,o._onresponse(""+n.responseText),o=null)},n.send(a),this._prevReqTime=(new Date).getTime(),this._lastXmlhttp=n}},execute:function(e,t,i){var a=this;if(window.onunload=function(){try{a._lastXmlhttp&&(a._lastXmlhttp.onreadystatechange=function(){},a._lastXmlhttp.abort(),a._lastXmlhttp=null)}catch(e){}},this._lastXmlhttp){var n=this._lastXmlhttp;this._lastXmlhttp=null,n.onreadystatechange=function(){},n.abort()}this._namespace=i&&i.length?i:null,this._ids=e,this._callAndReturnException=t,this._loopFunc()},prepare:function(){!document.location.search.match(/HOST=([^&]+)/)}},kunnka.Dklab_Realplexor=function(){var e=this;this.bersekersblood=function(e,t){return t==kunnka.callpy_domain?"callpy":t&&-1!=t.indexOf("."+kunnka.callpy_domain)?"hosts":"callpy"},this.init=function(t,i,a){var n="1.32",o=document.location.host;if(e._registry||(e._registry={}),e.version=n,e._map={},e._realplexor=null,e._namespace=i,e._login=null,e._iframeId="mpl"+(new Date).getTime(),e._iframeTag='<iframe id="'+e._iframeId+'" onload="Dklab_Realplexor._iframeLoaded(&quot;'+e._iframeId+'&quot;)" src="'+t+"?identifier=IFRAME&amp;HOST="+o+"&amp;version="+e.version+'" style="position:absolute; visibility:hidden; width:200px; height:200px; left:-1000px; top:-1000px"></iframe>',e._iframeCreated=!1,e._registry[e._iframeId]=e,!t.match(/^\w+:\/\/([^\/]+)/))throw"Dklab_Realplexor constructor argument must be fully-qualified URL, "+t+" given.";var l=RegExp.$1;l!=o&&l.lastIndexOf("."+o)!=l.length-o.length-1,a&&(document.write(e._iframeTag),e._iframeCreated=!0)},this._iframeLoaded=function(){var t=e;t._realplexor=kunnka.Dklab_Realplexor_Loader,t._realplexor.execute(e._map,e._callAndReturnException,(null!=e._login?e._login+"_":"")+(null!=e._namespace?e._namespace:""))},this.logon=function(t){e._login=t},this.setCursor=function(t,i){return e._map[t]||(e._map[t]={cursor:null,callbacks:[]}),e._map[t].cursor=i,e},this.lifebreak=function(t,i){e._map[t]||(e._map[t]={cursor:null,callbacks:[]});for(var a=e._map[t].callbacks,n=0;n<a.length;n++)if(a[n]===i)return e;return a.push(i),e},this.acid=function(t,i){if(!e._map[t])return e;if(null==i)return e._map[t].callbacks=[],e;for(var a=e._map[t].callbacks,n=0;n<a.length;n++)if(a[n]===i)return a.splice(n,1),e;return e},this.execute=function(){e._iframeCreated||(e._iframeCreated=!0),e._iframeLoaded()},this._callAndReturnException=function(e,t){try{return e.apply(null,t),null}catch(i){return""+i}}},kunnka.chaosknight=function(){this.module_name="chaosknight ",this.module_log_rang=100;var e=this;this.toss=!0,1!=document.mozHidden&&1!=document.msHidden&&1!=document.webkitHidden&&1!=document.hidden||(this.toss=!1),this.storage=Object(),this.first_time_focus=!0,this.restoreTimer=null,this.restoreInIE=!!document.documentMode,this.handleFlag=!0,this.handleCallFlag=!0,this.handleDataFlag=!0,this.focusTimer=null,this.focusedWindow=!1,this.pageViews=1,this.init=function(){function t(t){if(t||(t=window.event),"callpy_html"==t.key&&(e.restoreInIE=!1,e.voidd()),e.restoreInIE&&"html_save"==t.key&&(clearTimeout(e.restoreTimer),e.restoreTimer=setTimeout(function(){e.handleFlag?e.voidd():e.handleFlag=!0},350)),"techies"==t.key&&(t.newValue?"2"==t.newValue:"1"==t.oldValue),"callpy_clientSyncData"==t.key){if(e.restoreInIE&&!e.handleDataFlag)return console.log("Блокирование изменения данных callpy_data на текущей вкладке"),void(e.handleDataFlag=!0);e.syncData()}if("sandkung"==t.key){if(e.restoreInIE&&!e.handleCallFlag)return console.log("Блокирование изменения флага звонка на текущей вкладке"),void(e.handleCallFlag=!0);console.log("Изменение флага звонка"),t.newValue?"3"!=t.newValue&&"2"!=t.newValue||"no_call"!=iowisp.m_chat.lich&&"incoming"!=iowisp.m_chat.lich||"3"==t.newValue&&(iowisp.m_chat.lich="no_call"):"3"==t.oldValue||"2"==t.oldValue?"call"==iowisp.m_chat.lich||"calling_to_manager"==iowisp.m_chat.lich?"webrtc"==iowisp.magnus.call_type?(iowisp.m_chat.end_call_webrtc(),"3"==t.oldValue?$jcallpy.callpy_status("set","call_off"):$jcallpy.callpy_status("set","dial_off"),$jcallpy.callpy_call("_removeIframe")):(iowisp.magnus.qop(),"3"==t.oldValue?$jcallpy.callpy_status("set","call_off"):$jcallpy.callpy_status("set","dial_off"),$jcallpy.callpy_call("_removeIframe")):("3"==t.oldValue?$jcallpy.callpy_status("set","call_off"):$jcallpy.callpy_status("set","dial_off"),iowisp.m_chat.lich="no_call"):"1"==t.oldValue&&(iowisp.m_chat.lich="no_call")}"callTab"!=t.key||t.oldValue||"calling_to_maanger"!=iowisp.m_chat.lich&&"call"!=iowisp.m_chat.lich||(localStorage.removeItem("callTab"),alert("Разговор идет на этой вкладке")),"callpy_activity"==t.key&&(iowisp.haste.activity=t.newValue),"callpy_views"==t.key&&(e.pageViews=parseInt(t.newValue))}null!=localStorage.getItem("callpy_data")&&sven?(e.darkness(),e.pageViews=localStorage.getItem("callpy_views"),e.pageViews?iowisp.invoker.peer_key&&e.pageViews++:e.pageViews=1,localStorage.setItem("callpy_views",e.pageViews),e.storage.lastSave=(new Date).getTime(),localStorage.setItem("callpy_data",JSON.stringify(iowisp.lycan.storage))):(localStorage.removeItem("callpy_data"),localStorage.setItem("callpy_views",e.pageViews)),sven||(localStorage.setItem("callpy_lastRpx",(new Date).getTime()),e.storage.insertcode='(function(c,k,n,d,m){var o=d.getItem("tiny");if(o!==null){c[k]=true;var p=m.createElement("style");p.type="text/css";p.innerHTML=o;o=0;m.getElementsByTagName("head")[0].appendChild(p)}var l=m.createElement("div");l.id="callpy";m.body.appendChild(l);m.querySelector("#callpy").innerHTML=d.getItem("callpy_html");if(m.getElementById(n)){m.getElementById(n).scrollTop=d.getItem("callpy_userId")}})(window,"tiny","callpy_chat_scroller",localStorage,document);'),window.addEventListener("unload",function(){e.cripping(),"calling_to_manager"==iowisp.m_chat.lich?(localStorage.removeItem("sladar"),localStorage.removeItem("sandkung"),iowisp.nightstalker.phoenix(iowisp.tidehunter.antimage("end_dialup")),$jcallpy.callpy_status("set","dial_off")):"call"==iowisp.m_chat.lich&&(iowisp.nightstalker.phoenix(iowisp.tidehunter.antimage("end_call")),$jcallpy.callpy_status("set","call_off"),localStorage.removeItem("sladar"),localStorage.removeItem("sandkung"))}),window.onbeforeunload=function(){return"calling_to_manager"==iowisp.m_chat.lich||"call"==iowisp.m_chat.lich?"На этой вкладке идет звонок. Если вы закроете её, звонок прервется. Продолжить?":void 0},window.addEventListener?window.addEventListener("storage",t,!1):window.attachEvent("onstorage",t),window.onfocus=e.onfocus_handler,window.onblur=e.onblur_handler},this.onfocus_handler=function(t){iowisp.realplexor&&iowisp.realplexor._realplexor&&iowisp.realplexor._realplexor._prevReqTime&&(new Date).getTime()-iowisp.realplexor._realplexor._prevReqTime>3e4&&iowisp.realplexor._realplexor._loopFunc(),e.toss=!0,iowisp.m_chat.setMessagesRead(),t.focusFrame||(e.focusedWindow=!0);var i=(new Date).getTime();e.focusTimer&&clearTimeout(e.focusTimer),e.focusTimer=setTimeout(function(){iowisp.nightstalker.to_fms({action:"update_status",status:"1"+($jcallpy.callpy_status("api").visible&&iowisp.invoker.peer_key?"1":"0")+(iowisp.m_chat.history.length?"1":"0"),peer_key:iowisp.invoker.peer_key?iowisp.invoker.peer_key:0,domain:iowisp.invoker.site,referer:encodeURIComponent(window.location.href),width:$jcallpy(window).width(),title:document.title})},500),1==iowisp.invoker.activePage&&setTimeout(function(){if(e.toss){var t="call"!=iowisp.m_chat.lich?iowisp.tusk.skywrath():document.getElementById("callpy_iframeid").contentWindow.iowisp?document.getElementById("callpy_iframeid").contentWindow.iowisp.tusk.skywrath():0;1==iowisp.invoker.type&&0!=iowisp.invoker.site_info.blocked&&(t=0),"call"!=iowisp.m_chat.lich?iowisp.nightstalker.phoenix({action:"go_url",url:window.location.href,width:$jcallpy(document).width(),height:$jcallpy(document).height(),scroll:t,elements:{selects:$jcallpy.callpy_select(),pointers:$jcallpy.callpy_pointer()},focusTime:i,inputs:iowisp.tusk.getInputs(),title:document.title}):iowisp.nightstalker.phoenix({action:"go_url",url:document.getElementById("callpy_iframeid").contentWindow.location.href,width:$jcallpy(document).width(),height:$jcallpy(document).height(),scroll:t,elements:{selects:document.getElementById("callpy_iframeid").contentWindow.iowisp?document.getElementById("callpy_iframeid").contentWindow.$jcallpy.callpy_select():[],pointers:document.getElementById("callpy_iframeid").contentWindow.iowisp?document.getElementById("callpy_iframeid").contentWindow.$jcallpy.callpy_pointer():[]},focusTime:i,inputs:document.getElementById("callpy_iframeid").contentWindow.iowisp?document.getElementById("callpy_iframeid").contentWindow.iowisp.tusk.getInputs():{inputs:[],textareas:[],selects:[]},title:document.getElementById("callpy_iframeid").contentWindow.document.title})}},50),e.first_time_focus&&(e.first_time_focus=!1)},this.onblur_handler=function(){e.focusedWindow=!1,e.toss&&(e.cripping(),e.toss=!1,e.focusTimer&&clearTimeout(e.focusTimer),iowisp.nightstalker.to_fms({action:"update_status",status:"0"+($jcallpy.callpy_status("api").visible&&iowisp.invoker.peer_key?"1":"0")+(iowisp.m_chat.history.length?"1":"0"),peer_key:iowisp.invoker.peer_key?iowisp.invoker.peer_key:0,domain:iowisp.invoker.site}))},this.voidd=function(e){console.log("Восстановили из LS");var t=(localStorage.getItem("sandkung"),$jcallpy("#callpy_wrapper").hasClass("callpy_status_video")),i=localStorage.getItem("callpy_html");if(" "!=i[0])return void console.log("Не восстанавливаем из LS, поскольку запись не была инициирована пользователем");i=i.substr(1);var a=document.querySelector("#callpy_wrapper");a.outerHTML!=i&&(document.querySelector("#callpy").innerHTML=i,document.getElementById("callpy_chat_scroller")&&(document.getElementById("callpy_chat_scroller").scrollTop=localStorage.getItem("callpy_userId")),window.sven||(window.sven=!0),$jcallpy.callpy_init(),$jcallpy("#callpy_chat_input_box").on("input",function(){iowisp.tusk.send_textarea_change({id:$jcallpy(this).attr("id"),name:$jcallpy(this).attr("name")},$jcallpy(this).val())}),"call"==iowisp.m_chat.lich&&(document.getElementById("callpy_client_video").src=URL.createObjectURL(iowisp.magnus.pc.getRemoteStreams()[0]),document.getElementById("callpy_client_video_self").src=URL.createObjectURL(iowisp.magnus.pc.getLocalStreams()[0]),t&&$jcallpy("#callpy_wrapper").addClass("callpy_status_video")))},this.cripping=function(){(new Date).getTime()-localStorage.getItem("callpy_lastRpx")<3e4&&(e.storage.lastSave=(new Date).getTime()),e.storage.pudge=pudge,e.storage.kunnka=Object(),e.storage.kunnka.bloodseeker=kunnka.bloodseeker,e.storage.kunnka.callpy_domain=kunnka.callpy_domain,e.storage.iowisp=Object(),e.storage.iowisp.earthshaker=iowisp.earthshaker,e.storage.iowisp.lifestealer=iowisp.lifestealer,e.storage.iowisp.invoker=iowisp.invoker,e.storage.iowisp.m_chat=Object(),e.storage.iowisp.m_chat.history=iowisp.m_chat.history,e.storage.iowisp.wisp=Object(),e.storage.iowisp.wisp.flash_state=iowisp.wisp.flash_state,e.storage.iowisp.wisp.manager_request=iowisp.wisp.manager_request,e.storage.iowisp.wisp.weaver=iowisp.wisp.weaver,localStorage.setItem("callpy_data",JSON.stringify(e.storage))},this.night=function(t){if(5!=iowisp.invoker.type){var i=document.querySelector("#callpy_wrapper").outerHTML;i=i.replace(" callpy_status_video",""),i=i.replace(" callpy_mobile_visible","");var a=localStorage.getItem("callpy_html");i!=a&&(localStorage.setItem("callpy_html",t?" "+i:i),document.getElementById("callpy_chat_scroller")&&localStorage.setItem("callpy_userId",document.getElementById("callpy_chat_scroller").scrollTop),e.restoreInIE&&(e.handleFlag=!1,localStorage.setItem("html_save",(new Date).getTime())))}},this.darkness=function(){e.storage=JSON.parse(localStorage.getItem("callpy_data")),iowisp.m_chat&&e.storage.iowisp&&e.storage.iowisp.m_chat&&e.storage.iowisp.m_chat.history&&(iowisp.m_chat.history=e.storage.iowisp.m_chat.history)},this.saveSyncData=function(t){e.restoreInIE&&(e.handleDataFlag=!1),localStorage.setItem("callpy_clientSyncData",(t?" ":"")+JSON.stringify({department_id:iowisp.invoker.department_id,clientInfo:iowisp.invoker.clientInfo}))},this.syncData=function(){var e=localStorage.getItem("callpy_clientSyncData");return" "!=e[0]?void console.log("Не восстанавливаем callpy_clientSyncData из LS, поскольку запись не была инициирована пользователем"):(e=e.substr(1),e=JSON.parse(e),iowisp.invoker.department_id=e.department_id,iowisp.invoker.clientInfo=e.clientInfo,void $jcallpy.callpy_departments("_set_select_department"))}},kunnka.chargeofdark=function(){this.module_name="Activity ",this.module_log_rang=100;var e=this;this.default_level=550,sven?this.activity=localStorage.getItem("callpy_activity")?localStorage.getItem("callpy_activity"):this.default_level:this.activity=this.default_level,this.mouseTimer=null,this.scrollTimer=null,this.automessageTimer=null,this.lastAutoMessage=null,this.lastHoldMessage=null,this.holdingTimer=null,this.init=function(){window.addEventListener?(window.addEventListener("mousemove",e.handle_mouse,!0),window.addEventListener("click",e.handle_click,!0),window.addEventListener("scroll",e.handle_scroll,!0)):(window.attachEvent("onmousemove",e.handle_mouse),window.attachEvent("onclick",e.handle_click),window.attachEvent("onscroll",e.handle_scroll)),localStorage.getItem("callpy_activity_timer")||localStorage.setItem("callpy_activity_timer",(new Date).getTime()+9500),setTimeout(e.reduce_activity,1e4),e.automessage_init(),e.holding_init()},this.automessage_init=function(){var t=localStorage.getItem("callpy_greets");if(t&&(t=JSON.parse(t)),e.automessageTimer={},0==iowisp.invoker.site_info.blocked&&!iowisp.isMobile())for(var i=0;i<iowisp.invoker.site_info.greets.length;i++)if(1==iowisp.invoker.site_info.greets[i].term&&0!=iowisp.invoker.site_info.greets[i].status&&(t&&1!=t[iowisp.invoker.site_info.greets[i].id]||!t)){if(iowisp.invoker.site_info.greets[i].urls.length>0){for(var a=iowisp.invoker.site_info.greets[i].urls.split("|"),n=!1,o=0;o<a.length;o++)if(a[o].length>1&&location.pathname.indexOf(decodeURIComponent(a[o]))>=0||a[o]==location.pathname){n=!0;break}if(!n)continue}var l=localStorage.getItem("callpy_enterTime");l||(l=(new Date).getTime(),localStorage.setItem("callpy_enterTime",l)),l=(new Date).getTime()-l,iowisp.invoker.site_info.greets[i].urls.length>0&&(l=0),e.automessageTimer[iowisp.invoker.site_info.greets[i].id]=setTimeout(function(){e.automessage(arguments[0])},Math.max(0,1e3*iowisp.invoker.site_info.greets[i].seconds-l),iowisp.invoker.site_info.greets[i].id)}},this.automessage_pageCheck=function(){var t=localStorage.getItem("callpy_greets");t&&(t=JSON.parse(t));for(var i=0;i<iowisp.invoker.site_info.greets.length;i++)0==iowisp.invoker.site_info.greets[i].term&&0!=iowisp.invoker.site_info.greets[i].status&&(t&&1!=t[iowisp.invoker.site_info.greets[i].id]||!t)&&iowisp.lycan.pageViews==iowisp.invoker.site_info.greets[i].pages&&e.automessage(iowisp.invoker.site_info.greets[i].id)},this.holding_init=function(){if(0==iowisp.invoker.site_info.blocked&&!iowisp.isMobile()&&localStorage.getItem("callpy_hm")){var t=localStorage.getItem("callpy_holds");t&&(t=JSON.parse(t)),e.holdingTimer={};for(var i=0;i<iowisp.invoker.site_info.holds.length;i++)if(0!=iowisp.invoker.site_info.holds[i].status&&(t&&1!=t[iowisp.invoker.site_info.holds[i].id]||!t)){var a=localStorage.getItem("callpy_hm");a=(new Date).getTime()-a,e.holdingTimer[iowisp.invoker.site_info.holds[i].id]=setTimeout(function(){e.holdingmessage(arguments[0])},Math.max(0,1e3*iowisp.invoker.site_info.holds[i].seconds-a),iowisp.invoker.site_info.holds[i].id)}}},this.get_level=function(e){return Math.floor(e/100)},this.add_activity=function(t,i){var a=Math.min(1099,Math.max(e.default_level,e.activity)+t);Math.abs(e.get_level(a)-e.get_level(e.activity))>=1&&!i,e.activity=a,localStorage.setItem("callpy_activity",e.activity)},this.decrease_activity=function(t){var i=Math.max(0,e.activity-t);Math.abs(e.get_level(i)-e.get_level(e.activity))>=1,e.activity=i,localStorage.setItem("callpy_activity",e.activity)},this.handle_mouse=function(){clearTimeout(e.mouseTimer),e.mouseTimer=setTimeout(e.handle_mouse_move,500)},this.handle_mouse_move=function(){e.add_activity(5)},this.handle_click=function(){e.add_activity(20)},this.handle_scroll=function(){clearTimeout(e.scrollTimer),e.scrollTimer=setTimeout(e.handle_scroll_move,500)},this.handle_scroll_move=function(){e.add_activity(10)},this.reduce_activity=function(){(new Date).getTime()>localStorage.getItem("callpy_activity_timer")&&(localStorage.setItem("callpy_activity_timer",(new Date).getTime()+9500),e.decrease_activity(20)),setTimeout(e.reduce_activity,1e4)},this.automessage=function(t){if(!localStorage.getItem("callpy_am")&&iowisp.invoker.peer_key&&0==iowisp.invoker.site_info.blocked){localStorage.setItem("callpy_am","1");var i=localStorage.getItem("callpy_greets");if(i=i?JSON.parse(i):{},!i[t]){i[t]=1,localStorage.setItem("callpy_greets",JSON.stringify(i));for(var a=null,n=0;n<iowisp.invoker.site_info.greets.length;n++)if(iowisp.invoker.site_info.greets[n].id==t){a=iowisp.invoker.site_info.greets[n];break}if(a){if(1!=a.shuffle)var o=iowisp.urlHighlight(a.text);else{var l,o=["С удовольствием окажу профессиональную помощь, обращайтесь.","Если возникнут вопросы – пишите или звоните в 1 клик.","Могу проконсультировать Вас по любому вопросу. Пишите или звоните прямо с сайта."];do l=Math.random(),l=Math.floor(l*o.length);while(l==e.lastAutoMessage);o=o[l],e.lastAutoMessage=l,o=iowisp.urlHighlight(o)}$jcallpy.callpy_message("add",{text:iowisp.wisp.replacePatterns(o),from:1,auto:!0,time:(new Date).getTime(),read:0}),iowisp.m_chat.history.push({message:o,receiver:iowisp.invoker.key,sender:iowisp.invoker.peer_key,received:1,read:1}),iowisp.nightstalker.phoenix(iowisp.tidehunter.antimage("automessage",{0:o,1:(new Date).getTime()}))}}localStorage.removeItem("callpy_am")}},this.holdingmessage=function(t){if(localStorage.getItem("callpy_hm")){var i=localStorage.getItem("callpy_holds");if(i=i?JSON.parse(i):{},!i[t]&&0==iowisp.invoker.site_info.blocked){i[t]=1,localStorage.setItem("callpy_holds",JSON.stringify(i));for(var a=null,n=0;n<iowisp.invoker.site_info.holds.length;n++)if(iowisp.invoker.site_info.holds[n].id==t){a=iowisp.invoker.site_info.holds[n];break}if(a){if(1!=a.shuffle)var o=iowisp.urlHighlight(a.text);else{var l,o=["Пожалуйста, подождите. Сейчас операторы заняты, но скоро кто-нибудь освободится и ответит вам!","Немного терпения, прошу Вас. Я сейчас освобожусь и пообщаемся.","Не покидайте сайт пожалуйста, я общаюсь… Минутку…"];do l=Math.random(),l=Math.floor(l*o.length);while(l==e.lastHoldMessage);o=o[l],e.lastHoldMessage=l,o=iowisp.urlHighlight(o)}$jcallpy.callpy_message("add",{text:iowisp.wisp.replacePatterns(o),from:1,auto:!0,time:(new Date).getTime(),read:0}),iowisp.m_chat.history.push({message:o,receiver:iowisp.invoker.key,sender:iowisp.invoker.peer_key,received:1,read:1})}}}}},!function(e,t,i){"use strict";function a(){return(new Date).getTime()}function n(t,i,a){t._eventHandlers=t._eventHandlers||[{element:t.scroller,handler:function(e){t.scroll(e)},type:"scroll"},{element:t.root,handler:function(){t.update()},type:"transitionend animationend"},{element:t.scroller,handler:function(){t.update()},type:"keyup"},{element:t.bar,handler:function(e){e.preventDefault(),t.selection(),t.drag.now=1},type:"touchstart mousedown"},{element:document,handler:function(){t.selection(1),t.drag.now=0},type:"mouseup blur touchend"},{element:document,handler:function(e){2!=e.button&&t._pos0(e)},type:"touchstart mousedown"},{element:document,handler:function(e){t.drag.now&&t.drag(e)},type:"mousemove touchmove"},{element:e,handler:function(){t.update()},type:"resize"},{element:t.root,handler:function(){t.update()},type:"sizeChange"}],_(t._eventHandlers,function(e){e.element&&i(e.element,e.type,e.handler,a)})}function o(e,t,i){var a="data-baron-"+t;if("on"==i)e.setAttribute(a,"inited");else{if("off"!=i)return e.getAttribute(a);e.removeAttribute(a)}}function l(e){if(o(e.root,e.direction))throw Error("Second baron initialization");var t=new h.prototype.constructor(e);return n(t,e.event,"on"),o(t.root,e.direction,"on"),t.update(),t}function s(e){var t={};e=e||{};for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function r(e){var t=s(e);t.direction=t.direction||"v";var i=e.event||function(e,i,a,n){t.$jcallpy(e)[n||"on"](i,a)};return t.event=function(e,t,a,n){_(e,function(e){i(e,t,a,n)})},t}function c(e){if(this.events&&this.events[e])for(var t=0;t<this.events[e].length;t++){var i=Array.prototype.slice.call(arguments,1);this.events[e][t].apply(this,i)}}if(e){var p=f,d=["left","top","right","bottom","width","height"],u={v:{x:"Y",pos:d[1],oppos:d[3],crossPos:d[0],crossOpPos:d[2],size:d[5],crossSize:d[4],client:"clientHeight",crossClient:"clientWidth",crossScroll:"scrollWidth",offset:"offsetHeight",crossOffset:"offsetWidth",offsetPos:"offsetTop",scroll:"scrollTop",scrollSize:"scrollHeight"},h:{x:"X",pos:d[0],oppos:d[2],crossPos:d[1],crossOpPos:d[3],size:d[4],crossSize:d[5],client:"clientWidth",crossClient:"clientHeight",crossScroll:"scrollHeight",offset:"offsetWidth",crossOffset:"offsetHeight",offsetPos:"offsetLeft",scroll:"scrollLeft",scrollSize:"scrollWidth"}},_=function(t,a){var n=0;for((t.length===i||t===e)&&(t=[t]);t[n];)a.call(this,t[n],n),n++},f=function(t){var i,a,n;t=t||{},n=t.$jcallpy||n||e.jQuery1,i=this instanceof n,i?t.root=a=this:a=n(t.root||t.scroller);var o=new f.fn.constructor(a,t,n);return o.autoUpdate&&o.autoUpdate(),o};f.fn={constructor:function(e,t,i){var a=r(t);a.$jcallpy=i,_.call(this,e,function(e,t){var i=s(a);a.root&&a.scroller?(i.scroller=a.$jcallpy(a.scroller,e),i.scroller.length||(i.scroller=e)):i.scroller=e,i.root=e,this[t]=l(i),this.length=t+1}),this.params=a},dispose:function(){var e=this.params;this[0]&&_(this,function(t){t.dispose(e)}),this.params=null},update:function(){for(var e=0;this[e];)this[e].update.apply(this[e],arguments),e++},baron:function(e){return e.root=[],e.scroller=this.params.scroller,_.call(this,this,function(t){e.root.push(t.root)}),e.direction="v"==this.params.direction?"h":"v",e._chain=!0,f(e)}};var h={};h.prototype={_debounce:function(e,t){var n,o,l=this,s=function(){if(l._disposed)return clearTimeout(n),n=l=null,i;var r=a()-o;t>r&&r>=0?n=setTimeout(s,t-r):(n=null,e())};return function(){o=a(),n||(n=setTimeout(s,t))}},constructor:function(e){function t(e,t){return d(e,t)[0]}function n(e){var t=this.barMinSize||20;e>0&&t>e&&(e=t),this.bar&&d(this.bar).css(this.origin.size,parseInt(e,10)+"px")}function o(e){if(this.bar){var t=d(this.bar).css(this.origin.pos),i=+e+"px";i&&i!=t&&d(this.bar).css(this.origin.pos,i)}}function l(){return h[this.origin.client]-this.barTopLimit-this.bar[this.origin.offset]}function s(e){return e*l.call(this)+this.barTopLimit}function r(e){return(e-this.barTopLimit)/l.call(this)}function p(){return!1}var d,_,f,h,m,y,g,v,w,k,b;return k=w=a(),d=this.$jcallpy=e.$jcallpy,this.event=e.event,this.events={},this.root=e.root,this.scroller=t(e.scroller),this.bar=t(e.bar,this.root),h=this.track=t(e.track,this.root),!this.track&&this.bar&&(h=this.bar.parentNode),this.clipper=this.scroller.parentNode,this.direction=e.direction,this.origin=u[this.direction],this.barOnCls=e.barOnCls||"_baron",this.scrollingCls=e.scrollingCls,this.barTopLimit=0,v=1e3*e.pause||0,this.cursor=function(e){return e["client"+this.origin.x]||(((e.originalEvent||e).touches||{})[0]||{})["page"+this.origin.x]},this.pos=function(e){var t="page"+this.origin.x+"Offset",a=this.scroller[t]?t:this.origin.scroll;return e!==i&&(this.scroller[a]=e),this.scroller[a]},this.rpos=function(e){var t,i=this.scroller[this.origin.scrollSize]-this.scroller[this.origin.client];return t=e?this.pos(e*i):this.pos(),t/(i||1)},this.barOn=function(e){this.barOnCls&&(e||this.scroller[this.origin.client]>=this.scroller[this.origin.scrollSize]?d(this.root).hasClass(this.barOnCls)&&d(this.root).removeClass(this.barOnCls):d(this.root).hasClass(this.barOnCls)||d(this.root).addClass(this.barOnCls));
},this._pos0=function(e){f=this.cursor(e)-_},this.drag=function(e){this.scroller[this.origin.scroll]=r.call(this,this.cursor(e)-f)*(this.scroller[this.origin.scrollSize]-this.scroller[this.origin.client])},this.selection=function(e){this.event(document,"selectpos selectstart",p,e?"off":"on")},this.resize=function(){function t(){var t,n,o,l,s;i.barOn(),n=i.scroller[i.origin.crossClient],o=i.scroller[i.origin.crossOffset],t=o-n,o&&(e.freeze&&!i.clipper.style[i.origin.crossSize]&&(l=d(i.clipper).css(i.origin.crossSize),s=i.clipper[i.origin.crossClient]-t+"px",l!=s&&d(i.clipper).css(i.origin.crossSize,s)),l=d(i.clipper).css(i.origin.crossSize),s=i.clipper[i.origin.crossClient]+t+"px",l!=s&&d(i.scroller).css(i.origin.crossSize,s)),Array.prototype.unshift.call(arguments,"resize"),c.apply(i,arguments),k=a()}var i=this,n=0;a()-k<v&&(clearTimeout(m),n=v),n?m=setTimeout(t,n):t()},this.updatePositions=function(){var e,t=this;t.bar&&(e=(h[t.origin.client]-t.barTopLimit)*t.scroller[t.origin.client]/t.scroller[t.origin.scrollSize],parseInt(b,10)!=parseInt(e,10)&&(n.call(t,e),b=e),_=s.call(t,t.rpos()),o.call(t,_)),Array.prototype.unshift.call(arguments,"scroll"),c.apply(t,arguments),w=a()},this.scroll=function(){var e=0,t=this;a()-w<v&&(clearTimeout(y),e=v),a()-w<v&&(clearTimeout(y),e=v),e?y=setTimeout(function(){t.updatePositions()},e):t.updatePositions(),t.scrollingCls&&(g||this.$jcallpy(this.scroller).addClass(this.scrollingCls),clearTimeout(g),g=setTimeout(function(){t.$jcallpy(t.scroller).removeClass(t.scrollingCls),g=i},300))},this},update:function(e){return c.call(this,"upd",e),this.resize(1),this.updatePositions(),this},dispose:function(e){n(this,this.event,"off"),o(this.root,e.direction,"off"),this.$jcallpy(this.scroller).css(this.origin.crossSize,""),this.barOn(!0),c.call(this,"dispose"),this._disposed=!0},on:function(e,t,i){for(var a=e.split(" "),n=0;n<a.length;n++)"init"==a[n]?t.call(this,i):(this.events[a[n]]=this.events[a[n]]||[],this.events[a[n]].push(function(e){t.call(this,e||i)}))}},f.fn.constructor.prototype=f.fn,h.prototype.constructor.prototype=h.prototype,f.noConflict=function(){return e.baron=p,f},f.version="0.7.10",t&&t.fn&&(t.fn.baron=f),e.baron=f,e.module&&module.exports&&(module.exports=f.noConflict())}}(window,window.$jcallpy),function(e,t){var a=function(e){function a(e,i,a){var n=1==a?"pos":"oppos";s<(r.minView||0)&&(i=t),this.$jcallpy(l[e]).css(this.origin.pos,"").css(this.origin.oppos,"").removeClass(r.outside),i!==t&&(i+="px",this.$jcallpy(l[e]).css(this.origin[n],i).addClass(r.outside))}function n(e){try{i=document.createEvent("WheelEvent"),i.initWebKitWheelEvent(e.originalEvent.wheelDeltaX,e.originalEvent.wheelDeltaY),u.dispatchEvent(i),e.preventDefault()}catch(e){}}function o(e){var t;for(var i in e)r[i]=e[i];if(l=this.$jcallpy(r.elements,this.scroller)){s=this.scroller[this.origin.client];for(var a=0;a<l.length;a++)t={},t[this.origin.size]=l[a][this.origin.offset],l[a].parentNode!==this.scroller&&this.$jcallpy(l[a].parentNode).css(t),t={},t[this.origin.crossSize]=l[a].parentNode[this.origin.crossClient],this.$jcallpy(l[a]).css(t),s-=l[a][this.origin.offset],d[a]=l[a].parentNode[this.origin.offsetPos],c[a]=c[a-1]||0,p[a]=p[a-1]||Math.min(d[a],0),l[a-1]&&(c[a]+=l[a-1][this.origin.offset],p[a]+=l[a-1][this.origin.offset]),(0!=a||0!=d[a])&&(this.event(l[a],"mousewheel",n,"off"),this.event(l[a],"mousewheel",n));r.limiter&&l[0]&&(this.track&&this.track!=this.scroller?(t={},t[this.origin.pos]=l[0].parentNode[this.origin.offset],this.$jcallpy(this.track).css(t)):this.barTopLimit=l[0].parentNode[this.origin.offset],this.scroll()),r.limiter===!1&&(this.barTopLimit=0)}var o={element:l,handler:function(){for(var e,t=f(this)[0].parentNode,i=t.offsetTop,a=0;a<l.length;a++)l[a]===this&&(e=a);var n=i-c[e];r.scroll?r.scroll({x1:h.scroller.scrollTop,x2:n}):h.scroller.scrollTop=n},type:"click"};r.clickable&&(this._eventHandlers.push(o),_(o.element,o.type,o.handler,"on"))}var l,s,r={outside:"",inside:"",before:"",after:"",past:"",future:"",radius:0,minView:0},c=[],p=[],d=[],u=this.scroller,_=this.event,f=this.$jcallpy,h=this;this.on("init",o,e);var m=[],y=[];this.on("init scroll",function(){var e,i,n;if(l){for(var o,u=0;u<l.length;u++)e=0,d[u]-this.pos()<p[u]+r.radius?(e=1,i=c[u]):d[u]-this.pos()>p[u]+s-r.radius?(e=2,i=this.scroller[this.origin.client]-l[u][this.origin.offset]-c[u]-s):(e=3,i=t),n=!1,(d[u]-this.pos()<p[u]||d[u]-this.pos()>p[u]+s)&&(n=!0),(e!=m[u]||n!=y[u])&&(a.call(this,u,i,e),m[u]=e,y[u]=n,o=!0);if(o)for(u=0;u<l.length;u++)1==m[u]&&r.past&&this.$jcallpy(l[u]).addClass(r.past).removeClass(r.future),2==m[u]&&r.future&&this.$jcallpy(l[u]).addClass(r.future).removeClass(r.past),3==m[u]?((r.future||r.past)&&this.$jcallpy(l[u]).removeClass(r.past).removeClass(r.future),r.inside&&this.$jcallpy(l[u]).addClass(r.inside)):r.inside&&this.$jcallpy(l[u]).removeClass(r.inside),m[u]!=m[u+1]&&1==m[u]&&r.before?this.$jcallpy(l[u]).addClass(r.before).removeClass(r.after):m[u]!=m[u-1]&&2==m[u]&&r.after?this.$jcallpy(l[u]).addClass(r.after).removeClass(r.before):this.$jcallpy(l[u]).removeClass(r.before).removeClass(r.after),r.grad&&(y[u]?this.$jcallpy(l[u]).addClass(r.grad):this.$jcallpy(l[u]).removeClass(r.grad))}}),this.on("resize upd",function(e){o.call(this,e&&e.fix)})};baron.fn.fix=function(e){for(var t=0;this[t];)a.call(this[t],e),t++;return this}}(window),function(e){var t=e.MutationObserver||e.WebKitMutationObserver||e.MozMutationObserver||null,i=function(){function e(){o.root[o.origin.offset]?a():i()}function i(){n||(n=setInterval(function(){o.root[o.origin.offset]&&(a(),o.update())},300))}function a(){clearInterval(n),n=null}var n,o=this,l=o._debounce(function(){o.update()},300);this._observer=new t(function(){e(),o.update(),l()}),this.on("init",function(){o._observer.observe(o.root,{childList:!0,subtree:!1,characterData:!0}),e()}),this.on("dispose",function(){o._observer.disconnect(),a(),delete o._observer})};baron.fn.autoUpdate=function(e){if(!t)return this;for(var a=0;this[a];)i.call(this[a],e),a++;return this}}(window),function(){var e=function(e){var t,i,a,n,o,l=this;n=e.screen||.9,e.forward&&(t=this.$jcallpy(e.forward,this.clipper),o={element:t,handler:function(){var t=l.pos()-e.delta||30;l.pos(t)},type:"click"},this._eventHandlers.push(o),this.event(o.element,o.type,o.handler,"on")),e.backward&&(i=this.$jcallpy(e.backward,this.clipper),o={element:i,handler:function(){var t=l.pos()+e.delta||30;l.pos(t)},type:"click"},this._eventHandlers.push(o),this.event(o.element,o.type,o.handler,"on")),e.track&&(a=e.track===!0?this.track:this.$jcallpy(e.track,this.clipper)[0],a&&(o={element:a,handler:function(e){var t=e["offset"+l.origin.x],i=l.bar[l.origin.offsetPos],a=0;i>t?a=-1:t>i+l.bar[l.origin.offset]&&(a=1);var o=l.pos()+a*n*l.scroller[l.origin.client];l.pos(o)},type:"mousedown"},this._eventHandlers.push(o),this.event(o.element,o.type,o.handler,"on")))};baron.fn.controls=function(t){for(var i=0;this[i];)e.call(this[i],t),i++;return this}}(window),function(){var e=function(e){function t(){return y.scroller[y.origin.scroll]+y.scroller[y.origin.offset]}function i(){return y.scroller[y.origin.scrollSize]}function a(){return y.scroller[y.origin.client]}function n(e,t){var i=5e-4*e;return Math.floor(t-i*(e+550))}function o(e){p=e,e?(l(),s=setInterval(l,200)):clearInterval(s)}function l(){var l,s,p={},b=t(),C=i(),x=1==g;if(s=0,g>0&&(s=40),l=n(w,s),b>=C-w&&g>-1?x&&(w+=l):w=0,0>w&&(w=0),p[u]=w+"px",a()<=i()){y.$jcallpy(d).css(p);for(var T=0;T<h.length;T++)y.$jcallpy(h[T].self).css(h[T].property,Math.min(w/_*100,100)+"%")}m&&w&&y.$jcallpy(y.root).addClass(m),0==w&&e.onCollapse&&e.onCollapse(),g=0,r=setTimeout(function(){g=-1},k),f&&w>_&&!c&&(f(),c=!0),0==w?v++:v=0,v>1&&(o(!1),c=!1,m&&y.$jcallpy(y.root).removeClass(m))}var s,r,c,p,d=this.$jcallpy(e.block),u=e.size||this.origin.size,_=e.limit||80,f=e.onExpand,h=e.elements||[],m=e.inProgress||"",y=this,g=0,v=0,w=0,k=e.waiting||500;this.on("init",function(){o(!0)}),this.on("dispose",function(){o(!1)}),this.event(this.scroller,"mousewheel DOMMouseScroll",function(e){var a=e.wheelDelta<0||e.originalEvent&&e.originalEvent.wheelDelta<0||e.detail>0;a&&(g=1,clearTimeout(r),!p&&t()>=i()&&o(!0))})};baron.fn.pull=function(t){for(var i=0;this[i];)e.call(this[i],t),i++;return this}}(window);var swfobject=function(){function e(){if(!P){try{var e=R.getElementsByTagName("body")[0].appendChild(m("span"));e.parentNode.removeChild(e)}catch(t){return}P=!0;for(var i=F.length,a=0;i>a;a++)F[a]()}}function t(e){P?e():F[F.length]=e}function i(e){if(typeof A.addEventListener!=E)A.addEventListener("load",e,!1);else if(typeof R.addEventListener!=E)R.addEventListener("load",e,!1);else if(typeof A.attachEvent!=E)y(A,"onload",e);else if("function"==typeof A.onload){var t=A.onload;A.onload=function(){t(),e()}}else A.onload=e}function a(){H?n():o()}function n(){var e=R.getElementsByTagName("body")[0],t=m(I);t.setAttribute("type",N);var i=e.appendChild(t);if(i){var a=0;!function(){if(typeof i.GetVariable!=E){var n=i.GetVariable("$version");n&&(n=n.split(" ")[1].split(","),X.pv=[parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10)])}else if(10>a)return a++,void setTimeout(arguments.callee,10);e.removeChild(t),i=null,o()}()}else o()}function o(){var e=q.length;if(e>0)for(var t=0;e>t;t++){var i=q[t].id,a=q[t].callbackFn,n={success:!1,id:i};if(X.pv[0]>0){var o=h(i);if(o)if(!g(q[t].swfVersion)||X.wk&&X.wk<312)if(q[t].expressInstall&&s()){var p={};p.data=q[t].expressInstall,p.width=o.getAttribute("width")||"0",p.height=o.getAttribute("height")||"0",o.getAttribute("class")&&(p.styleclass=o.getAttribute("class")),o.getAttribute("align")&&(p.align=o.getAttribute("align"));for(var d={},u=o.getElementsByTagName("param"),_=u.length,f=0;_>f;f++)"movie"!=u[f].getAttribute("name").toLowerCase()&&(d[u[f].getAttribute("name")]=u[f].getAttribute("value"));r(p,d,i,a)}else c(o),a&&a(n);else w(i,!0),a&&(n.success=!0,n.ref=l(i),a(n))}else if(w(i,!0),a){var m=l(i);m&&typeof m.SetVariable!=E&&(n.success=!0,n.ref=m),a(n)}}}function l(e){var t=null,i=h(e);if(i&&"OBJECT"==i.nodeName)if(typeof i.SetVariable!=E)t=i;else{var a=i.getElementsByTagName(I)[0];a&&(t=a)}return t}function s(){return!W&&g("6.0.65")&&(X.win||X.mac)&&!(X.wk&&X.wk<312)}function r(e,t,i,a){W=!0,x=a||null,T={success:!1,id:i};var n=h(i);if(n){"OBJECT"==n.nodeName?(b=p(n),C=null):(b=n,C=i),e.id=L,(typeof e.width==E||!/%$/.test(e.width)&&parseInt(e.width,10)<310)&&(e.width="310"),(typeof e.height==E||!/%$/.test(e.height)&&parseInt(e.height,10)<137)&&(e.height="137"),R.title=R.title.slice(0,47)+" - Flash Player Installation";var o=X.ie&&X.win?"ActiveX":"PlugIn",l="MMredirectURL="+A.location.toString().replace(/&/g,"%26")+"&MMplayerType="+o+"&MMdoctitle="+R.title;if(typeof t.flashvars!=E?t.flashvars+="&"+l:t.flashvars=l,X.ie&&X.win&&4!=n.readyState){var s=m("div");i+="SWFObjectNew",s.setAttribute("id",i),n.parentNode.insertBefore(s,n),n.style.display="none",function(){4==n.readyState?n.parentNode.removeChild(n):setTimeout(arguments.callee,10)}()}d(e,t,i)}}function c(e){if(X.ie&&X.win&&4!=e.readyState){var t=m("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(p(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(p(e),e)}function p(e){var t=m("div");if(X.win&&X.ie)t.innerHTML=e.innerHTML;else{var i=e.getElementsByTagName(I)[0];if(i){var a=i.childNodes;if(a)for(var n=a.length,o=0;n>o;o++)1==a[o].nodeType&&"PARAM"==a[o].nodeName||8==a[o].nodeType||t.appendChild(a[o].cloneNode(!0))}}return t}function d(e,t,i){var a,n=h(i);if(X.wk&&X.wk<312)return a;if(n)if(typeof e.id==E&&(e.id=i),X.ie&&X.win){var o="";for(var l in e)e[l]!=Object.prototype[l]&&("data"==l.toLowerCase()?t.movie=e[l]:"styleclass"==l.toLowerCase()?o+=' class="'+e[l]+'"':"classid"!=l.toLowerCase()&&(o+=" "+l+'="'+e[l]+'"'));var s="";for(var r in t)t[r]!=Object.prototype[r]&&(s+='<param name="'+r+'" value="'+t[r]+'" />');n.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+o+">"+s+"</object>",B[B.length]=e.id,a=h(e.id)}else{var c=m(I);c.setAttribute("type",N);for(var p in e)e[p]!=Object.prototype[p]&&("styleclass"==p.toLowerCase()?c.setAttribute("class",e[p]):"classid"!=p.toLowerCase()&&c.setAttribute(p,e[p]));for(var d in t)t[d]!=Object.prototype[d]&&"movie"!=d.toLowerCase()&&u(c,d,t[d]);n.parentNode.replaceChild(c,n),a=c}return a}function u(e,t,i){var a=m("param");a.setAttribute("name",t),a.setAttribute("value",i),e.appendChild(a)}function _(e){var t=h(e);t&&"OBJECT"==t.nodeName&&(X.ie&&X.win?(t.style.display="none",function(){4==t.readyState?f(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function f(e){var t=h(e);if(t){for(var i in t)"function"==typeof t[i]&&(t[i]=null);t.parentNode.removeChild(t)}}function h(e){var t=null;try{t=R.getElementById(e)}catch(i){}return t}function m(e){return R.createElement(e)}function y(e,t,i){e.attachEvent(t,i),z[z.length]=[e,t,i]}function g(e){var t=X.pv,i=e.split(".");return i[0]=parseInt(i[0],10),i[1]=parseInt(i[1],10)||0,i[2]=parseInt(i[2],10)||0,t[0]>i[0]||t[0]==i[0]&&t[1]>i[1]||t[0]==i[0]&&t[1]==i[1]&&t[2]>=i[2]}function v(e,t,i,a){if(!X.ie||!X.mac){var n=R.getElementsByTagName("head")[0];if(n){var o=i&&"string"==typeof i?i:"screen";if(a&&(S=null,j=null),!S||j!=o){var l=m("style");l.setAttribute("type","text/css"),l.setAttribute("media",o),S=n.appendChild(l),X.ie&&X.win&&typeof R.styleSheets!=E&&R.styleSheets.length>0&&(S=R.styleSheets[R.styleSheets.length-1]),j=o}X.ie&&X.win?S&&typeof S.addRule==I&&S.addRule(e,t):S&&typeof R.createTextNode!=E&&S.appendChild(R.createTextNode(e+" {"+t+"}"))}}}function w(e,t){if(U){var i=t?"visible":"hidden";P&&h(e)?h(e).style.visibility=i:v("#"+e,"visibility:"+i)}}function k(e){var t=/[\\\"<>\.;]/,i=null!=t.exec(e);return i&&typeof encodeURIComponent!=E?encodeURIComponent(e):e}var b,C,x,T,S,j,E="undefined",I="object",$="Shockwave Flash",D="ShockwaveFlash.ShockwaveFlash",N="application/x-shockwave-flash",L="SWFObjectExprInst",M="onreadystatechange",A=window,R=document,O=navigator,H=!1,F=[a],q=[],B=[],z=[],P=!1,W=!1,U=!0,X=function(){var e=typeof R.getElementById!=E&&typeof R.getElementsByTagName!=E&&typeof R.createElement!=E,t=O.userAgent.toLowerCase(),i=O.platform.toLowerCase(),a=i?/win/.test(i):/win/.test(t),n=i?/mac/.test(i):/mac/.test(t),o=/webkit/.test(t)?parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,l=!1,s=[0,0,0],r=null;if(typeof O.plugins!=E&&typeof O.plugins[$]==I)r=O.plugins[$].description,!r||typeof O.mimeTypes!=E&&O.mimeTypes[N]&&!O.mimeTypes[N].enabledPlugin||(H=!0,l=!1,r=r.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),s[0]=parseInt(r.replace(/^(.*)\..*$/,"$1"),10),s[1]=parseInt(r.replace(/^.*\.(.*)\s.*$/,"$1"),10),s[2]=/[a-zA-Z]/.test(r)?parseInt(r.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof A.ActiveXObject!=E)try{var c=new ActiveXObject(D);c&&(r=c.GetVariable("$version"),r&&(l=!0,r=r.split(" ")[1].split(","),s=[parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10)]))}catch(p){}return{w3:e,pv:s,wk:o,ie:l,win:a,mac:n}}();(function(){X.w3&&((typeof R.readyState!=E&&"complete"==R.readyState||typeof R.readyState==E&&(R.getElementsByTagName("body")[0]||R.body))&&e(),P||(typeof R.addEventListener!=E&&R.addEventListener("DOMContentLoaded",e,!1),X.ie&&X.win&&(R.attachEvent(M,function(){"complete"==R.readyState&&(R.detachEvent(M,arguments.callee),e())}),A==top&&!function(){if(!P){try{R.documentElement.doScroll("left")}catch(t){return void setTimeout(arguments.callee,0)}e()}}()),X.wk&&!function(){return P?void 0:/loaded|complete/.test(R.readyState)?void e():void setTimeout(arguments.callee,0)}(),i(e)))})(),function(){X.ie&&X.win&&window.attachEvent("onunload",function(){for(var e=z.length,t=0;e>t;t++)z[t][0].detachEvent(z[t][1],z[t][2]);for(var i=B.length,a=0;i>a;a++)_(B[a]);for(var n in X)X[n]=null;X=null;for(var o in swfobject)swfobject[o]=null;swfobject=null})}();return{registerObject:function(e,t,i,a){if(X.w3&&e&&t){var n={};n.id=e,n.swfVersion=t,n.expressInstall=i,n.callbackFn=a,q[q.length]=n,w(e,!1)}else a&&a({success:!1,id:e})},getObjectById:function(e){return X.w3?l(e):void 0},embedSWF:function(e,i,a,n,o,l,c,p,u,_){var f={success:!1,id:i};X.w3&&!(X.wk&&X.wk<312)&&e&&i&&a&&n&&o?(w(i,!1),t(function(){a+="",n+="";var t={};if(u&&typeof u===I)for(var h in u)t[h]=u[h];t.data=e,t.width=a,t.height=n;var m={};if(p&&typeof p===I)for(var y in p)m[y]=p[y];if(c&&typeof c===I)for(var v in c)typeof m.flashvars!=E?m.flashvars+="&"+v+"="+c[v]:m.flashvars=v+"="+c[v];if(g(o)){var k=d(t,m,i);t.id==i&&w(i,!0),f.success=!0,f.ref=k}else{if(l&&s())return t.data=l,void r(t,m,i,_);w(i,!0)}_&&_(f)})):_&&_(f)},switchOffAutoHideShow:function(){U=!1},ua:X,getFlashPlayerVersion:function(){return{major:X.pv[0],minor:X.pv[1],release:X.pv[2]}},hasFlashPlayerVersion:g,createSWF:function(e,t,i){return X.w3?d(e,t,i):void 0},showExpressInstall:function(e,t,i,a){X.w3&&s()&&r(e,t,i,a)},removeSWF:function(e){X.w3&&_(e)},createCSS:function(e,t,i,a){X.w3&&v(e,t,i,a)},addDomLoadEvent:t,addLoadEvent:i,getQueryParamValue:function(e){var t=R.location.search||R.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return k(t);for(var i=t.split("&"),a=0;a<i.length;a++)if(i[a].substring(0,i[a].indexOf("="))==e)return k(i[a].substring(i[a].indexOf("=")+1))}return""},expressInstallCallback:function(){if(W){var e=h(L);e&&b&&(e.parentNode.replaceChild(b,e),C&&(w(C,!0),X.ie&&X.win&&(b.style.display="block")),x&&x(T)),W=!1}}}}();kunnka.timbersaw=function(){this.module_name="User ",this.module_log_rang=100;var e=this;1!=sven?(this.weaver=0,this.manager_request=!1,this.flash_state=!0):(this.weaver=callpy_storage.iowisp.wisp.weaver,this.manager_request=callpy_storage.iowisp.wisp.manager_request,this.flash_state=callpy_storage.iowisp.wisp.flash_state),this.init=function(){1!=sven&&iowisp.juggernaut(),iowisp.invoker.key=iowisp.axe.epicenter("callpy_key"),iowisp.invoker.channel=iowisp.axe.epicenter("callpy_chnl"),iowisp.initialize_data.leshrac&&(iowisp.invoker.key=iowisp.initialize_data.leshrac,iowisp.invoker.channel=iowisp.initialize_data.channel,iowisp.axe.caustic("callpy_key",iowisp.invoker.key,"Mon, 01-Jan-2101 00:00:00 GMT","/"),iowisp.axe.caustic("callpy_chnl",iowisp.invoker.channel,"Mon, 01-Jan-2101 00:00:00 GMT","/")),1!=sven&&(iowisp.invoker.activePage=0,iowisp.invoker.clientInfo=iowisp.initialize_data.clientInfo,iowisp.invoker.department_id=iowisp.initialize_data.init_data.department,iowisp.initialize_data.init_data.batrider&&(iowisp.invoker.activePage=1,window.addEventListener("mousemove",iowisp.tusk.onmousemove_handler,!0))),iowisp.invoker.channel=iowisp.initialize_data.channel,iowisp.initialize_data.init_data.shadowfiend?iowisp.invoker.peer_key=iowisp.initialize_data.init_data.shadowfiend.manager:0==iowisp.initialize_data.init_data.online&&(iowisp.invoker.peer_key=0),0==iowisp.initialize_data.init_data.online&&(iowisp.earthshaker={}),!iowisp.invoker.peer_key&&"1"==iowisp.invoker.site_info.offline_lbl,"register_client"==iowisp.initialize_data.init_data.action&&iowisp.viper({action:"register_client",key:iowisp.invoker.key,type:1,channel:iowisp.invoker.channel,site_id:iowisp.initialize_data.init_data.site_id,far_id:0}),iowisp.tusk.init(),iowisp.magnus.bash(),1!=iowisp.invoker.site_info.userData||iowisp.invoker.social||0!=iowisp.invoker.site_info.blocked||e.ud(),window.callpyLogin&&(!(iowisp.invoker.clientInfo&&iowisp.invoker.clientInfo.formData&&iowisp.invoker.clientInfo.formData.loginForm&&iowisp.invoker.clientInfo.formData.loginForm.login!=window.callpyLogin)&&iowisp.invoker.clientInfo&&iowisp.invoker.clientInfo.formData&&iowisp.invoker.clientInfo.formData.loginForm||$jcallpy.post(kunnka.bloodseeker+"/d/",{action:"addFormData",site_id:iowisp.invoker.site_id,key:iowisp.invoker.key,channel:iowisp.invoker.channel,site:iowisp.invoker.site,formType:"loginForm",data:{login:window.callpyLogin}},function(){e.formData({formType:"loginForm",data:{login:window.callpyLogin}})}))},this.vitality=function(t){t?iowisp.nightstalker.blade(iowisp.tidehunter.antimage("change_manager",{0:iowisp.invoker.key,1:t,2:iowisp.invoker.site_id,3:iowisp.invoker.site,4:"1"+("off"==$jcallpy("#callpy_lableCont").attr("data-status")?"1":"0")+(iowisp.m_chat.history.length?"1":"0")})):e.manager_request||(e.manager_request=!0,iowisp.nightstalker.blade(iowisp.tidehunter.antimage("change_manager",{0:iowisp.invoker.key,1:"",2:iowisp.invoker.site_id,3:iowisp.invoker.site,4:"1"+("off"==$jcallpy("#callpy_lableCont").attr("data-status")?"1":"0")+(iowisp.m_chat.history.length?"1":"0")})))},this.sniper=function(e){iowisp.invoker.key=e.key,iowisp.invoker.far_id=e.far_id,iowisp.invoker.site_id=e.site_id,iowisp.invoker.channel=e.channel},this.razor=function(){},this.spear=function(t){t||(t=0),e.weaver!=t?(e.weaver=t,iowisp.broodmother(),$jcallpy.callpy_consultant("set")):iowisp.broodmother(),iowisp.lycan.cripping()},this.venomancer=function(t,i){0==i&&(t.key==e.weaver&&e.spear(t.key),$jcallpy.callpy_departments("_create_select"))},this.phantomlancer=function(e){$jcallpy.callpy_departments("_create_select")},this.shadowfiend=function(t){if(iowisp.invoker.key==t.user&&(iowisp.wisp.weaver!=t.manager||t.department_id&&t.department_id!=iowisp.invoker.department_id)){if(t.department_id&&t.department_id!=iowisp.invoker.department_id&&(iowisp.invoker.department_id=t.department_id),iowisp.invoker.activePage=0,iowisp.initialize_data.init_data.batrider&&(iowisp.invoker.activePage=1),e.manager_request=!1,!e.weaver&&t.manager){if(localStorage.setItem("callpy_enterTime",(new Date).getTime()),iowisp.haste.automessageTimer)for(var i in iowisp.haste.automessageTimer)clearTimeout(iowisp.haste.automessageTimer[i]);iowisp.haste.automessage_init()}iowisp.wisp.spear(t.manager),t.notify}else $jcallpy.callpy_consultant("set")},this.darkseer=function(){window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),"call"!=iowisp.m_chat.lich?iowisp.nightstalker.phoenix({action:"go_url",url:window.location.href,width:$jcallpy(document).width(),height:$jcallpy(document).height(),scroll:iowisp.tusk.skywrath()}):iowisp.nightstalker.phoenix({action:"go_url",url:document.getElementById("callpy_iframeid").contentWindow.location.href,width:$jcallpy(document).width(),height:$jcallpy(document).height(),scroll:document.getElementById("callpy_iframeid").contentWindow.iowisp.tusk.skywrath()})},this.batrider=function(e){iowisp.invoker.activePage=parseInt(e.activePage),1==iowisp.invoker.activePage&&($jcallpy.callpy_select().length||$jcallpy.callpy_pointer().length)&&iowisp.lycan.toss&&iowisp.nightstalker.phoenix(iowisp.tidehunter.antimage("set_elements",{0:{selects:$jcallpy.callpy_select(),pointers:$jcallpy.callpy_pointer()}})),1==iowisp.invoker.activePage?window.addEventListener("mousemove",iowisp.tusk.onmousemove_handler,!0):window.removeEventListener("mousemove",iowisp.tusk.onmousemove_handler),iowisp.lycan.cripping()},this.fvoid=function(e){},this.disconnect_request=function(){var e=1==$jcallpy.callpy_status("api").visible?1:0,t=localStorage.getItem("callpy_fEnt");t||(t=Math.floor((new Date).getTime()/1e3),localStorage.setItem("callpy_fEnt",t));var i=localStorage.getItem("callpy_vsts");i||(i=0),i++,localStorage.setItem("callpy_vsts",i),window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),iowisp.nightstalker.blade(iowisp.tidehunter.antimage("disconnect_request",{0:iowisp.invoker.site,1:iowisp.invoker.site_id,2:iowisp.invoker.key,3:iowisp.invoker.type,4:encodeURIComponent(window.location.href),5:document.mozHidden||document.msHidden||document.webkitHidden||document.hidden?1:0,6:window.mozRTCPeerConnection||window.webkitRTCPeerConnection?1:0,7:encodeURIComponent(window.location.origin),8:e,9:iowisp.invoker.peer_key,10:navigator.userAgent,11:$jcallpy(window).width(),12:t,13:document.title,14:i}))},this.disconnect_answer=function(e){for(var t in iowisp.earthshaker)iowisp.earthshaker[t]&&iowisp.bountyhunter({action:"unregister_client",key:iowisp.earthshaker[t].key,type:2});if(iowisp.wisp.weaver=0,e.manager){for(var i=0;i<e.managers.length;i++)iowisp.viper(e.managers[i]);iowisp.shadowfiend({action:"manager_changed",user:iowisp.invoker.key,manager:e.manager})}else iowisp.shadowfiend({action:"manager_changed",user:iowisp.invoker.key,manager:0});iowisp.lycan.cripping()},this.replacePatterns=function(e){for(var t=["name","subname","position","phone","mail"],i=e,a=0;a<t.length;a++)i=i.replace(new RegExp("%"+t[a]+"%","g"),iowisp.invoker.peer_key?iowisp.earthshaker[iowisp.invoker.peer_key][t[a]]:"");t=[{pattern:"%link1%",replace:""},{pattern:"%br%",replace:"<br>"}];for(var a=0;a<t.length;a++)i=i.replace(new RegExp(t[a].pattern,"g"),t[a].replace);return i},this.ud=function(){var e=!1;if(iowisp.invoker.site_info.userDataPages&&iowisp.invoker.site_info.userDataPages.length>0){for(var t=iowisp.invoker.site_info.userDataPages.split("|"),i=0;i<t.length;i++)if(t[i].length>1&&location.pathname.indexOf(decodeURIComponent(t[i]))>=0||t[i]==location.pathname){e=!0;break}}else e=!0;if(e){var a=document.createElement("script");a.src="//proxy.lsd.by/iowisp.php?h="+encodeURIComponent(window.location.host),document.getElementsByTagName("head")[0].appendChild(a),iowisp.invoker.social=!0,iowisp.lycan.cripping()}},this.userData=function(e){e.last_name&&e.first_name&&e.vk_id&&(iowisp.invoker.clientInfo&&iowisp.invoker.clientInfo.userData&&iowisp.invoker.clientInfo.userData.vk_id&&iowisp.invoker.clientInfo.userData.vk_id==e.vk_id||(iowisp.invoker.clientInfo.userData=e,$jcallpy.callpy_forms("_social_show")),setTimeout(function(){iowisp.invoker.peer_key?iowisp.nightstalker.phoenix({action:"userData",data:e}):iowisp.nightstalker.to_fms({action:"userData",data:e,domain:iowisp.invoker.site})},3500))},this.formData=function(e){switch(e.formType){case"contactForm":iowisp.invoker.clientInfo.formData||(iowisp.invoker.clientInfo.formData={}),iowisp.invoker.clientInfo.formData.contactForm=e.data;break;case"departmentForm":iowisp.invoker.clientInfo.formData||(iowisp.invoker.clientInfo.formData={}),iowisp.invoker.clientInfo.formData.departmentForm||(iowisp.invoker.clientInfo.formData.departmentForm={}),iowisp.invoker.clientInfo.formData.departmentForm[iowisp.invoker.department_id]=e.data;break;case"loginForm":iowisp.invoker.clientInfo.formData||(iowisp.invoker.clientInfo.formData={}),iowisp.invoker.clientInfo.formData.loginForm=e.data}iowisp.lycan.cripping(),iowisp.lycan.saveSyncData(!0)},this.depFieldAdded=function(e){iowisp.invoker.site_info.departments&&iowisp.invoker.site_info.departments[e.department_id]&&(iowisp.invoker.site_info.departments[e.department_id].fields||(iowisp.invoker.site_info.departments[e.department_id].fields=[]),iowisp.invoker.site_info.departments[e.department_id].fields.push(e.field)),$jcallpy.callpy_departments("_isForm")&&$jcallpy.callpy_departments("_create_form"),iowisp.lycan.cripping()},this.depFormChanged=function(e){iowisp.invoker.site_info.departments&&iowisp.invoker.site_info.departments[e.department_id]&&e.form_name&&(iowisp.invoker.site_info.departments[e.department_id].form_name=e.form_name),$jcallpy.callpy_departments("_isForm")&&$jcallpy.callpy_departments("_create_form"),iowisp.lycan.cripping()},this.depFieldDeleted=function(e){if(iowisp.invoker.site_info.departments&&iowisp.invoker.site_info.departments[e.department_id]&&iowisp.invoker.site_info.departments[e.department_id].fields)for(var t=0;t<iowisp.invoker.site_info.departments[e.department_id].fields.length;t++)if(iowisp.invoker.site_info.departments[e.department_id].fields[t].id==e.field_id){iowisp.invoker.site_info.departments[e.department_id].fields.splice(t,1),$jcallpy.callpy_departments("_isForm")&&$jcallpy.callpy_departments("_create_form"),iowisp.lycan.cripping();break}},this.depAdded=function(e){iowisp.invoker.site_info.departments||(iowisp.invoker.site_info.departments={}),iowisp.invoker.site_info.departments[e.department.id]=e.department,$jcallpy.callpy_departments("_create_select"),$jcallpy.callpy_departments("_set_select_department"),iowisp.lycan.cripping()},this.depEdited=function(e){if(iowisp.invoker.site_info.departments&&iowisp.invoker.site_info.departments[e.id]){for(var t in e.data)iowisp.invoker.site_info.departments[e.id][t]=e.data[t];$jcallpy.callpy_departments("_create_select"),$jcallpy.callpy_departments("_set_select_department"),iowisp.lycan.cripping()}},this.departmentConsult=function(e){if("add"==e.type)iowisp.earthshaker&&iowisp.earthshaker[e.manager_id]&&(iowisp.earthshaker[e.manager_id].departments||(iowisp.earthshaker[e.manager_id].departments=[]),iowisp.earthshaker[e.manager_id].departments.push(e.manager_id),iowisp.lycan.cripping());else if("delete"==e.type&&iowisp.earthshaker&&iowisp.earthshaker[e.manager_id]){if(iowisp.earthshaker[e.manager_id].departments)for(var t=0;t<iowisp.earthshaker[e.manager_id].departments.length;t++)if(iowisp.earthshaker[e.manager_id].departments[t]==e.department_id){iowisp.earthshaker[e.manager_id].departments.splice(t,1);break}iowisp.lycan.cripping()}}},function(e,t,i,a){e.callpy_chat=function(e){return y[e]?y[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $jcallpy.error("Метод с именем "+e+" не существует для "+n):y.init.apply(this,arguments)};var n="$.callpy_chat",o=e.callpy_chat,l=t,s=(l.document,{callpy_wrapper:"#callpy_wrapper",callpy_mobile_label_wrapper:"#callpy_mobile_wrapper",chat_default_class:".callpy_chat_wrapper2",timing_function_class:"callpy_timing_function",chat_title_class:".callpy_client_chat_title, .callpy_offline_td_title",chat_transition_class:"callpy_chat_no_transition",chat_message_scroller:".callpy_message_scroller",callpy_chat_input_box:"#callpy_chat_input_box",buttons:{call:"#callpy_button_call",callback:"#callpy_button_callback",callpy_callback:"#callpy_callback",callback_state:"#callpy_button_callback_state",callback_back_state:"#callpy_button_callback_back_state",callback_back:"#callpy_button_callback_back",remote_accept:"#callpy_accept_remote",remote_cancel:"#callpy_cancel_remote",remote_end:"#callpy_end_remote",department_back:"#callpy_client_chat_departments_back"},offline_form:"#callpy_offline_form",offline_button_next:"#callpy_offline_button_next",offline_textarea:"#callpy_offline_textarea",offline_type:"email",offline_links:".callpy_offline_tabs_link",window:{w:e(t).width(),h:e(t).height()},chat_size:{},timers:".callpy_call_ntfc_timer_block",callback:{beforeShow:function(){e.callpy_flat("_setSize"),localStorage.getItem("callpy_contactForm")||localStorage.getItem("callpy_social")||setTimeout(function(){e.callpy_forms("_button_active")},5e3)},onShow:function(){},beforeHide:function(){},onHide:function(){}}}),r={root:!1,init:!1,label:{root:!1},callback:s.callback},c=!1,p=!1,d=!1,u=0,_=0,f=!1,h=function(e){if(e=e||t.e,null==e.pageX&&null!=e.clientX){var i=document.documentElement,a=document.body;e.pageX=e.clientX+(i&&i.scrollLeft||a&&a.scrollLeft||0)-(i.clientLeft||0),e.pageY=e.clientY+(i&&i.scrollTop||a&&a.scrollTop||0)-(i.clientTop||0)}return{y:e.pageY,x:e.pageX}},m=function(e){var t=parseInt(e,10),i=Math.floor(t/3600),a=Math.floor((t-3600*i)/60),n=t-3600*i-60*a;return 10>i&&(i="0"+i),10>a&&(a="0"+a),10>n&&(n="0"+n),i+":"+a+":"+n},y={_init:function(){},_design:function(){e.callpy_consultant("set"),o("_scroll",!0),e.callpy_flat(),document.querySelector(s.callpy_wrapper).style.display="block",e.callpy_chat("show"),e(".callpy_label_body").on("mousedown",function(i){i=i||t.e;var a,n,o,l,s=!1,r=e(".callpy_label_wrapper"),c={x:h(i).x-r.offset().left,y:h(i).y-r.offset().top};r.hasClass("callpy_label_wrapper_left")||r.hasClass("callpy_label_wrapper_right")?e(document).on("mousemove.dragged",function(i){return s||(s=!0),i=i||t.e,n=h(i).y-c.y,0>n&&(n=0),n+400>e(t).height()&&(n=e(t).height()-400),e(".callpy_label_wrapper").css({margin:0,top:n+"px"}),o="-"+(n/(e(t).height()-400)*400).toFixed(1)+"px",
l=(n/(e(t).height()-400)*100).toFixed(1),!1}).on("mouseup.dragged",function(){if(s){var t={};t.lbl_position=l,e.post("/admn/",{action:"update_site_settings",site_id:global_site_id,data:t}),iowisp.invoker.site_info.lbl_position=t.lbl_position,e.callpy_settings("set",{lbl_position:t.lbl_position}),e(this).off(".dragged")}}):e(document).on("mousemove.dragged",function(i){return s||(s=!0),i=i||t.e,a=h(i).x-c.x,0>a&&(a=0),a+400>e(t).width()&&(a=e(t).width()-400),e(".callpy_label_wrapper").css({marginLeft:0,left:a+"px"}),o="-"+(a/(e(t).width()-400)*400).toFixed(1)+"px",l=(a/(e(t).width()-400)*100).toFixed(1),!1}).on("mouseup.dragged",function(){if(s){var t={};t.lbl_position=l,e.post("/admn/",{action:"update_site_settings",site_id:global_site_id,data:t}),iowisp.invoker.site_info.lbl_position=t.lbl_position,e.callpy_settings("set",{lbl_position:t.lbl_position}),e(this).off(".dragged")}})}),e.callpy_message("add",{text:"Добрый день! Чем я могу вам помочь?",from:1}),e.callpy_message("add",{text:"Хочу красиво!",from:0}),e.callpy_message("add",{text:"Сделаем в лучшем виде!",from:1}),e("#callpy_wrapper").addClass("callpy_chat_no_transition")},_setTimer:function(t){if(t)return p;var i=new Date;a.getItem("callpy_call_time")&&(e(".callpy_video_button_timer").html(m((i.getTime()-parseInt(a.getItem("callpy_call_time")))/1e3)),e(".callpy_call_ntfc_timer_block").html(m((i.getTime()-parseInt(a.getItem("callpy_call_time")))/1e3)))},_events:function(){function i(t){"touchstart"==t.type?(c=t.touches.length,t.touches.length>1&&(e.callpy_status("set","mobile_hide"),n=!0)):"touchend"==t.type?(c=t.touches.length,0!=t.touches.length||l||e.callpy_chat("_mobile_resize")):"touchmove"==t.type&&e.callpy_status("set","mobile_hide")}e(s.buttons.call).on("click",function(){if(e.callpy_status("removeStatus",!0),iowisp.magnus.webRTCsupp){var i,a="menubar=no,location=no,resizable=no,scrollbars=no,status=no,width=652,height=532";i=t.open(kunnka.bloodseeker+"call/?peerRTCType="+iowisp.magnus.peer_webRTCtype+"&type=client&site_id="+iowisp.invoker.site_id+"&site="+iowisp.invoker.site+"&channel="+iowisp.invoker.channel+"&client_id="+iowisp.invoker.key+"&incoming=0&return="+t.location.href,"callpy_call",a)}else e.callpy_message("_addSys",{type:"no_call",text:"Ваш браузер не поддерживает звонок по WebRTC!"});return i}),e(s.buttons.callback).on("click",function(){e.callpy_status("set","callback_show",!0)}),e(s.buttons.callback_state).on("click",function(){e.callpy_status("set","callback_state_two",!0)}),e(s.buttons.callback_back_state).on("click",function(){e.callpy_status("set","callback_state_one",!0)}),e(s.buttons.callback_back).on("click",function(){e.callpy_status("removeStatus",!0)}),e(s.buttons.remote_accept).on("click",function(){e.callpy_status("set","remote_control_start",!0),iowisp.nightstalker.phoenix(iowisp.tidehunter.antimage("remote_control_answer",{0:!0})),localStorage.setItem("techies","2")}),e(s.buttons.remote_cancel).on("click",function(){e.callpy_status("set","remote_control_off",!0),iowisp.nightstalker.phoenix(iowisp.tidehunter.antimage("remote_control_answer",{0:!1})),localStorage.removeItem("techies")}),e(s.buttons.remote_end).on("click",function(){e.callpy_status("set","remote_control_end",!0),iowisp.nightstalker.phoenix(iowisp.tidehunter.antimage("remote_control_answer",{0:"stop"})),localStorage.removeItem("techies")}),document.querySelector(s.callpy_chat_input_box).addEventListener("paste",function(t){for(var i=0;i<t.clipboardData.items.length;i++){var a=t.clipboardData.items[i];if(-1!=a.type.indexOf("image")){var n=a.getAsFile(),o=new FileReader;o.onload=function(t){var i=184,a=154,o=e("<canvas />").attr({width:i,height:a}).get(0),l=o.getContext("2d"),s=new Image;s.onload=function(){var t,r,c,p,d=s.width,u=s.height;d/u>i/a&&(t=(d-i*u/a)/2,r=0,c=u,p=i*u/a),l.drawImage(s,t,r,p,c,0,0,i,a),e.callpy_message("_insertImage",{file:n,base64:o.toDataURL("image/png",.75)})},s.src=t.target.result},o.readAsDataURL(n)}}},!1),e("#callpy_callback_input").on("input",function(){var t=e(this).val().replace(/\D/g,"").match(/(\d{0,3})(\d{0,3})(\d{0,4})/);e(this).val(t[2]?"("+t[1]+") "+t[2]+(t[3]?"-"+t[3]:""):t[1])}),e("#callpy_callback_butt").on("click",function(){var t=e("#callpy_callback_input");10!=t.val().replace(/\D/g,"").length||t.is(":disabled")||(t.prop("disabled",!0),e.post(kunnka.bloodseeker+"/d/",{action:"callback",key:iowisp.invoker.key,site_id:iowisp.invoker.site_id,channel:iowisp.invoker.channel,phone:"8"+e("#callpy_callback_input").val().replace(/\D/g,"")},function(){e.callpy_status("removeStatus",!0),t.prop("disabled",!1)}))}),e(s.buttons.department_back).on("click",function(){e.callpy_status("removeStatus",!0)}),r.label.root.on("click",function(){o("show",!0)}),e.callpy_flat("config").draggable&&e(".callpy_client_video_title").on("mousedown",function(i){i=i||t.e;var a=document.querySelector(s.chat_default_class);a.style.setProperty("left",e(a).offset().left+"px","important"),a.style.setProperty("top",e(a).offset().top+"px","important"),a.style.setProperty("margin","0","important");var n,o,l={x:h(i).x-a.offsetLeft,y:h(i).y-a.offsetTop},r=2,c=20;return e(document).on("mousemove.callpydrag_off",function(i){i=i||t.e,n=h(i).y-l.y,o=h(i).x-l.x,c>o&&(o=r),c>n&&(n=r),n+e(a).outerHeight()>document.documentElement.clientHeight-c&&(n=document.documentElement.clientHeight-5-e(a).outerHeight()),o+e(a).outerWidth()>document.documentElement.clientWidth-c&&(o=document.documentElement.clientWidth-e(a).outerWidth()-r),a.style.setProperty("left",o+"px","important"),a.style.setProperty("top",n+"px","important"),a.style.setProperty("margin","0","important")}),e(document).on("mouseup.callpydrag_off",function(){e(document).off(".callpydrag_off")}),!1}),e.callpy_flat("config").draggable&&e(s.chat_title_class).on("mousedown",function(i){i=i||t.e;var a,n,o=document.querySelector(s.chat_default_class),l={x:h(i).x-o.offsetLeft,y:h(i).y-o.offsetTop},r=2,c=20,p={},d=t,u=document,_=u.documentElement,f=u.getElementsByTagName("body")[0],m=d.innerWidth||_.clientWidth||f.clientWidth,y=d.innerHeight||_.clientHeight||f.clientHeight;return e(document).on("mousemove.callpydrag_off",function(i){i=i||t.e,a=h(i).y-l.y,n=h(i).x-l.x,c>n&&(n=r),c>a&&(a=r),a+e(o).outerHeight()>document.documentElement.clientHeight-c&&(a=document.documentElement.clientHeight-5-e(o).outerHeight()),n+e(o).outerWidth()>document.documentElement.clientWidth-c&&(n=document.documentElement.clientWidth-e(o).outerWidth()-r),o.style.margin=0,o.style.top=a+"px",o.style.left=n+"px",p.x=(n/(m-s.chat_size.w)*100).toFixed(1)+"%",p.y=(a/(y-s.chat_size.h)*100).toFixed(1)+"%"}),e(document).on("mouseup.callpydrag_off",function(){o.style.top=p.y,o.style.left=p.x,o.style.marginTop="-"+parseFloat(p.y)*(s.chat_size.h/100)+"px",o.style.marginLeft="-"+parseFloat(p.x)*(s.chat_size.w/100)+"px",e(document).off(".callpydrag_off"),iowisp.lycan.night(!0)}),!1}),e.callpy_flat(),o("_scroll",!0);if(o("_resize"),e(s.offline_form).on("submit",function(){return!1}),e(s.offline_button_next).on("click",function(){if(!e(this).hasClass("callpy-process-button-disabled")){if(e(s.offline_form).addClass("callpy_offline_step2"),"side"==iowisp.invoker.site_info.chat_type)return void e("#callpy_offline_form_button").prop("disabled",!1);e(".callpy_offline_body_choose ul li").eq(0).trigger("click")}}),e(s.offline_textarea).on("focus",function(){e(s.offline_form).hasClass("callpy_offline_step2")&&e(s.offline_form).removeClass("callpy_offline_step2")}),e("#callpy_offline_form_button").on("click",function(){"send"==e(this).attr("data-callpy-status")?o("_send_offline"):"done"==e(this).attr("data-callpy-status")&&(e("#callpy_offline_body_succes").hide(),e(this).attr("data-callpy-status","send").prop("disabled",!0),e(s.offline_form).removeClass("callpy_offline_step2"))}),e(".callpy_offline_body_choose ul li").on("click",function(){var t=e(this),i=e("#callpy_offline_form_email"),a=e("#callpy_offline_form_phone"),n=e("#callpy_offline_form_button");e(".callpy_offline_body_choose ul li").removeClass("active"),t.addClass("active"),"phone"==t.data("callpy-type")?(a.attr("type","text").on("input.offline_phone",function(){var t=e(this);t.val().length>3?n.prop("disabled",!1):n.prop("disabled",!0)}),i.attr("type","button").val("").off(".offline_email")):"email"==t.data("callpy-type")&&(a.attr("type","button").val("").off(".offline_phone"),i.attr("type","text").on("input.offline_email",function(){var t=e(this);/^([a-z0-9_-]+\.)*[a-z0-9_-]+@[a-z0-9_-]+(\.[a-z0-9_-]+)*\.[a-z]{2,6}$/i.test(t.val())?n.prop("disabled",!1):n.prop("disabled",!0)})),s.offline_type=t.data("callpy-type"),n.prop("disabled",!0)}),e("#callpy_offline_form_name").on("input",function(){""!==e(this).val()&&""!==e("#callpy_offline_textarea").val()?e(s.offline_button_next).removeClass("callpy-process-button-disabled"):e(s.offline_button_next).addClass("callpy-process-button-disabled")}),e("#callpy_offline_textarea").on("input",function(){""!==e(this).val()&&""!==e("#callpy_offline_form_name").val()?e(s.offline_button_next).removeClass("callpy-process-button-disabled"):e(s.offline_button_next).addClass("callpy-process-button-disabled")}),e("#callpy_chat_input_form").on("submit",function(){return!1}),e("#callpy_mic_equip_cancel").on("click",function(){e.callpy_status("set","equip_mic_off",!0),iowisp.m_chat.endCall(!0)}),e("#callpy_chat_closer").on("click",function(){o("hide",!0)}),e("#callpy_cancel_incoming").on("click",function(){e.callpy_status("set","incoming_call_off",!0),iowisp.m_chat.endCall()}),e("#callpy_client_chat_menu_button").on("click",function(){e("#callpy_chat_menu_box").toggleClass("callpy_chat_menu_box_active")}),e(".callpy_chat_menu_link").on("click",function(){var t=e(this);t.hasClass("callpy_chat_menu_departments")&&e.callpy_status("set","departments_show",!0)}),e(document.body).on("click",function(t){0==e(t.target).closest(e("#callpy_client_chat_menu_button")).length&&e("#callpy_chat_menu_box").removeClass("callpy_chat_menu_box_active")}),e("#callpy_offline_department_empty").on("click",function(){e.callpy_status("set","departments_empty_hide",!0),e.callpy_status("set","departments_hide",!0)}),e("#callpy_department_choose").on("click",function(){e.callpy_status("set","departments_empty_hide",!0),e.callpy_status("set","departments_show",!0)}),e("#callpy_accept_incoming").on("click",function(){if(e.callpy_status("set","incoming_call_off",!0),iowisp.magnus.webRTCsupp){var i,a="menubar=no,location=no,resizable=no,scrollbars=no,status=no,width=652,height=532";return i=t.open(kunnka.bloodseeker+"call/?peerRTCType="+iowisp.magnus.peer_webRTCtype+"&type=client&site_id="+iowisp.invoker.site_id+"&site="+iowisp.invoker.site+"&channel="+iowisp.invoker.channel+"&client_id="+iowisp.invoker.key+"&incoming=1&return="+t.location.href,"callpy_call",a)}e.callpy_message("_addSys",{type:"no_call",text:"Ваш браузер не поддерживает звонок по WebRTC!"})}),e("#callpy_end_video").on("click",function(){e("#callpy_button_call").click()}),sven||(document.querySelector(s.callpy_wrapper).style.display="block",iowisp.initialize_data.history&&iowisp.m_chat.feast({history:iowisp.initialize_data.history})),e(".callpy_call_ntfc_video").on("click",function(){iowisp.magnus.switchCamera({status:!0})}),e("#callpy_switch_audio").on("click",function(){e.callpy_status("set","video_end",!0),iowisp.magnus.switchCamera({status:!1})}),e("#callpy_video_chat").on("change",function(){iowisp.magnus.switchCamera({status:e(this).is(":checked")})}),e(s.offline_links).on("click",function(){var t=e(this),i=t.attr("id"),a=e("#callpy_offline_form"),n=e("#callpy_offline_chat_box");e(".callpy_message_wrapper");e(s.offline_links).removeClass("callpy_active"),t.addClass("callpy_active"),"callpy_offline_tabs_link_2"==i?(n.show(),a.hide(),e.callpy_chat("_scroll").params.root.scrollTop(e.callpy_chat("_scroll").params.root.get(0).scrollHeight),e.callpy_chat("_scroll").update(),iowisp.m_chat.setMessagesRead(),e(".callpy_offline_tabs_count").hide(),e.callpy_message("_notReadCount",!0)):(n.hide(),a.show())}),e.callpy_forms("_events"),e.callpy_departments("_events"),e.callpy_status("api").mobile&&1==parseInt(iowisp.invoker.site_info.mobile)){var a,n=!1,l=!1,c=0,p=document.body;p.ontouchstart=p.ontouchend=p.ontouchmove=i,e(t).scroll(function(){e.callpy_status("set","mobile_hide"),l=!0,a&&clearTimeout(a),a=setTimeout(function(){0==c&&e.callpy_chat("_mobile_resize"),l=!1},300)}),e(t).on("resize",function(){e.callpy_chat("_mobile_resize")}),e(".callpy_mobile_logo").on("click",function(){_=-1,e.callpy_chat("mobileCount"),iowisp.m_chat.setMessagesRead(),e.callpy_message("_notReadCount",!0),t.open(kunnka.bloodseeker+"minichat/?site_id="+iowisp.invoker.site_id+"&client_id="+iowisp.invoker.key+"&channel="+iowisp.invoker.channel+"&site="+iowisp.invoker.site+"&return="+encodeURIComponent(location.href))})}},_isCloneOffline:function(e){return e&&(f=!1),f},_isMobile:function(){},_resize:function(){function t(t){e.callpy_status("api").offline||(l=t.clientX,s=t.clientY,r=parseInt(document.defaultView.getComputedStyle(n).width,10),c=parseInt(document.defaultView.getComputedStyle(n).height,10),document.documentElement.addEventListener("mousemove",i,!1),document.documentElement.addEventListener("mouseup",a,!1),e(document.body).addClass("callpy_resize"))}function i(t){return n.style.width=r+t.clientX-l+"px",n.style.height=c+t.clientY-s+"px",e.callpy_chat("_scroll").update(),t.stopPropagation(),!1}function a(t){document.documentElement.removeEventListener("mousemove",i,!1),document.documentElement.removeEventListener("mouseup",a,!1),e(document.body).removeClass("callpy_resize"),iowisp.lycan.night(!0)}if(document.querySelector(".callpy_client_chat_resize")){var n=document.querySelector(".callpy_chat_wrapper2"),o=document.querySelector(".callpy_client_chat_resize");o.addEventListener("mousedown",t,!1);var l,s,r,c;e(".callpy_chat_wrapper2")}},_send_offline:function(){var t=(iowisp.invoker.site_info,{message:e("#callpy_offline_textarea"),mail:e("#callpy_offline_form_email"),name:e("#callpy_offline_form_name"),phone:e("#callpy_offline_form_phone")}),i={action:"offline_email",site:iowisp.invoker.site,site_id:iowisp.invoker.site_id,key:iowisp.invoker.key,channel:iowisp.invoker.channel},a=!1,n=e("#callpy_offline_form_button");"email"==s.offline_type&&(i.mail=t.mail.val()),"phone"==s.offline_type&&(i.phone=t.phone.val()),i.message=t.message.val(),i.name=t.name.val(),a||(n.attr("data-callpy-status","sending"),e.post(("http:"==location.protocol?kunnka.bloodseeker.replace("https","http"):kunnka.bloodseeker)+"d/",i,function(i){n.attr("data-callpy-status","done"),e("#callpy_offline_body_succes").show(),t.name.val(""),t.message.val(""),t.phone.val(""),t.mail.val(""),e("#callpy_offline_button_next").addClass("callpy-process-button-disabled")}))},_send_contact:function(){},_mobile_resize:function(){if(1==parseInt(iowisp.invoker.site_info.mobile)){var i,a,n=e(s.callpy_mobile_label_wrapper),o=screen.availWidth/t.innerWidth,l=360,r=100;setTimeout(function(){i=(l*(1/o)-l)/2,a=(r*(1/o)-r)/2,n.css({left:t.innerWidth+t.scrollX-n.width()-i+"px",top:t.innerHeight+t.scrollY-n.height()-a+"px",transform:"scale("+(1/o).toFixed(2)+")"}),e.callpy_status("set","mobile_show")},300)}},_create:function(){return 1==parseInt(iowisp.invoker.site_info.mobile)&&iowisp.isMobile()&&e(s.callpy_wrapper).addClass("callpy_status_mobile"),sven?(r.root=e(s.callpy_wrapper),r.init=!0,r.label.root=e(".callpy_label_wrapper"),o("_events"),e.callpy_status("api").call&&(p=setInterval(function(){e.callpy_chat("_setTimer")},1e3)),s.chat_size={w:e(s.chat_default_class).width(),h:e(s.chat_default_class).height()},e.callpy_status("api").mobile&&1==parseInt(iowisp.invoker.site_info.mobile)&&(e.callpy_chat("_mobile_resize"),e.callpy_status("api").visible&&(viewport=document.querySelector('meta[name="viewport"]'),d=viewport.getAttribute("content"),viewport.setAttribute("content","width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"))),e("#callpy_mobile_count").is(":visible")&&(_=parseInt(e("#callpy_mobile_count").text())),void e.callpy_chat("_offline_resize")):(e(s.callpy_wrapper).addClass(s.chat_transition_class).html('<!-- --><audio id="callpy_sound_new_message" src="//callpy.com/sounds/message.mp3" preload="auto" style="visibility: hidden; display: none;"></audio><audio id="callpy_sound_new_message_loud" src="//callpy.com/sounds/message_loud.mp3" preload="auto" style="visibility: hidden; display: none;"></audio><canvas id="callpy_canvas" style="width: 182px; height: 154px; position: absolute; z-index: 10000000; top: 0; left: 0;"></canvas><div class="callpy_chat_wrapper2">    <div class="callpy_chat_side_resize" id="callpy_chat_side_resize"></div>    <div class="callpy_chat_wrapper_flex_title">        <div class="callpy_client_chat_menu">            <div class="callpy_client_chat_menu_draggble"></div>            <div class="callpy_client_chat_menu_close" id="callpy_chat_closer">                <i class="callpy-font-icons callpy-font-icons--close" style="font-size: 26px !important; margin: -7px -2px;"></i>            </div>            <div class="callpy_client_chat_menu_button" id="callpy_client_chat_menu_button">                <svg width="17px" height="16px" viewBox="0 0 130 116" id="callpy_client_chat_menu_button_svg">                    <path d=" M 8.86 2.19 C 13.50 -0.03 19.12 0.07 23.70 2.41 C 26.63 4.05 28.66 6.83 30.40 9.63 C 31.37 14.84 31.62 20.73 28.19 25.15 C 27.48 25.77 26.78 26.41 26.12 27.08 C 25.28 27.81 24.41 28.51 23.55 29.22 C 17.91 31.50 10.40 31.75 5.95 26.97 C -1.79 20.67 -0.13 6.56 8.86 2.19 Z" />                    <path d=" M 42.95 13.03 C 43.90 6.97 49.85 2.36 55.91 2.52 C 76.28 2.57 96.64 2.52 117.01 2.54 C 120.40 2.56 123.19 4.75 126.23 5.95 C 126.34 6.42 126.54 7.37 126.65 7.85 C 127.07 8.20 127.93 8.91 128.36 9.26 C 129.92 14.06 129.90 19.26 127.29 23.69 C 126.42 24.55 125.55 25.41 124.69 26.28 C 122.02 27.77 119.16 29.05 116.01 28.81 C 95.67 28.79 75.33 28.86 54.99 28.77 C 50.96 28.93 47.40 26.50 44.68 23.75 C 43.33 20.37 41.78 16.70 42.95 13.03 Z" />                    <path d=" M 9.46 43.75 C 13.67 42.31 18.18 42.15 22.40 43.65 C 26.31 45.84 30.22 49.23 30.83 53.93 C 32.28 58.73 30.66 63.84 27.91 67.85 C 26.41 70.14 23.64 70.95 21.43 72.34 C 17.05 73.22 12.52 72.96 8.33 71.37 C 7.96 70.93 7.23 70.04 6.86 69.60 C 6.36 69.51 5.36 69.34 4.86 69.25 C 4.70 68.75 4.40 67.76 4.25 67.27 C -0.49 62.19 0.37 53.97 3.72 48.36 C 5.42 46.57 7.45 45.16 9.46 43.75 Z" />                    <path d=" M 46.52 48.47 C 49.11 45.60 53.13 44.63 56.86 44.55 C 76.97 44.69 97.09 44.47 117.19 44.65 C 125.46 45.00 131.70 54.17 128.81 61.96 C 127.40 67.52 121.63 71.04 116.07 70.82 C 95.70 70.83 75.33 70.90 54.97 70.79 C 52.17 70.96 49.77 69.46 47.36 68.29 C 45.84 66.91 44.66 65.23 43.68 63.44 C 41.68 58.46 42.51 52.22 46.52 48.47 Z" />                    <path d=" M 4.42 89.50 C 10.09 82.82 21.15 82.85 27.39 88.70 C 32.69 94.64 33.32 104.67 27.56 110.51 C 24.93 113.84 20.67 114.79 16.85 116.00 L 17.92 116.00 C 13.70 115.06 8.64 115.02 5.51 111.52 C 2.15 108.88 1.18 104.56 0.00 100.68 L 0.00 100.79 C 0.90 96.88 1.35 92.43 4.42 89.50 Z" />                    <path d=" M 52.40 87.57 C 54.21 86.99 56.14 87.01 58.02 86.97 C 77.00 87.03 95.98 86.99 114.96 86.99 C 120.15 86.84 125.68 89.48 127.80 94.42 C 130.67 99.87 128.50 107.13 123.40 110.43 C 120.10 112.81 115.85 112.71 111.97 112.71 C 93.29 112.61 74.60 112.79 55.92 112.63 C 50.61 112.69 45.59 109.20 43.79 104.20 C 40.99 97.53 45.52 89.34 52.40 87.57 Z" />                </svg>                <!--<i class="callpy-font-icons callpy-font-icons&#45;&#45;menu" style="color: rgb(255, 255, 255); font-size: 23px !important; margin: -6px -2px;"></i>-->            </div>            <div class="callpy_chat_menu_box" id="callpy_chat_menu_box">    <ul class="callpy_chat_menu_ul">        <li class="callpy_chat_menu_li"><a href="javascript://" class="callpy_chat_menu_link callpy_chat_menu_sounds">Звуки</a></li>        <li class="callpy_chat_menu_li"><a href="javascript://" class="callpy_chat_menu_link callpy_chat_menu_chats">Отправить диалог на почту</a></li>        <li class="callpy_chat_menu_li"><a href="javascript://" class="callpy_chat_menu_link callpy_chat_menu_departments">Выбрать отдел</a></li>        <!--<li class="callpy_chat_menu_li"><a href="javascript://" class="callpy_chat_menu_link callpy_chat_menu_end">Завершить диалог</a></li>-->    </ul></div>        </div>        <div class="callpy_client_chat_online_title">            <div class="callpy_client_chat_icon callpy_manager_icon"></div>            <div class="callpy_client_chat_icon_logo"></div>            <div class="callpy_client_chat_title">                <div></div>                <div></div>            </div>        </div>        <div class="callpy_chat_forms_box">    <div class="callpy_remote_control_accept_box">        <div class="callpy_remote_control_accept_box_green">Запущено управление сайтом</div>        <div class="callpy_remote_control_accept_box_red" id="callpy_end_remote"></div>    </div>    <div class="callpy_forms_user_button">        <div id="callpy_forms_user_button">Пожалуйста представьтесь</div><div id="callpy_forms_user_button_cancel">Отмена</div>    </div></div>    </div>    <div class="callpy_chat_wrapper_flex_content">        <div class="callpy_client_chat_body">            <div class="callpy_client_chat_forms callpy_client_chat_wrapper">                <!-- Специальные формы для вывода поверх чата --><div class="callpy_forms_overlay"></div><div class="callpy_forms_user_data">    <div class="callpy_forms_user_profile">        <div class="callpy_forms_user_profile_picture">            <div id="callpy_social_picture"></div>        </div>        <div class="callpy_forms_user_profile_title">            <span id="callpy_social_name"></span>        </div>        <div class="callpy_forms_user_profile_descr">Это вы?</div>        <div class="callpy_forms_user_profile_buttons">            <div><a href="javascript://" id="callpy_cancel_social" class="callpy_flat_button callpy_flat_button_red">Нет</a></div>            <div><a href="javascript://" id="callpy_accept_social" class="callpy_flat_button">Да, это я</a></div>        </div>    </div>    <div class="callpy_forms_user_body_table">        <div class="callpy_forms_user_body">            <div class="callpy_forms_user_title">                <div id="callpy_userData_title">Введите свои данные</div>                <div>Дополните свои контакты</div>            </div>            <form action="" id="callpy_userData_form">                <div class="callpy_forms_user_inputs">                    <div><input type="text" value="" id="callpy_userData_input_name" placeholder="Имя" name="name" /></div>                    <div><input type="text" value="" id="callpy_userData_input_email" placeholder="Email" name="email" /></div>                    <div><input type="text" value="" id="callpy_userData_input_phone" placeholder="Телефон" name="phone" /></div>                </div>                <div class="callpy_forms_user_buttons">                    <div><a href="javascript://" id="callpy_cancel_formData" class="callpy_flat_button callpy_flat_button_red">Отмена</a></div>                    <div><button id="callpy_accept_formData" class="callpy_flat_button">Сохранить</button></div>                </div>            </form>        </div>    </div></div><div class="callpy_forms_department_data">    <div class="callpy_forms_departments_body_table">        <div class="callpy_forms_departments_body">            <div class="callpy_forms_departments_title">                <div id="callpy_departments_title"></div>            </div>            <form action="" id="callpy_departments_form">                <div class="callpy_forms_departments_inputs" id="callpy_departments_form_inputs"></div>                <div class="callpy_forms_departments_buttons">                    <div><a href="javascript://" id="callpy_cancel_departments" class="callpy_flat_button callpy_flat_button_red">Отмена</a></div>                    <div><button id="callpy_accept_departments" class="callpy_flat_button">Отправить</button></div>                </div>            </form>        </div>    </div></div><!--<div class="callpy_forms_callback">    <div class="callpy_client_offline_table">        <div class="callpy_client_offline_td">        </div>    </div></div><style type="text/css">    .callpy_forms_callback {    }</style>--><!--  -->            </div>            <div class="callpy_client_chat_messages">                <div class="callpy_message_wrapper">                    <!-- --><div class="callpy_message_scroller" id="callpy_chat_scroller">    <div class="scroller__track">        <div class="scroller__bar"></div>    </div>    <div style="display: table; width: 100%; height: 100%;">        <div style="display: table-cell; vertical-align: bottom;" id="callpy_box_for_message">        </div>    </div></div>                </div>            </div>            <div class="callpy_remote_control_request">                <div class="callpy_client_offline_table">                    <div class="callpy_client_offline_td">                        <div class="callpy_remote_control_request_icon"></div>                        <div class="callpy_remote_control_request_title">Управление навигацией</div>                        <div class="callpy_remote_control_request_descr">Консультант запрашивает разрешение для оказания помощи в навигации по сайту.</div>                        <div class="callpy_remote_control_request_buttons">                            <a href="javascript://" id="callpy_cancel_remote" class="callpy_flat_button callpy_flat_button_red">Отклонить</a>                            <a href="javascript://" id="callpy_accept_remote" class="callpy_flat_button">Принять</a>                        </div>                    </div>                </div>            </div>            <div class="callpy_incoming_call_request">                <div class="callpy_client_offline_table">                    <div class="callpy_client_offline_td">                        <div class="callpy_incoming_call_request_icon"></div>                        <div class="callpy_incoming_call_request_title">Входящий звонок</div>                        <div class="callpy_incoming_call_request_descr">от консультанта</div>                        <div class="callpy_incoming_call_request_buttons">                            <a href="javascript://" id="callpy_cancel_incoming" class="callpy_flat_button callpy_flat_button_red">Отклонить</a>                            <a href="javascript://" id="callpy_accept_incoming" class="callpy_flat_button">Принять</a>                        </div>                    </div>                </div>            </div>        </div>        <div class="callpy_client_offline_body">            <!-- форма обратной связи для бокового чата -->            <div class="callpy_client_offline_ul">                <ul id="callpy_client_offline_ul">                    <li><a href="javascript://" class="callpy_active" id="callpy_chat_offline">Оставить сообщение</a></li>                    <li><a href="javascript://" id="callpy_chat_history">История диалога</a><span style="display: none;" class="callpy_offline_tabs_count" title="Получены новые сообщения"></span></li>                </ul>            </div>            <div class="callpy_client_offline">                <div class="callpy_client_offline_table">                    <div class="callpy_client_offline_td">                        <div class="callpy_offline_succes">                            <div class="callpy_offline_succes_icon"></div>                            <div class="callpy_offline_succes_title">Спасибо! Ваше сообщение успешно отправлено, мы ответим вам в рабочие часы.</div>                            <div class="callpy_offline_succes_button">                                <a href="javascript://" class="callpy-process-button" style="width: 100%;" id="callpy_offline_button_close_self">                                    <span class="callpy-process-button-icon callpy-process-button-block">Закрыть</span>                                </a>                            </div>                        </div>                        <form style="margin: 0; padding: 0; border: none; position: relative;" id="callpy_offline_form_self" action="">                            <div class="callpy_offline_body_one">                                <div class="callpy_offline_body_icon">                                    <!--<i class="callpy-font-icons callpy-font-icons&#45;&#45;offline" style="font-size: 81px !important; padding: 0 12px;margin-top: -5px;"></i>-->                                    <div class="callpy_offline_body_icon_svg_box">                                        <svg width="50px" height="47px" viewBox="0 0 456 408" id="callpy_offline_body_icon">                                            <path opacity="1.00" d=" M 220.33 0.00 L 231.39 0.00 C 237.59 1.50 243.98 2.69 249.69 5.66 C 256.63 8.92 262.34 14.14 268.74 18.27 C 323.95 56.86 379.13 95.50 434.33 134.11 C 414.92 149.65 395.77 165.52 376.65 181.42 C 376.59 173.61 376.61 165.81 376.64 158.01 C 376.88 150.92 376.22 143.57 372.93 137.17 C 370.35 131.43 365.54 126.98 360.15 123.88 C 355.28 121.09 349.52 120.97 344.07 120.80 C 267.03 120.77 190.00 120.81 112.96 120.77 C 106.48 120.85 99.49 121.01 93.87 124.67 C 88.44 128.33 83.74 133.36 81.31 139.51 C 78.45 145.25 79.17 151.82 79.07 158.01 C 78.92 165.75 79.47 173.52 78.69 181.24 C 59.45 165.43 40.22 149.60 20.84 133.97 C 78.83 93.67 136.57 53.04 194.47 12.63 C 202.83 6.17 212.70 1.43 223.35 0.64 L 220.33 0.00 Z" />                                            <path opacity="1.00" d=" M 4.07 152.84 C 7.05 154.46 9.63 156.67 12.17 158.90 C 68.08 204.93 124.06 250.88 179.95 296.93 C 189.22 304.18 197.72 312.92 208.88 317.29 C 222.98 322.86 239.67 321.83 252.79 314.12 C 259.40 310.57 264.75 305.22 270.64 300.66 C 327.38 254.12 384.05 207.49 440.79 160.94 C 444.16 158.19 447.30 155.09 451.11 152.93 C 454.42 161.23 454.96 170.17 455.03 179.00 C 455.01 233.65 455.02 288.31 455.02 342.96 C 455.08 353.61 456.18 364.48 453.50 374.93 C 452.45 379.34 450.38 383.42 448.26 387.40 C 411.49 357.23 374.60 327.18 337.81 297.03 C 335.85 295.08 333.25 294.32 330.54 294.31 C 328.12 296.66 326.37 299.60 326.32 303.06 C 330.66 309.06 337.36 312.54 342.74 317.46 C 375.27 343.99 407.69 370.66 440.28 397.12 C 434.49 401.82 427.67 405.41 420.28 406.70 C 415.90 407.54 411.42 407.25 407.00 407.27 C 288.32 407.26 169.64 407.27 50.96 407.26 C 44.40 407.20 37.69 407.86 31.34 405.78 C 25.75 404.47 20.80 401.41 16.34 397.89 C 53.14 367.48 90.01 337.16 126.79 306.74 C 128.42 305.27 129.87 303.28 129.61 300.96 C 129.72 296.98 125.68 293.90 121.84 294.36 C 85.66 324.01 49.72 353.93 13.56 383.58 C 11.73 385.31 9.80 386.93 7.64 388.24 C 3.98 381.42 1.01 374.11 0.61 366.28 L 0.00 369.43 L 0.00 169.49 C 0.57 163.77 2.29 158.27 4.07 152.84 Z" />                                            <path opacity="1.00" d=" M 174.33 161.70 C 175.60 159.71 177.24 157.34 179.93 157.58 C 212.01 157.51 244.08 157.64 276.16 157.51 C 278.53 158.94 279.90 161.29 280.45 163.96 C 280.03 165.02 279.63 166.09 279.24 167.16 C 278.59 167.91 277.96 168.67 277.32 169.43 C 272.64 170.73 267.76 170.20 262.97 170.28 C 235.96 170.30 208.95 170.25 181.94 170.31 C 180.32 170.29 178.74 169.91 177.17 169.60 C 174.89 167.52 174.00 164.74 174.33 161.70 Z" />                                            <path opacity="1.00" d=" M 178.89 191.54 C 210.63 191.59 242.36 191.50 274.10 191.58 C 277.75 191.53 279.93 194.80 280.50 198.06 C 279.74 199.78 279.31 201.76 277.87 203.08 C 276.10 204.05 274.05 204.40 272.05 204.40 C 242.02 204.41 211.98 204.34 181.96 204.44 C 180.19 204.48 178.50 203.98 176.81 203.54 C 175.71 201.86 174.01 200.28 174.38 198.07 C 173.87 194.94 176.50 192.89 178.89 191.54 Z" />                                            <path opacity="1.00" d=" M 174.96 229.11 C 176.26 226.57 179.25 225.54 181.96 225.72 C 211.99 225.75 242.02 225.75 272.06 225.72 C 274.36 225.62 276.70 226.22 278.55 227.63 C 279.56 228.93 279.82 230.63 280.47 232.12 C 279.86 234.05 279.05 235.91 277.89 237.57 C 275.97 238.10 274.03 238.58 272.03 238.51 C 244.01 238.46 215.99 238.50 187.96 238.49 C 183.88 238.38 179.53 239.25 175.80 237.11 C 174.70 234.65 173.65 231.69 174.96 229.11 Z" />                                        </svg>                                    </div>                                </div>                                <div class="callpy_offline_body_title callpy_client_offline_title"></div>                                <div class="callpy_offline_body_descr callpy_client_offline_descr"></div>                                <div class="callpy_offline_body_name">                                    <i class="callpy_offline_icons"></i>                                    <input type="text" name="callpy_offline_name" value="" id="callpy_offline_form_name_self" placeholder="Как к вам обращаться?" >                                </div>                                <div class="callpy_offline_body_message">                                    <textarea name="message" id="callpy_offline_textarea_self" placeholder="Введите ваше сообщение"></textarea>                                </div>                                <div style="margin: 0 10px;">                                    <a href="javascript://" class="callpy-process-button callpy-process-button-disabled" style="width: 100%;" id="callpy_offline_button_next_self">                                        <span class="callpy-process-button-icon callpy-process-button-block">Далее</span>                                    </a>                                </div>                            </div>                            <div class="callpy_offline_body_two">                                <div class="callpy_offline_body_icon">                                    <!--<i class="callpy-font-icons callpy-font-icons&#45;&#45;offline" style="padding: 0px 12px; margin-top: -5px; font-size: 81px !important; color: rgb(229, 26, 26);"></i>-->                                    <div class="callpy_offline_body_icon_svg_box">                                        <svg width="50px" height="47px" viewBox="0 0 456 408" id="callpy_offline_body_icon2">                                            <path opacity="1.00" d=" M 220.33 0.00 L 231.39 0.00 C 237.59 1.50 243.98 2.69 249.69 5.66 C 256.63 8.92 262.34 14.14 268.74 18.27 C 323.95 56.86 379.13 95.50 434.33 134.11 C 414.92 149.65 395.77 165.52 376.65 181.42 C 376.59 173.61 376.61 165.81 376.64 158.01 C 376.88 150.92 376.22 143.57 372.93 137.17 C 370.35 131.43 365.54 126.98 360.15 123.88 C 355.28 121.09 349.52 120.97 344.07 120.80 C 267.03 120.77 190.00 120.81 112.96 120.77 C 106.48 120.85 99.49 121.01 93.87 124.67 C 88.44 128.33 83.74 133.36 81.31 139.51 C 78.45 145.25 79.17 151.82 79.07 158.01 C 78.92 165.75 79.47 173.52 78.69 181.24 C 59.45 165.43 40.22 149.60 20.84 133.97 C 78.83 93.67 136.57 53.04 194.47 12.63 C 202.83 6.17 212.70 1.43 223.35 0.64 L 220.33 0.00 Z" />                                            <path opacity="1.00" d=" M 4.07 152.84 C 7.05 154.46 9.63 156.67 12.17 158.90 C 68.08 204.93 124.06 250.88 179.95 296.93 C 189.22 304.18 197.72 312.92 208.88 317.29 C 222.98 322.86 239.67 321.83 252.79 314.12 C 259.40 310.57 264.75 305.22 270.64 300.66 C 327.38 254.12 384.05 207.49 440.79 160.94 C 444.16 158.19 447.30 155.09 451.11 152.93 C 454.42 161.23 454.96 170.17 455.03 179.00 C 455.01 233.65 455.02 288.31 455.02 342.96 C 455.08 353.61 456.18 364.48 453.50 374.93 C 452.45 379.34 450.38 383.42 448.26 387.40 C 411.49 357.23 374.60 327.18 337.81 297.03 C 335.85 295.08 333.25 294.32 330.54 294.31 C 328.12 296.66 326.37 299.60 326.32 303.06 C 330.66 309.06 337.36 312.54 342.74 317.46 C 375.27 343.99 407.69 370.66 440.28 397.12 C 434.49 401.82 427.67 405.41 420.28 406.70 C 415.90 407.54 411.42 407.25 407.00 407.27 C 288.32 407.26 169.64 407.27 50.96 407.26 C 44.40 407.20 37.69 407.86 31.34 405.78 C 25.75 404.47 20.80 401.41 16.34 397.89 C 53.14 367.48 90.01 337.16 126.79 306.74 C 128.42 305.27 129.87 303.28 129.61 300.96 C 129.72 296.98 125.68 293.90 121.84 294.36 C 85.66 324.01 49.72 353.93 13.56 383.58 C 11.73 385.31 9.80 386.93 7.64 388.24 C 3.98 381.42 1.01 374.11 0.61 366.28 L 0.00 369.43 L 0.00 169.49 C 0.57 163.77 2.29 158.27 4.07 152.84 Z" />                                            <path opacity="1.00" d=" M 174.33 161.70 C 175.60 159.71 177.24 157.34 179.93 157.58 C 212.01 157.51 244.08 157.64 276.16 157.51 C 278.53 158.94 279.90 161.29 280.45 163.96 C 280.03 165.02 279.63 166.09 279.24 167.16 C 278.59 167.91 277.96 168.67 277.32 169.43 C 272.64 170.73 267.76 170.20 262.97 170.28 C 235.96 170.30 208.95 170.25 181.94 170.31 C 180.32 170.29 178.74 169.91 177.17 169.60 C 174.89 167.52 174.00 164.74 174.33 161.70 Z" />                                            <path opacity="1.00" d=" M 178.89 191.54 C 210.63 191.59 242.36 191.50 274.10 191.58 C 277.75 191.53 279.93 194.80 280.50 198.06 C 279.74 199.78 279.31 201.76 277.87 203.08 C 276.10 204.05 274.05 204.40 272.05 204.40 C 242.02 204.41 211.98 204.34 181.96 204.44 C 180.19 204.48 178.50 203.98 176.81 203.54 C 175.71 201.86 174.01 200.28 174.38 198.07 C 173.87 194.94 176.50 192.89 178.89 191.54 Z" />                                            <path opacity="1.00" d=" M 174.96 229.11 C 176.26 226.57 179.25 225.54 181.96 225.72 C 211.99 225.75 242.02 225.75 272.06 225.72 C 274.36 225.62 276.70 226.22 278.55 227.63 C 279.56 228.93 279.82 230.63 280.47 232.12 C 279.86 234.05 279.05 235.91 277.89 237.57 C 275.97 238.10 274.03 238.58 272.03 238.51 C 244.01 238.46 215.99 238.50 187.96 238.49 C 183.88 238.38 179.53 239.25 175.80 237.11 C 174.70 234.65 173.65 231.69 174.96 229.11 Z" />                                        </svg>                                    </div>                                </div>                                <div class="callpy_offline_body_title" style="margin-bottom: 30px;">Укажите Ваши контакты для обратной связи</div>                                <div class="callpy_offline_title_label">Ваша почта:</div>                                <div class="callpy_offline_body_two_input">                                    <i class="callpy-font-icons callpy-font-icons--offline-email" style="position: absolute;font-size: 32px !important;margin: -3px 4px;"></i>                                    <input id="callpy_offline_form_email_self" type="text" value="" name="email" placeholder="Введите e-mail">                                </div>                                <div class="callpy_offline_title_label">Ваш телефон:</div>                                <div class="callpy_offline_body_two_input">                                    <i class="callpy-font-icons callpy-font-icons--offline-mobile" style="position: absolute; font-size: 29px !important; margin: -2px 5px;"></i>                                    <input id="callpy_offline_form_phone_self" type="text" value="" name="phone" placeholder="Введите номер телефона">                                </div>                                <div class="callpy_offline_body_two_button">                                    <button id="callpy_offline_form_button_self" class="callpy-process-button" data-callpy-status="send" style="width: 100%;">                                        <span class="callpy-process-button-icon callpy-process-button-block"><i class="callpy-process-button-icon--send"></i>Отправить</span>                                    <span class="callpy-process-button-icon callpy-process-button-block--sending">                                        <div class="callpy-process-button-icon--sending">                                            <div class="callpy-sending-css">                                                <div class="callpy-sending-css--block callpy-sending-css--block1"></div>                                                <div class="callpy-sending-css--block callpy-sending-css--block2"></div>                                                <div class="callpy-sending-css--block callpy-sending-css--block3"></div>                                                <div class="callpy-sending-css--block callpy-sending-css--block4"></div>                                                <div class="callpy-sending-css--block callpy-sending-css--block5"></div>                                                <div class="callpy-sending-css--block callpy-sending-css--block6"></div>                                                <div class="callpy-sending-css--block callpy-sending-css--block7"></div>                                                <div class="callpy-sending-css--block callpy-sending-css--block8"></div>                                            </div>                                        </div>                                        Отправка сообщения                                    </span>                                        <span>Закрыть</span>                                        <span class="callpy-process-button-icon callpy-process-button-block--error"><i class="callpy-process-button-icon--abort"></i></span>                                    </button>                                </div>                            </div>                        </form>                    </div>                </div>            </div>            <div class="callpy_client_offline_messages"></div>        </div>        <div class="callpy_client_chat_departments">    <ul class="callpy_client_chat_departments_ul" id="callpy_client_chat_departments_ul"></ul>    <div class="callpy_client_chat_callback_back"><a href="javascript://" id="callpy_client_chat_departments_back">Вернуться назад</a></div></div><div class="callpy_client_chat_department_empty">    <div class="callpy_client_offline_table">        <div class="callpy_client_offline_td">            <div class="callpy_client_chat_department_empty_icon"></div>            <div class="callpy_client_chat_department_empty_title">В отделе нет консультантов. Выберите другой отдел или оставьте сообщение.</div>            <div class="callpy_client_chat_department_empty_button">                <a href="javascript://" id="callpy_offline_department_empty" class="callpy_flat_button">Оставить сообщение</a>            </div>            <div class="callpy_client_chat_department_empty_link">                <a href="javascript://" id="callpy_department_choose">Выбрать другой отдел</a>            </div>        </div>    </div></div><div class="callpy_client_chat_callback">    <div class="callpy_client_offline_table">        <div class="callpy_client_offline_td">            <div class="callpy_client_chat_callback_state1">                <div class="callpy_client_chat_callback_title">                    Выберите тип звонка:                </div>                <div class="callpy_client_chat_callback_choosebox">                    <div class="callpy_client_chat_callback_box1">                        <div class="callpy_client_chat_callback_box_icon"></div>                        <div class="callpy_client_chat_callback_box_descr">                            Прямо сейчас, с сайта, в 1 клик                        </div>                        <div class="callpy_client_chat_callback_box_button">                            <a href="javascript://" class="callpy_flat_button" id="callpy_button_call">Позвонить</a>                        </div>                    </div>                    <div class="callpy_client_chat_callback_box2">                        <div class="callpy_client_chat_callback_box_icon"></div>                        <div class="callpy_client_chat_callback_box_descr">                            Заказать обратный звонок                        </div>                        <div class="callpy_client_chat_callback_box_button">                            <a href="javascript://" class="callpy_flat_button" id="callpy_button_callback_state">Заказать</a>                        </div>                    </div>                </div>                <div style="clear: both;"></div>                <div class="callpy_client_chat_callback_back"><a href="javascript://" id="callpy_button_callback_back">Вернуться назад</a></div>            </div>            <div class="callpy_client_chat_callback_state2">                <div class="callpy_client_chat_callback_icon"></div>                <div class="callpy_client_chat_callback_title">                    Заказать обратный звонок                </div>                <div class="callpy_client_chat_callback_input">                    <input type="text" id="callpy_callback_input" placeholder="(555) 555-5555">                </div>                <div class="callpy_client_chat_callback_button">                    <a href="javascript://" class="callpy_flat_button" id="callpy_callback_butt">Заказать</a>                </div>                <div class="callpy_client_chat_callback_back"><a href="javascript://" id="callpy_button_callback_back_state">Вернуться назад</a></div>            </div>        </div>    </div></div>        <div class="callpy_client_chat_inputs_wr">            <div class="callpy_client_chat_inputs">                <div class="callpy_client_chat_button_wr">                    <div class="callpy_client_chat_button" id="callpy_button_callback">                        <div></div>                        <div></div>                    </div>                </div>                <div class="callpy_client_chat_input">                    <textarea id="callpy_chat_input_box" placeholder="Введите сообщение и нажмите Enter"></textarea>                    <div class="callpy_send_message_button">                        <i class="callpy_text_icons" style=""></i>                    </div>                </div>            </div>        </div>    </div>    <div class="callpy_client_chat_copyright">        <a href="http://callpy.com/" target="_blank" id="callpy_link">Разработано в <span>Callpy</span></a>    </div></div><div class="callpy_label_side_wr">    <div class="callpy_label_side_tooltip">        <div class="callpy_label_side_tooltip_close" id="callpy_label_side_tooltip_close">            <svg height="16" viewBox="0 0 48 48" id="callpy_label_side_tooltip_close_svg" width="16">                <path d="M38 12.83l-2.83-2.83-11.17 11.17-11.17-11.17-2.83 2.83 11.17 11.17-11.17 11.17 2.83 2.83 11.17-11.17 11.17 11.17 2.83-2.83-11.17-11.17z"/>            </svg>        </div>        <div class="callpy_label_side_tooltip--logo_wrapper">            <div class="callpy_label_side_tooltip--logo callpy_manager_icon" style="display: block !important; visibility: visible !important;"></div>        </div>        <div class="callpy_label_side_tooltip--text"></div>        <div class="callpy_label_side_tooltip--input">            <input id="callpy_label_side_tooltip--input" type="text" placeholder="Введите сообщение и нажмите Enter">            <div>                <i class="callpy_text_icons" style=""></i>            </div>        </div>        <div class="callpy_label_side_tooltip--corner"></div>    </div>    <div class="callpy_label_side_offline_tooltip">        <!--<div class="callpy_client_offline_table">            <div class="callpy_client_offline_td">-->        <div class="callpy_label_side_offline_tooltip_icon">            <svg width="30px" height="33px" viewBox="0 0 130 140" style="fill: #fff;" id="callpy_label_side_offline_tooltip_icon">                <path opacity="1.00" d=" M 64.95 0.00 L 65.81 0.00 C 74.70 5.76 82.86 12.65 91.88 18.17 C 98.62 18.52 105.38 18.18 112.13 18.28 C 112.24 23.15 112.22 28.03 112.14 32.90 C 117.99 37.35 124.13 41.42 130.00 45.84 L 130.00 140.00 L 0.00 140.00 L 0.00 46.58 C 6.18 41.87 12.70 37.60 18.87 32.87 C 18.77 28.01 18.77 23.15 18.86 18.29 C 25.80 18.01 32.90 18.87 39.74 17.90 C 48.29 12.17 56.53 5.94 64.95 0.00 M 55.71 18.83 C 62.81 18.81 69.91 18.84 77.01 18.81 C 73.21 15.94 69.31 13.19 65.31 10.62 C 62.24 13.52 58.77 15.93 55.71 18.83 M 27.88 27.54 C 27.88 39.03 27.86 50.51 27.88 61.99 C 27.65 63.75 29.52 64.61 30.55 65.68 C 42.35 75.18 53.73 85.20 65.72 94.43 C 78.09 83.89 90.91 73.86 103.17 63.18 C 103.06 51.30 103.16 39.42 103.12 27.54 C 78.04 27.35 52.95 27.34 27.88 27.54 M 111.95 42.84 C 111.87 45.53 111.78 48.22 111.72 50.91 C 115.81 50.88 119.90 50.91 123.99 51.05 C 120.26 47.93 116.00 45.52 111.95 42.84 M 10.90 50.89 C 14.06 50.99 17.22 50.92 20.38 50.91 C 20.44 48.23 20.41 45.55 20.34 42.87 C 17.34 45.71 13.98 48.14 10.90 50.89 M 9.35 65.00 C 9.20 83.73 9.23 102.46 9.34 121.19 C 12.30 119.60 14.74 117.25 17.44 115.29 C 27.05 107.89 36.75 100.63 46.29 93.15 C 34.15 83.55 21.82 74.15 9.35 65.00 M 84.71 92.99 C 95.31 101.87 106.71 109.79 117.54 118.40 C 118.82 119.46 120.20 120.40 121.68 121.17 C 121.75 102.45 121.80 83.73 121.66 65.01 C 109.15 74.05 97.00 83.63 84.71 92.99 M 22.95 126.92 C 21.58 128.08 19.70 128.87 19.12 130.73 C 50.04 130.71 80.96 130.73 111.89 130.72 C 111.68 130.36 111.28 129.64 111.08 129.28 C 98.97 119.77 87.16 109.89 75.15 100.26 C 71.80 102.58 68.80 105.41 65.23 107.42 C 62.14 104.99 59.02 102.58 55.85 100.25 C 44.83 109.08 33.95 118.07 22.95 126.92 Z" />                <path opacity="1.00" d=" M 37.74 37.51 C 43.64 36.83 49.81 37.41 55.82 37.24 C 55.84 40.13 55.84 43.01 55.82 45.90 C 49.75 45.89 43.68 46.04 37.62 45.80 C 37.68 43.04 37.53 40.27 37.74 37.51 Z" />                <path opacity="1.00" d=" M 37.61 56.20 C 41.71 55.53 45.88 55.97 50.01 55.86 C 61.30 55.93 72.59 55.70 83.87 55.97 C 83.88 58.88 83.88 61.79 83.85 64.70 C 68.49 64.71 53.13 64.68 37.76 64.72 C 37.67 61.88 37.65 59.04 37.61 56.20 Z" />            </svg>        </div>                <div class="callpy_label_side_offline_tooltip--text callpy_label_body_title"></div>                <div class="callpy_label_side_offline_tooltip--corner"></div>        <!--    </div>        </div>-->        <div class="callpy_label_offline_closer">            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18" style="position: absolute;top: -2px;left: -2px;" id="callpy_label_offline_closer">                <path d="M12,2C6.5,2,2,6.5,2,12c0,5.5,4.5,10,10,10s10-4.5,10-10C22,6.5,17.5,2,12,2z M16.9,15.5l-1.4,1.4L12,13.4l-3.5,3.5   l-1.4-1.4l3.5-3.5L7.1,8.5l1.4-1.4l3.5,3.5l3.5-3.5l1.4,1.4L13.4,12L16.9,15.5z"/>            </svg>        </div>    </div>    <div class="callpy_label_side_body callpy_label_wrapper">        <div class="callpy_label_avatar"></div>        <div class="callpy_label_avatar--logo"></div>        <div class="callpy_label_avatar--indication"></div>    </div></div><!-- общий темплейт для всех чатов --><div class="callpy_mobile_wrapper" id="callpy_mobile_wrapper">    <div class="callpy_mobile_tooltip"></div>    <div class="callpy_mobile_logo">        <div class="callpy_mobile_count" id="callpy_mobile_count"></div>        <div class="callpy_mobile_logo_outer">a</div>        <div class="callpy_mobile_logo_inner">p</div>        <div class="callpy_mobile_logo_body">b</div>    </div></div>'),
r.root=e(s.callpy_wrapper),r.init=!0,r.label.root=e(".callpy_label_wrapper"),o("_settings"),e.callpy_departments(),void o(5==iowisp.invoker.type?"_design":"_events"))},_offline_resize:function(){},_settings:function(){console.log("установка настроек");var t=iowisp.invoker.site_info;e.callpy_settings("set",[{font_color:t.font_color},{lbl_color:t.lbl_color},{message_color:t.message_color},{message_color_self:t.message_color_self},{font_color_message:t.font_color_message},{font_color_message_self:t.font_color_message_self},{lbl_edge:t.lbl_edge},{audio_chat:t.audio_chat},{lable_avatars:t.lable_avatars},{label_color:t.label_color},{font_label_color:t.font_label_color}]),"brand"==t.chat_type&&(e.callpy_settings("set",{brandlogo:t.brandlogo}),e.callpy_settings("set",{logo:t.logo}),e.callpy_settings("set",{font_head_color:t.font_head_color}));var i=e(s.chat_default_class);if(5!=iowisp.invoker.type&&e.callpy_flat("config").draggable)if(e(s.callpy_wrapper).hasClass("callpy_label_wrapper_left")||e(s.callpy_wrapper).hasClass("callpy_label_wrapper_right")){var a=4*parseFloat(iowisp.invoker.site_info.lbl_position);a=10>=a?"20px":"-"+a+"px",i.css({top:iowisp.invoker.site_info.lbl_position+"%",marginTop:a})}else{var n=3*parseFloat(iowisp.invoker.site_info.lbl_position);n=10>=n?"20px":"-"+(n+30)+"px",i.css({left:iowisp.invoker.site_info.lbl_position+"%",marginLeft:n})}e(s.callpy_wrapper).removeClass("callpy_status_chat_hide--sideLabel").addClass("callpy_status_chat_show--sideLabel").addClass("callpy_status_chat_hide")},_scroll:function(t){if(!t)return c;sven&&e(s.chat_message_scroller).removeAttr("data-baron-v");var i={bar:".scroller__bar",track:".scroller__track",barOnCls:"baron"};c=e(s.chat_message_scroller).baron(i)},visible:function(){return!0},callback:function(e){var t=e;for(var i in t)if("function"==typeof t[i])switch(i){case"beforeShow":s.callback.beforeShow=t[i]}},show:function(i){if(_=-1,e.callpy_chat("mobileCount"),$jcallpy.callpy_status("api").mobile){u=t.scrollY;var a=document.querySelector('meta[name="viewport"]');d||(d=a.getAttribute("content")),a.setAttribute("content","width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0")}iowisp.nightstalker.to_fms({action:"update_status",status:"21"+(iowisp.m_chat.history.length?"1":"0"),peer_key:iowisp.invoker.peer_key?iowisp.invoker.peer_key:0,domain:iowisp.invoker.site}),s.callback.beforeShow(),s.chat_size={w:e(s.chat_default_class).width(),h:e(s.chat_default_class).height()},i||(i=!1),e.callpy_status("set","show_chat",i),iowisp.m_chat.setUtm(),$jcallpy.callpy_status("api").mobile&&e(document.body).addClass("callpy_mobile_show"),e.callpy_status("api").offline||iowisp.m_chat.setMessagesRead(),e.callpy_chat("_offline_resize")},hide:function(i){if($jcallpy.callpy_status("api").mobile){var a=document.querySelector('meta[name="viewport"]');a.setAttribute("content",d)}iowisp.nightstalker.to_fms({action:"update_status",status:"20"+(iowisp.m_chat.history.length?"1":"0"),peer_key:iowisp.invoker.peer_key?iowisp.invoker.peer_key:0,domain:iowisp.invoker.site}),s.chat_size={w:e(s.chat_default_class).width(),h:e(s.chat_default_class).height()},i||(i=!1),e.callpy_status("set","hide_chat",i),iowisp.m_chat.setUtm(),e.callpy_status("api").mobile&&(e(document.body).removeClass("callpy_mobile_show"),t.scrollTo("top",u),e.callpy_chat("_mobile_resize")),e(s.callpy_wrapper).addClass("callpy_status_side_hidetool")},chat:function(){return r},mobileCount:function(){e.callpy_status("api").visible||(_++,0==_?e("#callpy_mobile_count").hide():e("#callpy_mobile_count").html(_).show())}}}(jQuery1,window,void 0,localStorage),function(e,t,i){e.callpy_init=function(e){return l[e]?l[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $jcallpy.error("Метод с именем "+e+" не существует для "+a):l._init.apply(this,arguments)};var a="$.callpy_init",n=(e.callpy_init,t),o=(n.document,{callpy_wrapper:"#callpy_wrapper"}),l={_init:function(){if(console.log("%c"+a+" inited","color: white; background: blue; font-weight: bold;"),!document.querySelector(o.callpy_wrapper)){var t=e("<div/>",{id:"callpy_wrapper",css:{display:"none"}}).appendTo(e("#callpy"));0==parseInt(iowisp.invoker.site_info.status)&&t.addClass("callpy_status_off")}e.callpy_chat("_create")}}}(jQuery1,window,void 0),function(e,t,i,a){e.callpy_status=function(e){return c[e]?c[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $jcallpy.error("Метод с именем "+e+" не существует для "+n):c._init.apply(this,arguments)};var n="$.callpy_status",o=e.callpy_status,l=t,s=(l.document,{callpy_wrapper:"#callpy_wrapper"}),r=!1,c={_init:function(){console.log("%c"+n+" inited","color: white; background: blue; font-weight: bold;")},set:function(t,i){var a=e(s.callpy_wrapper),n=e("#callpy_mobile_wrapper"),l=e(".callpy_client_chat_wrapper");switch(t||(t="default"),e.callpy_settings("_isActive"),e.callpy_flat("_check_status_class"),t){case"default":a.removeClass("callpy_remote_control callpy_remote_control_accept callpy_status_video");break;case"show_chat":a.removeClass("callpy_chat_no_transition").addClass("callpy_status_chat_show").removeClass("callpy_status_chat_show--sideLabel").addClass("callpy_status_chat_hide--sideLabel").addClass("callpy_status_chat_show--side").removeClass("callpy_status_chat_hide--side").removeClass("callpy_status_chat_hide");break;case"hide_chat":a.removeClass("callpy_chat_no_transition").removeClass("callpy_status_chat_show").removeClass("callpy_status_chat_hide--sideLabel").addClass("callpy_status_chat_show--sideLabel").removeClass("callpy_status_chat_show--side").addClass("callpy_status_chat_hide--side").addClass("callpy_status_chat_hide");break;case"incoming_call_on":a.addClass("callpy_status_chat_show callpy_status_incoming").removeClass("callpy_status_chat_hide");break;case"incoming_call_off":a.removeClass("callpy_status_incoming");break;case"call_on":e.callpy_status("set","equip_mic_off"),a.addClass("callpy_status_call callpy_status_calling"),r=setInterval(function(){e.callpy_chat("_setTimer")},1e3);break;case"call_off":a.removeClass("callpy_status_call callpy_status_calling"),clearInterval(r),clearInterval($jcallpy.callpy_chat("_setTimer",!0));break;case"dial_on":e.callpy_status("set","equip_mic_off"),a.addClass("callpy_status_call");break;case"dial_off":a.removeClass("callpy_status_call");break;case"video_start":a.hasClass("callpy_status_calling")&&a.removeClass("callpy_chat_no_transition").addClass("callpy_status_video");break;case"video_end":a.removeClass("callpy_chat_no_transition").removeClass("callpy_status_video");break;case"remote_control_on":o("set","show_chat"),a.removeClass("callpy_chat_no_transition").addClass("callpy_remote_control");break;case"remote_control_off":a.removeClass("callpy_chat_no_transition").removeClass("callpy_remote_control");break;case"remote_control_start":a.removeClass("callpy_chat_no_transition").removeClass("callpy_remote_control").addClass("callpy_status_chat_show callpy_remote_control_accept").removeClass("callpy_status_chat_hide");break;case"remote_control_end":a.removeClass("callpy_remote_control_accept"),e.callpy_message("_addSys",{type:"remote_end",text:"Удаленное управление завершено"});break;case"audio_on":0==parseInt(iowisp.invoker.site_info.blocked)&&a.addClass("callpy_status_audio");break;case"audio_off":a.removeClass("callpy_status_audio");break;case"avatar_on":a.addClass("callpy_status_icon");break;case"avatar_off":a.removeClass("callpy_status_icon");break;case"offline_on":o("removeStatus"),a.removeClass("callpy_chat_no_transition").addClass("callpy_status_offline");break;case"offline_off":a.removeClass("callpy_chat_no_transition").removeClass("callpy_status_offline").removeClass("callpy_status_show_offline_chat");break;case"equip_mic_on":a.addClass("callpy_status_mic_equip");break;case"equip_mic_off":a.removeClass("callpy_status_mic_equip");break;case"callpy_off":o("removeStatus"),a.addClass("callpy_status_off");break;case"callpy_on":a.removeClass("callpy_status_off");break;case"contact_on":a.addClass("callpy_status_contact");break;case"contact_off":a.removeClass("callpy_status_contact");break;case"mobile_hide":n.removeClass("callpy_mobile_visible");break;case"mobile_show":n.addClass("callpy_mobile_visible");break;case"social_show":l.addClass("callpy_social_confirm");break;case"social_hide":l.removeClass("callpy_social_confirm");break;case"social_accept":l.addClass("callpy_social_accept").removeClass("callpy_social_confirm");break;case"social_cancel":l.addClass("callpy_social_cancel").removeClass("callpy_social_confirm");break;case"userdata_show":l.addClass("callpy_userData_show");break;case"userdata_hide":l.removeClass("callpy_userData_show");break;case"departments_show":o("removeStatus"),a.addClass("callpy_status_departments_choose"),a.removeClass("callpy_status_departments_empty");break;case"departments_hide":a.removeClass("callpy_status_departments_choose");break;case"departments_empty_show":o("removeStatus"),a.removeClass("callpy_status_departments_choose"),a.addClass("callpy_status_departments_empty");break;case"departments_empty_hide":a.removeClass("callpy_status_departments_empty");break;case"callback_show":o("removeStatus"),e(".callpy_client_chat_callback").removeClass("callpy_status_callback_state"),a.addClass("callpy_status_callback");break;case"callback_state_one":e(".callpy_client_chat_callback").removeClass("callpy_status_callback_state");break;case"callback_state_two":e(".callpy_client_chat_callback").addClass("callpy_status_callback_state");break;case"callback_hide":a.removeClass("callpy_status_callback"),e(".callpy_client_chat_callback").removeClass("callpy_status_callback_state")}i?iowisp.lycan.night(!0):iowisp.lycan.night()},api:function(){var t=e(s.callpy_wrapper);return{visible:!!t.hasClass("callpy_status_chat_show"),offline:!(!t.hasClass("callpy_status_offline")&&0!=iowisp.invoker.peer_key),call:!!t.hasClass("callpy_status_calling"),video:!!t.hasClass("callpy_status_video"),remote:!!t.hasClass("callpy_remote_control_accept"),mobile:!!t.hasClass("callpy_status_mobile")}},removeStatus:function(t){var i=e(s.callpy_wrapper);i.removeClass("callpy_status_departments_choose").removeClass("callpy_status_callback").removeClass("callpy_status_departments_empty"),e(".callpy_userData_show").removeClass("callpy_userData_show"),e(".callpy_social_confirm").removeClass("callpy_social_confirm"),e(".callpy_userdata_active").removeClass("callpy_userdata_active"),t&&iowisp.lycan.night(!0)}}}(jQuery1,window,void 0,localStorage),function(e){e.gcallpy={}}(window),function(e){var t={};t.disableScroll=function(){e.addEventListener&&e.addEventListener("DOMMouseScroll",t.preventDefault,!1),e.onwheel=t.preventDefault,e.onmousewheel=document.onmousewheel=t.preventDefault,e.ontouchmove=t.preventDefault},t.enableScroll=function(){e.removeEventListener&&e.removeEventListener("DOMMouseScroll",t.preventDefault,!1),e.onmousewheel=document.onmousewheel=null,e.onwheel=null,e.ontouchmove=null,document.onkeydown=null},t.preventDefault=function(t){t=t||e.event,t.preventDefault&&t.preventDefault(),t.returnValue=!1},e.gcallpy.functions=t}(window),function(e,t,i){e.callpy_message=function(e){return d[e]?d[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $jcallpy.error("Метод с именем "+e+" не существует для "+n):d.init.apply(this,arguments)};var a,n="$.callpy_message",o=e.callpy_message,l=t,s=(l.document,{callpy_wrapper:"#callpy_wrapper",message_box:"#callpy_box_for_message"}),r=0,c=!1,p=!1,d={_init:function(){},_insertFile:function(t){e.extend({type:!1,from:!1},t)},_insertImage:function(t){var i=e.extend({file:!1,base64:!1},t),a=e("<a/>"),n=e("<img>").attr({src:i.base64});a.append(n);var l=o("_createMessage");l.addClass("callpy_message_file").addClass("callpy_message_file--upload");var r=(l.find("p").append(e("<div/>",{html:"<div></div>"}).append(a).addClass("callpy_message_upload_box")),l.find(".callpy_message_sysbox"));r.html("Загрузка: 0%"),e(s.message_box).append(l),l.removeClass("callpy_new_message"),e.callpy_chat("_scroll").params.root.scrollTop(e.callpy_chat("_scroll").params.root.get(0).scrollHeight);var c={chatfile:i.file,type:iowisp.invoker.type,image:i.base64,action:"send_message",key:iowisp.invoker.key,peer_key:iowisp.invoker.peer_key,peer_type:iowisp.invoker.peer_type,channel:iowisp.invoker.channel,site_id:iowisp.invoker.site_id,managerName:iowisp.earthshaker[iowisp.invoker.peer_key].name,domain:iowisp.invoker.site_info.domain},p=new FormData;for(var d in c)p.append(d,c[d]);var u=new XMLHttpRequest;u.upload.onprogress=function(e){r.html("Загрузка: "+Math.floor(e.loaded/e.total*100)+"%")},u.onload=function(){if(200==u.status){l.removeClass("callpy_message_file--upload"),r.html("Файл отправлен");var e=JSON.parse(u.responseText);a.attr("href","https://callpy.com/upload/"+e.filename).attr("target","_blank")}iowisp.lycan.night(!0)},u.onerror=function(){},u.open("POST",kunnka.bloodseeker+"upld/",!0),u.send(p)},_addSys:function(t){var i=$jcallpy.extend({type:!1,text:!1,time:!1},t);switch(i.type){case"change_manager":i.type="callpy_state_change_manager";break;case"change_department":i.type="callpy_state_change_department";break;case"call_end":i.type="callpy_state_call_end";break;case"remote_end":i.type="callpy_state_remote_end";break;case"no_call":i.type="callpy_state_no_call"}i.time||(i.time=new Date,i.time=(i.time.getHours()<10?"0":"")+i.time.getHours()+":"+(i.time.getMinutes()<10?"0":"")+i.time.getMinutes());var a;a='<div class="callpy_chat_system_message_wrapper callpy_chat_system_message callpy_active">                                <div class="callpy_chat_system_message_body">                                    <div class="callpy_chat_state_picture '+i.type+'"></div>                                    <div class="callpy_chat_state_title">'+i.text+'</div>                                    <div class="callpy_chat_state_time">'+i.time+"</div>                                </div>                            </div>",e(s.message_box).append(a),e.callpy_chat("_scroll").params.root.scrollTop(e.callpy_chat("_scroll").params.root.get(0).scrollHeight),iowisp.lycan.night(!0)},_createMessage:function(t){var i=e.extend({text:"",from:0,name:!1,type:"default"},t);i.time?i.time=iowisp.parseTimestamp(i.time):(i.time=new Date,i.time=(i.time.getHours()<10?"0":"")+i.time.getHours()+":"+(i.time.getMinutes()<10?"0":"")+i.time.getMinutes());var n="callpy_message callpy_new_message ",o='<div class="callpy_message_avatar"></div>',l="Вы",s={};return 0==i.from?n+="callpy_message_self ":iowisp.invoker.peer_key&&(o='<div class="callpy_message_avatar" style="background-image: url(//callpy.com/images/avatar/'+iowisp.earthshaker[iowisp.invoker.peer_key].avatar+'.jpg)"></div>'),i.text&&-1!=i.text.indexOf("<img")&&(n+="callpy_message_file "),iowisp.invoker.peer_key&&!i.name&&(i.name=iowisp.earthshaker[iowisp.invoker.peer_key].name),localStorage.getItem("callpy_social")&&iowisp.invoker.clientInfo.userData&&iowisp.invoker.clientInfo.userData.first_name&&iowisp.invoker.clientInfo.userData.photo&&0==i.from&&(l=iowisp.invoker.clientInfo.userData.first_name,o='<div class="callpy_message_avatar" style="background-image: url('+iowisp.invoker.clientInfo.userData.photo+') !important;"></div>'),"typing"!=i.type?i.text=i.text.replace(/\n/g,"<br>"):i.text='<span class="callpy-message-typing"><span style="background-color: '+iowisp.invoker.site_info.font_color_message+'"></span><span style="background-color: '+iowisp.invoker.site_info.font_color_message+'"></span><span style="background-color: '+iowisp.invoker.site_info.font_color_message+'"></span></span> Консультант пишет...',a=e("<div/>",{html:"                                "+o+'                                <div class="callpy_message_name"'+(0==i.from?' style="color: #'+iowisp.invoker.site_info.message_color_self+'"':' style="color: #'+iowisp.invoker.site_info.message_color+'"')+">"+(0==i.from?l:i.name)+'</div>                                <div class="callpy_message_time"'+(0==i.from?' style="color: #'+iowisp.invoker.site_info.message_color_self+'"':' style="color: #'+iowisp.invoker.site_info.message_color+'"')+">"+i.time+'</div>                                <div class="callpy_message_text"'+(0==i.from?' style="background-color: #'+iowisp.invoker.site_info.message_color_self+'"':' style="background-color: #'+iowisp.invoker.site_info.message_color+'"')+"><p"+(0==i.from?' style="color: #'+iowisp.invoker.site_info.font_color_message_self+'"':' style="color: #'+iowisp.invoker.site_info.font_color_message+'"')+">"+i.text+'</p><div class="callpy_message_text_corner"'+(0==i.from?' style="background-color: #'+iowisp.invoker.site_info.message_color_self+'"':' style="background-color: #'+iowisp.invoker.site_info.message_color+'"')+'></div></div>                                <div class="callpy_message_sysbox"></div>                            ',css:s}).addClass(n)},add:function(t){var i=e.extend({text:!1,id:!1,time:!1,from:0,animate:500,type:"default",mass:!1,name:!1,auto:!1,read:!1},t);e.callpy_settings("_isActive"),p&&"typing"!=i.type&&1==i.from&&o("clearTyping");var n=!1,l=e("#callpy_box_for_message > div").last();if(l.last().length>0&&"typing"!=i.type&&(l.hasClass("callpy_chat_welcome_message_wrapper")||l.hasClass("callpy_chat_system_message")||(l.hasClass("callpy_message_self")&&0==i.from?n=!0:l.hasClass("callpy_message_self")||1!=i.from||(n=!0))),n){var d=e("<p/>",{html:i.text.replace(/\n/g,"<br>"),css:{color:0==i.from?"#"+iowisp.invoker.site_info.font_color_message_self:"#"+iowisp.invoker.site_info.font_color_message}});l.find(".callpy_message_text").append(d.addClass("callpy_new_message")),e.callpy_chat("_scroll").params.root.scrollTop(e.callpy_chat("_scroll").params.root.get(0).scrollHeight),d.removeClass("callpy_new_message")}else if(!n){if(p&&1==i.from)return;"typing"==i.type&&(p=!0,i.from=1),p&&0==i.from?e(o("_createMessage",{text:i.text,from:i.from,time:i.time,name:i.name,type:i.type})).insertBefore(e("#callpy_box_for_message > div").last()):e(s.message_box).append(o("_createMessage",{text:i.text,from:i.from,time:i.time,name:i.name,type:i.type})),e.callpy_chat("_scroll").params.root.scrollTop(e.callpy_chat("_scroll").params.root.get(0).scrollHeight),a.removeClass("callpy_new_message")}i.mass?1==i.from&&0==i.read&&(r++,e.callpy_status("api").visible||(e.callpy_status("api").mobile||c?e.callpy_chat("mobileCount"):(c=!0,setTimeout(function(){e.callpy_chat("show"),c=!1},1e3))),e(".callpy_offline_tabs_count").html(r).show(),e.callpy_notification()):(1==i.from&&(e.callpy_status("api").visible||(e.callpy_status("api").mobile?e.callpy_chat("mobileCount"):e.callpy_chat("show")),e.callpy_notification()),p||(1!=i.from||i.auto?iowisp.lycan.night(!0):iowisp.lycan.night()))},_notReadCount:function(e){return e&&(r=0),r},clearTyping:function(){p&&(e("#callpy_box_for_message > div").each(function(){var t=e(this),i=t.find(".callpy-message-typing");i.length>0&&t.remove()}),p=!1)}}}(jQuery1,window,void 0),function(e){e.fn.customSelectMenu=function(t){function i(t){var i=t.parent().attr("data-select-name"),n=t.attr("data-option-value"),o=t.text(),l=e('input[name="'+i+'"]');t.parent().find("."+a.selectedClass).removeClass(a.selectedClass),t.addClass(a.selectedClass),l.val(n),t.parent().parent().find("label").text(o),""!==l.val()?t.parent().parent().find("label").addClass(a.selectionMadeClass):t.parent().parent().find("label").removeClass(a.selectionMadeClass),t.parent().hide(),"none"!==t.parent().css("display")?t.parent().parent().find("label").toggleClass(a.openedClass):t.parent().parent().find("label").removeClass(a.openedClass)}var a=e.extend({menuClass:"custom-select-menu",openedClass:"opened",selectedClass:"selected",selectionMadeClass:"selection-made"},t);return this.each(function(){var t,n,o,l,s,r,c,p,d=e(this),u=d.attr("name"),_=d.attr("id");d.hide(),n=e('<div class="'+a.menuClass+'">').attr("tabindex",0),_&&(n.attr("id",_),d.removeAttr("id")),t=e('<input type="hidden" name="'+u+'" value="" />'),d.find(":selected")?(c=d.find(":selected"),p=c.attr("value"),l=c.text(),p?(o=e('<label class="'+a.selectionMadeClass+'">'+l+"</label>"),t.val(p)):o=e("<label>"+l+"</label>")):(l=d.find(":first").text(),o=e("<label>"+l+"</label>")),s=e('<ul data-select-name="'+u+'">').hide(),d.after(n.append(o,s,t)),d.find("option").each(function(){var t=e(this).text(),i=e(this).attr("value"),n=t===l?' class="'+a.selectedClass+'"':"";r=e(i?'<li data-option-value="'+i+'"'+n+">"+t+"</li>":"<li"+n+">"+t+"</li>"),s.append(r)}),n.on("click",function(t){var n=e(t.target);n.is("label")&&(o.toggleClass(a.openedClass),o.parent().find("ul").toggle()),n.is("li")&&i(n)}),n.on("keyup",function(t){38!==t.keyCode&&40!==t.keyCode||(e(this).find(o).addClass(a.openedClass),e(this).find(s).show());var n=e(this).find("li"),l=e(this).find("."+a.selectedClass),r="",c="";40===t.keyCode&&(l.removeClass(a.selectedClass),r=l.next(),r.length>0?r.addClass(a.selectedClass):n.first().addClass(a.selectedClass)),38===t.keyCode&&(l.removeClass(a.selectedClass),c=l.prev(),c.length>0?c.addClass(a.selectedClass):n.last().addClass(a.selectedClass)),13===t.keyCode&&i(e(this).find("."+a.selectedClass))}),n.on("blur",function(){e(this).find(s).is(":visible")&&(e(this).find(o).removeClass(a.openedClass),e(this).find(s).hide())}),e("html").on("keyup",function(e){27===e.keyCode&&(o.removeClass(a.openedClass),s.hide())}),e("html").on("mousedown",function(t){var i=e(t.target);i.parents().addBack().is("."+a.menuClass+" ul, ."+a.menuClass+" label")||(e("."+a.menuClass+" label").removeClass(a.openedClass),e("."+a.menuClass+" ul").hide())})})}}(jQuery1),function(e,t,i){e.callpy_forms=function(e){return r[e]?r[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $jcallpy.error("Метод с именем "+e+" не существует для "+a):r._init.apply(this,arguments)};var a="$.callpy_forms",n=e.callpy_forms,o=t,l=(o.document,{callpy_forms:".callpy_client_chat_wrapper",callpy_wrapper:"#callpy_wrapper",label_wrapper:".callpy_label_wrapper",callpy_cancel_social:"#callpy_cancel_social",callpy_accept_social:"#callpy_accept_social",callpy_social_name:"#callpy_social_name",callpy_social_picture:"#callpy_social_picture",callpy_cancel_formData:"#callpy_cancel_formData",callpy_accept_formData:"#callpy_accept_formData",callpy_forms_user_button:"#callpy_forms_user_button",callpy_userData_form:"#callpy_userData_form",callpy_userData_title:"#callpy_userData_title",callpy_userData_input_name:"#callpy_userData_input_name",callpy_userData_input_email:"#callpy_userData_input_email",callpy_userData_input_phone:"#callpy_userData_input_phone",callpy_forms_user_button_cancel:"#callpy_forms_user_button_cancel"}),s=!1,r={_init:function(){},_events:function(){e(l.callpy_cancel_social).on("click",function(){n("_social_hide"),e(l.callpy_userData_title).html("Хотите представиться?"),n("_userData_show"),localStorage.setItem("callpy_social","0")}),e(l.callpy_accept_social).on("click",function(){n("_social_hide"),e(l.callpy_userData_title).html("Дополните свои контакты"),e(l.callpy_userData_input_name).val(iowisp.invoker.clientInfo.userData.first_name),""!==iowisp.invoker.clientInfo.userData.mobile_phone&&e(l.callpy_userData_input_phone).val(iowisp.invoker.clientInfo.userData.mobile_phone),n("_userData_show"),localStorage.setItem("callpy_social","1")}),e(l.callpy_forms_user_button).on("click",function(){n("_userData_show"),n("_button_inactive")}),e(l.callpy_cancel_formData).on("click",function(){n("_userData_hide"),localStorage.setItem("callpy_contactForm","0")}),e(l.callpy_userData_form).on("submit",function(){return localStorage.setItem("callpy_contactForm","1"),e.post(callpy_path+"/d/",{action:"addFormData",site_id:iowisp.invoker.site_id,site:iowisp.invoker.site,key:iowisp.invoker.key,channel:iowisp.invoker.channel,formType:"contactForm",data:{name:e(l.callpy_userData_input_name).val(),phone:e(l.callpy_userData_input_phone).val(),email:e(l.callpy_userData_input_email).val()}},function(){iowisp.wisp.formData({formType:"contactForm",data:{name:e(l.callpy_userData_input_name).val(),phone:e(l.callpy_userData_input_phone).val(),email:e(l.callpy_userData_input_email).val()}}),n("_userData_hide"),n("_button_inactive"),n("_social_hide")}),!1}),e(l.callpy_forms_user_button_cancel).on("click",function(){n("_button_inactive")})},_social_show:function(t){$jcallpy.extend({},t);if(1==parseInt(iowisp.invoker.site_info.askUserVk))if(e(l.callpy_forms).hasClass("callpy_userData_show"))s=!0;else if(iowisp.invoker.clientInfo.userData){var i=iowisp.invoker.clientInfo.userData;e(l.callpy_social_name).html(i.first_name+" "+i.last_name),e(l.callpy_social_picture).css("background-image","url("+i.photo+")"),e.callpy_status("set","social_show")}},_social_hide:function(){e.callpy_status("set","social_hide")},_button_active:function(){1==parseInt(iowisp.invoker.site_info.contactForm)&&e(".callpy_chat_wrapper2").addClass("callpy_userdata_active")},_button_inactive:function(){e(".callpy_chat_wrapper2").removeClass("callpy_userdata_active")},_userData_show:function(){1==parseInt(iowisp.invoker.site_info.contactForm)&&e.callpy_status("set","userdata_show")},_userData_hide:function(){e.callpy_status("set","userdata_hide"),n("_button_inactive"),s&&!iowisp.invoker.clientInfo.userData&&n("_social_show")}}}(jQuery1,window,void 0),function(e,t,i){function a(e){var t,i,a,n=parseInt(e.substring(0,2),16)/255,o=parseInt(e.substring(2,4),16)/255,l=parseInt(e.substring(4,6),16)/255,s=Math.max(n,o,l),r=Math.min(n,o,l);return s==r?t=0:n==s&&o>=l?t=Math.round(60*((o-l)/(s-r))):n==s&&l>o?t=Math.round(60*((o-l)/(s-r))+360):o==s?t=Math.round(60*((l-n)/(s-r))+120):l==s&&(t=Math.round(60*((n-o)/(s-r))+240)),i=0==s?0:Math.round(100*(1-r/s)),a=Math.round(100*s),{hue:t,saturation:i,brightness:a}}e.callpy_settings=function(e){return r[e]?r[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $jcallpy.error("Метод с именем "+e+" не существует для "+n):r._init.apply(this,arguments)};var n="$.callpy_settings",o=e.callpy_settings,l=t,s=(l.document,{callpy_wrapper:"#callpy_wrapper",label_wrapper:".callpy_label_wrapper"}),r={_init:function(){console.log("%c"+n+" inited","color: white; background: blue; font-weight: bold;")},_isActive:function(){return"visible"==document.visibilityState?(e(s.callpy_wrapper).removeClass("callpy_no_animation"),!0):(e(s.callpy_wrapper).addClass("callpy_no_animation"),!1)},set:function(t){var i=t,n=!1;if(i instanceof Array)for(var l,r=0;r<i.length;r++)for(var c in i[r])l={},l[c]=i[r][c],o("set",l);else if("object"==typeof i){for(var p in i)switch(p){case"status":0==parseInt(i[p])?e.callpy_status("set","callpy_off"):(e.callpy_status("set","callpy_on"),e.callpy_consultant("set")),n=!0;break;case"offline_field_email":break;case"offline_field_name":break;case"offline_field_phone":break;case"offline_name":e(".callpy_client_chat_title div").eq(0).html(i[p]);break;case"offline_text":e(".callpy_client_chat_title div").eq(1).html(iowisp.wisp.replacePatterns(i[p]));break;case"audio_chat":0==parseInt(i[p])||1==parseInt(iowisp.invoker.site_info.blocked)||2==parseInt(iowisp.invoker.site_info.blocked)?e.callpy_status("set","audio_off"):e.callpy_status("set","audio_on"),n=!0;break;case"lable_avatars":0==parseInt(i[p])?e.callpy_status("set","avatar_off"):e.callpy_status("set","avatar_on"),n=!0;break;case"video_chat":break;case"offline_lbl":iowisp.invoker.peer_key||e.callpy_consultant("set");break;case"lbl_color":e(".callpy_client_chat_messages").css("borderColor","hsl("+a(i[p]).hue+", "+a(i[p]).saturation+"%, "+Math.max(a(i[p]).brightness-20,0)+"%)"),e("#callpy_chat_input_box").css("borderColor","hsl("+a(i[p]).hue+", "+a(i[p]).saturation+"%, "+Math.max(a(i[p]).brightness-20,0)+"%)"),e(".callpy_client_remote_accept_wrapper").css("background-color","#"+i[p]),e(".callpy_chat_wrapper2").css({"border-color":"#"+i[p],"background-color":"#"+i[p]}),"ffffff"==i[p]?e(".callpy_manager_icon > div > span").css("color","#6b6b6b"):e(".callpy_manager_icon > div > span").css("color","#"+i[p]),e(".callpy_offline_body_choose i, .callpy_offline_body_name i, .callpy_offline_body_icon i, .callpy_offline_body_two_input i").css("color","hsl("+a(i[p]).hue+", "+a(i[p]).saturation+"%, "+Math.max(a(i[p]).brightness-50,0)+"%)");break;case"label_color":e(".callpy_label_body").css("background-color","#"+i[p]),e(".callpy_mobile_wrapper").css("color","#"+i[p]),"ffffff"==i[p]?e(".callpy_label_avatar > div > span").css("color","#6b6b6b"):e(".callpy_label_avatar > div > span").css("color","#"+i[p]),e(".callpy_label_corner_circle").css("box-shadow","0 0 0 20px #"+i[p]+", 1px 0 1px 0 rgba(0, 0, 0, 0.2) inset");break;case"message_color":e(".callpy_message_text").each(function(){e(this).parent().hasClass("callpy_message_self")||e(this).css({backgroundColor:"#"+i[p]}).find(".callpy_message_text_corner").css("background-color","#"+i[p])}),e(".callpy_message_name").each(function(){e(this).parent().hasClass("callpy_message_self")||e(this).css({color:"#"+i[p]})}),e(".callpy_message_time").each(function(){e(this).parent().hasClass("callpy_message_self")||e(this).css({color:"#"+i[p]})}),e(".callpy_send_message_button").css("color","#"+i[p]);break;case"message_color_self":e(".callpy_message_text").each(function(){e(this).parent().hasClass("callpy_message_self")&&e(this).css({backgroundColor:"#"+i[p]}).find(".callpy_message_text_corner").css("background-color","#"+i[p])}),e(".callpy_message_name").each(function(){e(this).parent().hasClass("callpy_message_self")&&e(this).css({color:"#"+i[p]})}),e(".callpy_message_time").each(function(){e(this).parent().hasClass("callpy_message_self")&&e(this).css({color:"#"+i[p]})}),e(".callpy_send_message_button").css("color","#"+i[p]);break;case"font_color_message":e(".callpy_message_text").each(function(){var t=e(this);t.parent().hasClass("callpy_message_self")||t.find("p").css("color","#"+i[p])});break;case"font_color_message_self":e(".callpy_message_text").each(function(){var t=e(this);t.parent().hasClass("callpy_message_self")&&t.find("p").css("color","#"+i[p])});break;case"font_color":e(".callpy_client_chat_copyright a, .callpy_chat_wrapper2").css("color","#"+i[p]),e(s.callpy_wrapper).removeClass("callpy_white_font").removeClass("callpy_black_font"),e("#callpy_client_chat_menu_button_svg").css("fill","#"+t[p]);break;case"font_label_color":e(".callpy_label_body_title, .callpy_label_body_descr, .callpy_label_body_copy a").css("color","#"+i[p]),"6b6b6b"==i[p]?e(s.callpy_wrapper).removeClass("callpy_label_white_font").addClass("callpy_label_black_font"):e(s.callpy_wrapper).removeClass("callpy_label_black_font").addClass("callpy_label_white_font");break;case"lbl_position":if(e.callpy_flat("config").label_position){var d,u;switch(parseInt(iowisp.invoker.site_info.lbl_edge)){case 0:d="callpy_label_wrapper_left",u="top";break;case 1:d="callpy_label_wrapper_bottom",u="left";break;case 2:d="callpy_label_wrapper_right",u="top"}"top"==u?e(s.label_wrapper).css({left:"",marginLeft:"",top:i[p]+"%",marginTop:"-"+4*parseFloat(i[p])+"px"}):"left"==u&&e(s.label_wrapper).css({top:"",marginTop:"",left:i[p]+"%",marginLeft:"-"+4*parseFloat(i[p])+"px"})}break;case"lbl_edge":if(e.callpy_flat("config").label_position){var _,f=parseInt(iowisp.invoker.site_info.lbl_edge);switch(f){case 0:_="callpy_label_wrapper_left";break;case 1:_="callpy_label_wrapper_bottom";break;case 2:_="callpy_label_wrapper_right"}e(s.label_wrapper).removeClass("callpy_label_wrapper_left callpy_label_wrapper_bottom callpy_label_wrapper_right").addClass(_),e(s.callpy_wrapper).removeClass("callpy_label_wrapper_left callpy_label_wrapper_bottom callpy_label_wrapper_right").addClass(_),o("set",{lbl_position:iowisp.invoker.site_info.lbl_position})}break;case"chat_bottext":e(".callpy_client_chat_title div").eq(1).html(iowisp.wisp.replacePatterns(i[p]));break;case"chat_toptext":e(".callpy_client_chat_title div").eq(0).html(iowisp.wisp.replacePatterns(i[p])),e(".callpy_client_remote_title").html(iowisp.wisp.replacePatterns("%name%"));
break;case"label_toptext":iowisp.invoker.peer_key&&e(".callpy_label_body_title").html(iowisp.wisp.replacePatterns(i[p]));break;case"offline_lbl_toptext":e(".callpy_label_body_title").html(iowisp.wisp.replacePatterns(i[p]));break;case"label_bottext":iowisp.invoker.peer_key&&e(".callpy_label_body_descr").html(iowisp.wisp.replacePatterns(i[p]));break;case"offline_lbl_bottext":e(".callpy_label_body_descr").html(iowisp.wisp.replacePatterns(i[p]));break;case"blocked":}try{e.callpy_settings_self("set",t)}catch(h){}n||iowisp.lycan.night()}}}}(jQuery1,window,void 0),function(e,t,i){e.callpy_notification=function(e){return s[e]?s[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $jcallpy.error("Метод с именем "+e+" не существует для "+n):s.show.apply(this,arguments)};var a,n="$.callpy_notification",o=e.callpy_notification,l=!1,s={_init:function(){},_visibility:function(){var e,t;return"undefined"!=typeof document.hidden?(e="hidden",t="visibilitychange"):"undefined"!=typeof document.mozHidden?(e="mozHidden",t="mozvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange"),{visibilityChange:t,hidden:e}},show:function(e){var t=$jcallpy.extend({type:"message"},e);"message"==t.type&&(document[o("_visibility").hidden]?(document.getElementById("callpy_sound_new_message").play(),document.title&&!l&&(a=document.title,l=setInterval(function(){document.title==a?document.title="Новое сообщение! - "+a:document.title=a},1e3),document.addEventListener(o("_visibility").visibilityChange,function(){clearInterval(l),l=!1,document.title=a},!1))):document.getElementById("callpy_sound_new_message_loud").play())}};o("_init")}(jQuery1,window,void 0),function(e,t,i){e.callpy_departments=function(e){return o[e]?o[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $jcallpy.error("Метод с именем "+e+" не существует для "+a):o._init.apply(this,arguments)};var a="$.callpy_departments",n=e.callpy_departments,o={_init:function(){console.log(a+" inited."),n("_create_select")},_events:function(){e("#callpy_departments_form").on("submit",function(){var t=e(this),i={};return t.find("input").each(function(t,a){i[e(a).data("callpy-departments-input-id")]=e(a).val()}),e.post(kunnka.bloodseeker+"/d/",{action:"addFormData",site_id:iowisp.invoker.site_id,key:iowisp.invoker.key,channel:iowisp.invoker.channel,site:iowisp.invoker.site,formType:"departmentForm",data:i},function(){iowisp.wisp.formData({formType:"departmentForm",data:i}),e(".callpy_client_chat_wrapper").removeClass("callpy_departmentsForm_show"),iowisp.lycan.night(!0)}),!1}),e("#callpy_cancel_departments").on("click",function(){e(".callpy_client_chat_wrapper").removeClass("callpy_departmentsForm_show"),iowisp.lycan.night(!0)}),e(document).on("click",".callpy_departments_choose_link",function(){e.callpy_departments("_change_department",e(this).data("department-id")),e("#callpy_client_chat_departments_ul_li"+e(this).data("department-id")).is(":empty")&&e.callpy_status("set","departments_empty_show",!0),e.callpy_status("set","departments_hide",!0)})},_isForm:function(){if(5==iowisp.invoker.type)return!1;var e,t=iowisp.invoker.site_info.departments;return e=iowisp.invoker.department_id&&0!=parseInt(t[iowisp.invoker.department_id].form_id)?!(iowisp.invoker.clientInfo.formData&&iowisp.invoker.clientInfo.formData.departmentForm&&iowisp.invoker.clientInfo.formData.departmentForm[iowisp.invoker.department_id]):!1},_change_department:function(t){if(t){iowisp.invoker.site_info.departments;e.post(kunnka.bloodseeker+"/d/",{action:"change_department",site_url:iowisp.invoker.site,user:iowisp.invoker.key,department_id:t,channel:iowisp.invoker.channel},function(t){e.callpy_message("_addSys",{type:"change_department",text:"Изменен отдел"})}),iowisp.invoker.department_id=t,iowisp.lycan.cripping(),iowisp.lycan.saveSyncData(!0),n("_set_select_department")}},_set_select_department:function(){var t=e(".callpy_departaments_select");t.length&&t.val(iowisp.invoker.department_id)},_create_form:function(){if(0==parseInt(iowisp.invoker.site_info.blocked)){var t=iowisp.invoker.site_info.departments[iowisp.invoker.department_id].fields;e("#callpy_departments_form_inputs").html("");for(var i=0;i<t.length;i++)1==parseInt(t[i].required)?e("<div/>",{html:'<input required type="text" placeholder="'+t[i].name+'" value="" name="data-callpy-departments-input-id-'+t[i].id+'" data-callpy-departments-input-id="'+t[i].id+'">'}).appendTo("#callpy_departments_form_inputs"):e("<div/>",{html:'<input type="text" placeholder="'+t[i].name+'" value="" name="data-callpy-departments-input-id-'+t[i].id+'" data-callpy-departments-input-id="'+t[i].id+'">'}).appendTo("#callpy_departments_form_inputs");e("#callpy_departments_title").html(iowisp.invoker.site_info.departments[iowisp.invoker.department_id].form_name),e(".callpy_client_chat_wrapper").addClass("callpy_departmentsForm_show"),iowisp.lycan.night(!0)}},_create_select:function(){var t=iowisp.invoker.site_info.departments,i=e("#callpy_client_chat_departments_ul");i.empty();for(var a in t)0==t[a].hidden&&e("<li/>",{html:'                        <div class="callpy_department_title">'+t[a].name+'</div>                        <div class="callpy_department_managers_list">                            <ul id="callpy_client_chat_departments_ul_li'+a+'" class="callpy_department_managers_list_ul"></ul>                            <div class="callpy_department_managers_list_empty">Нет консультантов</div>                        </div>                        <div class="callpy_department_button">                            <a href="javascript://" class="callpy_departments_choose_link" data-department-id="'+a+'">Выбрать</a></div>'}).appendTo(i);if(5!=iowisp.invoker.type){var n=iowisp.earthshaker;for(var o in n)if(n[o])for(var l=0;l<n[o].departments.length;l++)e("#callpy_client_chat_departments_ul_li"+n[o].departments[l]).append(e("<li/>",{html:'<img alt="'+n[o].name+'" src="'+callpy_path+"images/avatar/"+n[o].avatar+'.jpg">'}))}},select:function(){}}}(jQuery1,window,void 0),function(e,t,i){e.callpy_consultant=function(e){return o[e]?o[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $jcallpy.error("Метод с именем "+e+" не существует для "+a):o._init.apply(this,arguments)};var a="$.callpy_consultant",n=(e.callpy_consultant,t),o=(n.document,{_init:function(){console.log("%c"+a+" inited","color: white; background: blue; font-weight: bold;")},set:function(t){var i=(e.callpy_chat("chat").label.root,e.callpy_chat("chat").root),a=iowisp.invoker.site_info,n=(e("#callpy_offline_form"),e(".callpy_client_chat_messages")),o=e(".callpy_message_wrapper"),l=e("#callpy_offline_chat_box");if(!iowisp.invoker.peer_key||t)0!==parseInt(a.offline_lbl)&&0!==parseInt(a.status)||t?(e.callpy_status("set","callpy_on"),e.callpy_settings("set",[{offline_lbl_bottext:iowisp.invoker.site_info.offline_lbl_bottext},{offline_lbl_toptext:iowisp.invoker.site_info.offline_lbl_toptext},{offline_text:iowisp.invoker.site_info.offline_text},{offline_name:iowisp.invoker.site_info.offline_name}]),"brand"==iowisp.invoker.site_info.chat_type&&1==parseInt(iowisp.invoker.site_info.logo_switch)?e(".callpy_label_avatar").html('<img alt="" src="'+kunnka.bloodseeker+"/images/chat/logo/"+iowisp.invoker.site_info.logo+'" />'):e(".callpy_label_avatar").html('<div><span style="color: #'+iowisp.invoker.site_info.label_color+';">b</span></div>'),o.appendTo(l),e.callpy_chat("_scroll").update(),e.callpy_status("set","offline_on"),e.callpy_chat("_offline_resize")):(e.callpy_status("set","offline_off"),e.callpy_status("set","callpy_off"));else{if(o.appendTo(n),e.callpy_chat("_scroll")&&(e.callpy_chat("_scroll").update(),e.callpy_chat("_scroll").params.root.scrollTop(e.callpy_chat("_scroll").params.root.get(0).scrollHeight)),e.callpy_status("set","callpy_on"),e.callpy_settings("set",[{chat_bottext:iowisp.invoker.site_info.chat_bottext},{chat_toptext:iowisp.invoker.site_info.chat_toptext},{label_toptext:iowisp.invoker.site_info.label_toptext},{label_bottext:iowisp.invoker.site_info.label_bottext}]),""!==iowisp.earthshaker[iowisp.invoker.peer_key].avatar){var s='<div style="background-image: url('+kunnka.bloodseeker+"/images/avatar/"+iowisp.earthshaker[iowisp.invoker.peer_key].avatar+'.jpg)"></div>';e(".callpy_label_avatar").html(s),i.find(".callpy_manager_icon").html(s)}else e(".callpy_label_avatar").html('<div><span style="color: #'+iowisp.invoker.site_info.label_color+';">b</span></div>'),i.find(".callpy_manager_icon").html('<div><span style="color: #'+iowisp.invoker.site_info.label_color+';">b</span></div>');e.callpy_settings("set",{logo:iowisp.invoker.site_info.logo}),e.callpy_status("set","offline_off"),e.callpy_departments("_isForm")?e.callpy_departments("_create_form"):e(".callpy_client_chat_wrapper").removeClass("callpy_departmentsForm_show"),e.callpy_chat("_offline_resize"),e.callpy_flat("_welcome_message")}iowisp.m_chat.setUtm()}})}(jQuery1,window,void 0),window.ModernizrCallpy=function(e,t,i){function a(e){g.cssText=e}function n(e,t){return typeof e===t}function o(e,t){return!!~(""+e).indexOf(t)}function l(e,t){for(var a in e){var n=e[a];if(!o(n,"-")&&g[n]!==i)return"pfx"==t?n:!0}return!1}function s(e,t,a){for(var o in e){var l=t[e[o]];if(l!==i)return a===!1?e[o]:n(l,"function")?l.bind(a||t):l}return!1}function r(e,t,i){var a=e.charAt(0).toUpperCase()+e.slice(1),o=(e+" "+w.join(a+" ")+a).split(" ");return n(t,"string")||n(t,"undefined")?l(o,t):(o=(e+" "+k.join(a+" ")+a).split(" "),s(o,t,i))}var c,p,d,u="2.8.3",_={},f=!0,h=t.documentElement,m="modernizr",y=t.createElement(m),g=y.style,v=({}.toString,"Webkit Moz O ms"),w=v.split(" "),k=v.toLowerCase().split(" "),b={},C=[],x=C.slice,T={}.hasOwnProperty;d=n(T,"undefined")||n(T.call,"undefined")?function(e,t){return t in e&&n(e.constructor.prototype[t],"undefined")}:function(e,t){return T.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var i=x.call(arguments,1),a=function(){if(this instanceof a){var n=function(){};n.prototype=t.prototype;var o=new n,l=t.apply(o,i.concat(x.call(arguments)));return Object(l)===l?l:o}return t.apply(e,i.concat(x.call(arguments)))};return a}),b.cssanimations=function(){return r("animationName")};for(var S in b)d(b,S)&&(p=S.toLowerCase(),_[p]=b[S](),C.push((_[p]?"":"no-")+p));return _.addTest=function(e,t){if("object"==typeof e)for(var a in e)d(e,a)&&_.addTest(a,e[a]);else{if(e=e.toLowerCase(),_[e]!==i)return _;t="function"==typeof t?t():t,"undefined"!=typeof f&&f&&(h.className+=" "+(t?"":"no-")+e),_[e]=t}return _},a(""),y=c=null,function(e,t){function i(e,t){var i=e.createElement("p"),a=e.getElementsByTagName("head")[0]||e.documentElement;return i.innerHTML="x<style>"+t+"</style>",a.insertBefore(i.lastChild,a.firstChild)}function a(){var e=g.elements;return"string"==typeof e?e.split(" "):e}function n(e){var t=y[e[h]];return t||(t={},m++,e[h]=m,y[m]=t),t}function o(e,i,a){if(i||(i=t),p)return i.createElement(e);a||(a=n(i));var o;return o=a.cache[e]?a.cache[e].cloneNode():f.test(e)?(a.cache[e]=a.createElem(e)).cloneNode():a.createElem(e),!o.canHaveChildren||_.test(e)||o.tagUrn?o:a.frag.appendChild(o)}function l(e,i){if(e||(e=t),p)return e.createDocumentFragment();i=i||n(e);for(var o=i.frag.cloneNode(),l=0,s=a(),r=s.length;r>l;l++)o.createElement(s[l]);return o}function s(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(i){return g.shivMethods?o(i,e,t):t.createElem(i)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+a().join().replace(/[\w\-]+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(g,t.frag)}function r(e){e||(e=t);var a=n(e);return g.shivCSS&&!c&&!a.hasCSS&&(a.hasCSS=!!i(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),p||s(e,a),e}var c,p,d="3.7.0",u=e.html5||{},_=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,f=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,h="_html5shiv",m=0,y={};!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",c="hidden"in e,p=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return"undefined"==typeof e.cloneNode||"undefined"==typeof e.createDocumentFragment||"undefined"==typeof e.createElement}()}catch(i){c=!0,p=!0}}();var g={elements:u.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:d,shivCSS:u.shivCSS!==!1,supportsUnknownElements:p,shivMethods:u.shivMethods!==!1,type:"default",shivDocument:r,createElement:o,createDocumentFragment:l};e.html5=g,r(t)}(this,t),_._version=u,_._domPrefixes=k,_._cssomPrefixes=w,_.testProp=function(e){return l([e])},_.testAllProps=r,_.prefixed=function(e,t,i){return t?r(e,t,i):r(e,"pfx")},h.className=h.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(f?" js "+C.join(" "):""),_}(this,this.document),function(e,t,i){function a(e){return"[object Function]"==m.call(e)}function n(e){return"string"==typeof e}function o(){}function l(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function s(){var e=y.shift();g=1,e?e.t?f(function(){("c"==e.t?u.injectCss:u.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),s()):g=0}function r(e,i,a,n,o,r,c){function p(t){if(!_&&l(d.readyState)&&(v.r=_=1,!g&&s(),d.onload=d.onreadystatechange=null,t)){"img"!=e&&f(function(){k.removeChild(d)},50);for(var a in S[i])S[i].hasOwnProperty(a)&&S[i][a].onload()}}var c=c||u.errorTimeout,d=t.createElement(e),_=0,m=0,v={t:a,s:i,e:o,a:r,x:c};1===S[i]&&(m=1,S[i]=[]),"object"==e?d.data=i:(d.src=i,d.type=e),d.width=d.height="0",d.onerror=d.onload=d.onreadystatechange=function(){p.call(this,m)},y.splice(n,0,v),"img"!=e&&(m||2===S[i]?(k.insertBefore(d,w?null:h),f(p,c)):S[i].push(d))}function c(e,t,i,a,o){return g=0,t=t||"j",n(e)?r("c"==t?C:b,e,t,this.i++,i,a,o):(y.splice(this.i++,0,e),1==y.length&&s()),this}function p(){var e=u;return e.loader={load:c,i:0},e}var d,u,_=t.documentElement,f=e.setTimeout,h=t.getElementsByTagName("script")[0],m={}.toString,y=[],g=0,v="MozAppearance"in _.style,w=v&&!!t.createRange().compareNode,k=w?_:h.parentNode,_=e.opera&&"[object Opera]"==m.call(e.opera),_=!!t.attachEvent&&!_,b=v?"object":_?"script":"img",C=_?"script":b,x=Array.isArray||function(e){return"[object Array]"==m.call(e)},T=[],S={},j={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}};u=function(e){function t(e){var t,i,a,e=e.split("!"),n=T.length,o=e.pop(),l=e.length,o={url:o,origUrl:o,prefixes:e};for(i=0;l>i;i++)a=e[i].split("="),(t=j[a.shift()])&&(o=t(o,a));for(i=0;n>i;i++)o=T[i](o);return o}function l(e,n,o,l,s){var r=t(e),c=r.autoCallback;r.url.split(".").pop().split("?").shift(),r.bypass||(n&&(n=a(n)?n:n[e]||n[l]||n[e.split("/").pop().split("?")[0]]),r.instead?r.instead(e,n,o,l,s):(S[r.url]?r.noexec=!0:S[r.url]=1,o.load(r.url,r.forceCSS||!r.forceJS&&"css"==r.url.split(".").pop().split("?").shift()?"c":i,r.noexec,r.attrs,r.timeout),(a(n)||a(c))&&o.load(function(){p(),n&&n(r.origUrl,s,l),c&&c(r.origUrl,s,l),S[r.url]=2})))}function s(e,t){function i(e,i){if(e){if(n(e))i||(d=function(){var e=[].slice.call(arguments);u.apply(this,e),_()}),l(e,d,t,0,c);else if(Object(e)===e)for(r in s=function(){var t,i=0;for(t in e)e.hasOwnProperty(t)&&i++;return i}(),e)e.hasOwnProperty(r)&&(!i&&!--s&&(a(d)?d=function(){var e=[].slice.call(arguments);u.apply(this,e),_()}:d[r]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),_()}}(u[r])),l(e[r],d,t,r,c))}else!i&&_()}var s,r,c=!!e.test,p=e.load||e.both,d=e.callback||o,u=d,_=e.complete||o;i(c?e.yep:e.nope,!!p),p&&i(p)}var r,c,d=this.yepnope.loader;if(n(e))l(e,0,d,0);else if(x(e))for(r=0;r<e.length;r++)c=e[r],n(c)?l(c,0,d,0):x(c)?u(c):Object(c)===c&&s(c,d);else Object(e)===e&&s(e,d)},u.addPrefix=function(e,t){j[e]=t},u.addFilter=function(e){T.push(e)},u.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",d=function(){t.removeEventListener("DOMContentLoaded",d,0),t.readyState="complete"},0)),e.yepnope=p(),e.yepnope.executeStack=s,e.yepnope.injectJs=function(e,i,a,n,r,c){var p,d,_=t.createElement("script"),n=n||u.errorTimeout;_.src=e;for(d in a)_.setAttribute(d,a[d]);i=c?s:i||o,_.onreadystatechange=_.onload=function(){!p&&l(_.readyState)&&(p=1,i(),_.onload=_.onreadystatechange=null)},f(function(){p||(p=1,i(1))},n),r?_.onload():h.parentNode.insertBefore(_,h)},e.yepnope.injectCss=function(e,i,a,n,l,r){var c,n=t.createElement("link"),i=r?s:i||o;n.href=e,n.rel="stylesheet",n.type="text/css";for(c in a)n.setAttribute(c,a[c]);l||(h.parentNode.insertBefore(n,h),f(i,0))}}(this,document),ModernizrCallpy.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},function(e,t,i){e.callpy_contact=function(e){return o[e]?o[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $jcallpy.error("Метод с именем "+e+" не существует для "+a):o._init.apply(this,arguments)};var a="$.callpy_contact",n=(e.callpy_contact,t),o=(n.document,{_init:function(){},show:function(){},hide:function(){}})}(jQuery1,window,void 0),function(e,t,i){e.callpy_call=function(e){return l[e]?l[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $jcallpy.error("Метод с именем "+e+" не существует для "+a):l._init.apply(this,arguments)};var a="$.callpy_call",n=(e.callpy_call,t),o=n.document,l={_init:function(){},_createIframe:function(){var t=o.createElement("iframe");t.id="callpy_iframeid",t.style.position="fixed",t.style.left="-9999px",o.body.appendChild(t),o.getElementById("callpy_iframeid").onload=function(){e("#callpy_iframeid").css({position:"fixed",top:0,left:0,bottom:0,right:0,border:0,width:"100%",height:"100%",zIndex:5e3,visibility:"hidden",background:"#FFFFFF"}),o.getElementById("callpy_iframeid").contentWindow.document.body.scrollTop=e(o.body).scrollTop(),e(o.body).css("overflow","hidden"),e("#callpy_iframeid").css({visibility:"visible"}),o.getElementById("callpy_iframeid").contentWindow.iowisp.tusk.setInputs(iowisp.tusk.getInputs()),o.getElementById("callpy_iframeid").onload=null,o.getElementById("callpy_iframeid").onload=function(){o.title=o.getElementById("callpy_iframeid").contentWindow.document.title,history.replaceState({foo:"bat"},o.getElementById("callpy_iframeid").contentWindow.document.title,o.getElementById("callpy_iframeid").contentWindow.location.href)}},t.contentWindow.location=n.location},_removeIframe:function(){var e=document.getElementById("callpy_iframeid").contentWindow.location,t=document.getElementById("callpy_iframeid").contentWindow.iowisp.tusk.getInputs();(t.inputs.length>0||t.textareas.length>0)&&localStorage.setItem("callpy_fields",JSON.stringify(t)),setTimeout(function(){document.location=e},300)}}}(jQuery1,window,void 0),function(e,t,i){e.callpy_flat=function(e){return o[e]?o[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void 0:o._init.apply(this,arguments)};var a=e.callpy_flat,n={resize:!0,resize_c:"h",draggable:!1,label_position:!1},o={config:function(){return n},_init:function(){var i,n={callpy_wrapper:"#callpy_wrapper",callpy_chat_wrapper:".callpy_chat_wrapper2",offline_button_next:"#callpy_offline_button_next_self",callpy_offline_form_name:"#callpy_offline_form_name_self",callpy_offline_textarea:"#callpy_offline_textarea_self",offline_form:"#callpy_offline_form_self",callpy_offline_form_button:"#callpy_offline_form_button_self",callpy_offline_button_close:"#callpy_offline_button_close_self",callpy_chat_offline:"#callpy_chat_offline",callpy_chat_history:"#callpy_chat_history",callpy_chat_side_resize:"#callpy_chat_side_resize"};e.callpy_settings("set",{brand_switch:iowisp.invoker.site_info.brand_switch}),e(n.callpy_chat_offline).on("click",function(){var t=e(this);t.hasClass("callpy_active")||(e("#callpy_client_offline_ul a").removeClass("callpy_active"),t.addClass("callpy_active"),e(n.callpy_wrapper).removeClass("callpy_status_show_offline_chat"))}),e(n.callpy_chat_history).on("click",function(){var t=e(this);t.hasClass("callpy_active")||(e("#callpy_client_offline_ul a").removeClass("callpy_active"),t.addClass("callpy_active"),e(n.callpy_wrapper).addClass("callpy_status_show_offline_chat"),iowisp.m_chat.setMessagesRead(),e(".callpy_offline_tabs_count").hide(),e.callpy_message("_notReadCount",!0),e.callpy_chat("_scroll").params.root.scrollTop(e.callpy_chat("_scroll").params.root.get(0).scrollHeight))}),e(n.callpy_offline_button_close).on("click",function(){e(".callpy_offline_succes").hide(),e(n.offline_form).removeClass("callpy_offline_step2").show()}),e("#callpy_chat_input_box").keydown(function(t){13===t.keyCode&&t.ctrlKey&&(e(this).val(function(e,t){return t+"\n"}),this.scrollTop=this.scrollHeight)}).keypress(function(t){if(13===t.keyCode&&!t.ctrlKey){var i=e(this);return i.val().replace(/\n/g,"").replace(/ /g,"").length>0&&(clearTimeout(iowisp.tusk.inputTimer),iowisp.m_chat.reincarnation(i.val()),e.callpy_message("add",{text:iowisp.urlHighlight(i.val()),from:0,time:(new Date).getTime()}),i.val("")),!1}}),e(".callpy_client_chat_menu_draggble").on("mousedown",function(i){i=i||t.event;var a,n,o,l,s=document.querySelector(".callpy_chat_wrapper2");a=s.offsetLeft,n=s.offsetTop,o=i.clientX,l=i.clientY;var r,c,p=0,d=20,u={},_=document,f=_.documentElement.clientWidth,h=_.documentElement.clientHeight;return e(document).on("mousemove.callpydrag_off",function(i){i=i||t.event,r=n+i.clientY-l,c=a+i.clientX-o,d>c&&(c=p),d>r&&(r=p),r+e(s).outerHeight()>h-d&&(r=h-e(s).outerHeight()),c+e(s).outerWidth()>f-d?(c=f-e(s).outerWidth(),s.style.removeProperty("width"),e(s).removeClass("callpy_test_small")):e(s).addClass("callpy_test_small"),e(s).hasClass("callpy_test_small")||(r=0),s.style.removeProperty("left"),s.style.removeProperty("top"),s.style.removeProperty("margin-top"),s.style.removeProperty("margin-left"),s.style.setProperty("left",c+"px","important"),s.style.setProperty("top",r+"px","important"),u.x=(c/(f-e(s).outerWidth())*100).toFixed(2)+"%",u.y=(r/(h-e(s).outerHeight())*100).toFixed(2)+"%",e.callpy_chat("_scroll").update()}),e(document).on("mouseup.callpydrag_off",function(){e(document).off(".callpydrag_off"),e(s).hasClass("callpy_test_small")?(s.style.setProperty("left",u.x,"important"),s.style.setProperty("top",u.y,"important"),s.style.setProperty("margin-top","-"+parseFloat(u.y)*(e(s).outerHeight()/100)+"px","important"),s.style.setProperty("margin-left","-"+parseFloat(u.x)*(e(s).outerWidth()/100)+"px","important")):(s.style.removeProperty("left"),s.style.removeProperty("top")),iowisp.lycan.night(!0)}),!1});var o,l,s,r,c=document.querySelector(".callpy_chat_wrapper2");e(n.callpy_chat_side_resize).on("mousedown",function(t){o=t.clientX,l=t.clientY,s=parseInt(document.defaultView.getComputedStyle(c).width,10),r=parseInt(document.defaultView.getComputedStyle(c).height,10),e(document.body).addClass("callpy_resize"),e(document).on("mousemove.callpy_resize",function(t){return c.style.width=s-t.clientX+o+"px",e.callpy_chat("_scroll").update(),t.stopPropagation(),!1}).on("mouseup.callpy_resize",function(){e(document).off(".callpy_resize"),e(document.body).removeClass("callpy_resize"),iowisp.lycan.night(!0)})}),e(n.offline_form).on("submit",function(){return!1}),e(n.callpy_offline_form_name).on("input",function(){""!==e(this).val()&&""!==e(n.callpy_offline_textarea).val()?e(n.offline_button_next).removeClass("callpy-process-button-disabled"):e(n.offline_button_next).addClass("callpy-process-button-disabled")}),e(n.callpy_offline_textarea).on("input",function(){""!==e(this).val()&&""!==e(n.callpy_offline_form_name).val()?e(n.offline_button_next).removeClass("callpy-process-button-disabled"):e(n.offline_button_next).addClass("callpy-process-button-disabled")}),e(n.offline_button_next).on("click",function(){if(!e(this).hasClass("callpy-process-button-disabled")){if(e(n.offline_form).addClass("callpy_offline_step2"),"side"==iowisp.invoker.site_info.chat_type)return void e("#callpy_offline_form_button").prop("disabled",!1);e(".callpy_offline_body_choose ul li").eq(0).trigger("click")}}),e(n.callpy_offline_form_button).on("click",function(){a("_send_offline_self")}),e("#callpy_label_side_tooltip_close").on("click",function(){e(n.callpy_wrapper).addClass("callpy_status_side_hidetool"),iowisp.lycan.night(!0)}),e(".callpy_label_side_body").on("mouseover",function(){clearTimeout(i),e(n.callpy_wrapper).removeClass("callpy_label_side_body_animation").removeClass("callpy_status_side_hidetool"),iowisp.lycan.night(!0)}),e("#callpy_label_side_tooltip--input").on("click",function(){e.callpy_chat("show",!0),e("#callpy_chat_input_box").focus()}),e(".callpy_label_side_tooltip").on("click",function(t){0==e(t.target).closest("#callpy_label_side_tooltip_close").length&&(e.callpy_chat("show",!0),e("#callpy_chat_input_box").focus())}),e(".callpy_label_side_offline_tooltip").on("click",function(t){0==e(t.target).closest(".callpy_label_offline_closer").length&&e.callpy_chat("show",!0)}),e(".callpy_label_offline_closer").on("click",function(){e(n.callpy_wrapper).addClass("callpy_status_side_hidetool"),iowisp.lycan.night(!0)});var p={animations:ModernizrCallpy.cssanimations},d={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"},u=d[ModernizrCallpy.prefixed("animation")],_=function(e,t){var i=function(e){p.animations&&e.target!=this||t&&"function"==typeof t&&t.call()};p.animations?e.addEventListener(u,i):i()};_(document.querySelector(".callpy_chat_wrapper2"),function(){e(n.callpy_wrapper).removeClass("callpy_status_chat_hide--side").removeClass("callpy_status_chat_show--side"),iowisp.lycan.night(!0)}),_(document.querySelector(".callpy_label_side_body"),function(){console.log("анимация ярлыка завершена"),e(n.callpy_wrapper).removeClass("callpy_status_chat_show--sideLabel").removeClass("callpy_label_side_body_animation").removeClass("callpy_status_chat_hide--sideLabel"),e.callpy_status("api").visible||(i=setTimeout(function(){e(n.callpy_wrapper).addClass("callpy_label_side_body_animation")},7e3)),iowisp.lycan.night(!0)})},_send_offline_self:function(){var t=(iowisp.invoker.site_info,{message:e("#callpy_offline_textarea_self"),mail:e("#callpy_offline_form_email_self"),name:e("#callpy_offline_form_name_self"),phone:e("#callpy_offline_form_phone_self")}),i={action:"offline_email",site:iowisp.invoker.site,site_id:iowisp.invoker.site_id,key:iowisp.invoker.key,channel:iowisp.invoker.channel},a=!1,n=e("#callpy_offline_form_button_self");i.message=t.message.val(),i.name=t.name.val(),i.phone=t.phone.val(),t.mail.val().length<=0?(t.mail.parent().css("border","1px solid Red"),a=!0):(a=!1,t.mail.parent().css("border","1px solid #cbc9c9"),i.mail=t.mail.val()),a||(n.attr("data-callpy-status","sending"),e.post(("http:"==location.protocol?kunnka.bloodseeker.replace("https","http"):kunnka.bloodseeker)+"d/",i,function(i){n.attr("data-callpy-status","done"),e("#callpy_offline_form_self").hide(),e(".callpy_offline_succes").show(),t.name.val(""),t.message.val(""),t.phone.val(""),t.mail.val(""),n.attr("data-callpy-status","send"),e("#callpy_offline_button_next").addClass("callpy-process-button-disabled")}))},_welcome_message:function(){if(!sven&&!e.callpy_status("api").offline&&5!=iowisp.invoker.type){var t,i=(iowisp.invoker.site_info.departments[iowisp.invoker.department_id].name,iowisp.earthshaker[iowisp.invoker.peer_key].name);t='<div class="callpy_chat_welcome_message_wrapper">                                <div class="callpy_chat_welcome_message_body">                                    <div class="callpy_chat_welcome_message_picture"><div style="background-image: url(\'//callpy.com/images/avatar/'+iowisp.earthshaker[iowisp.invoker.peer_key].avatar+'.jpg\')"></div></div>                                    <div class="callpy_chat_welcome_message_title">'+i+'</div>                                    <div class="callpy_chat_welcome_message_descr">'+iowisp.wisp.replacePatterns(iowisp.invoker.site_info.label_toptext)+"</div>                                </div>                            </div>"}}}}(jQuery1,window,void 0),function(e,t,i){e.callpy_settings_self=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void 0:a._init.apply(this,arguments)};var a={_init:function(){},set:function(t){for(var i in t)switch(i){case"label_color":e(".callpy_label_side_body, .callpy_label_side_offline_tooltip, .callpy_label_side_offline_tooltip--corner").css("background-color","#"+t[i]),e(".callpy_label_avatar > div > span").css("color","#"+t[i]),e("#callpy_label_offline_closer").css("fill","#"+t[i]);break;case"font_label_color":e(".callpy_label_side_offline_tooltip--text").css("color","#"+t[i]),e("#callpy_label_side_offline_tooltip_icon").css("fill","#"+t[i]),e(".callpy_label_offline_closer").css("background","#"+t[i]);break;case"label_toptext":e(".callpy_label_side_tooltip--text").html(iowisp.wisp.replacePatterns(t[i]));break;case"message_color":e(".callpy_client_chat_icon, .callpy_client_chat_icon_logo").css("background-color","#"+t[i]);break;case"lbl_color":e(".callpy_chat_forms_box").css("border-color","#"+t[i]),e("#callpy_offline_body_icon, #callpy_offline_body_icon2").css("fill","#"+t[i]);break;case"brandlogo":case"brand_switch":1==parseInt(iowisp.invoker.site_info.brand_switch)?(e("#callpy_wrapper").addClass("callpy_status_side_logo"),e(".callpy_label_avatar--logo, .callpy_client_chat_icon_logo").html(e("<div/>",{css:{backgroundImage:"url(//callpy.com/images/chat/brandlogo/"+iowisp.invoker.site_info.brandlogo+")"}}))):e("#callpy_wrapper").removeClass("callpy_status_side_logo");break;case"font_color":e(".callpy_client_chat_menu_close i, .callpy_client_chat_menu_button i").css("color","#"+t[i]),e("#callpy_client_chat_menu_button_svg").css("fill","#"+t[i]);break;case"offline_name":e(".callpy_client_offline_title").html(t[i]);break;case"offline_text":e(".callpy_client_offline_descr").html(iowisp.wisp.replacePatterns(t[i]))}iowisp.lycan.night()}}}(jQuery1,window,void 0),function(e){e.callpy_select=function(i){return a[i]?a[i].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof i&&i?void e.error("Метод с именем "+i+" не существует для "+t):a.init.apply(this,arguments)};var t=(e.callpy_select,"$jcallpy.callpy_select"),i=[],a={init:function(){return i},create:function(t){var a=e.extend({client_id:!1,element_id:!1,cords:{upLeft:{x:!1,y:!1},botRight:{x:!1,y:!1}}},t);i.push({element_id:a.element_id,cords:{upLeft:a.cords.upLeft,botRight:a.cords.botRight}});var n=e("<div/>",{id:"callpy-remote-tools-box-"+a.element_id,css:{width:a.cords.botRight.x-a.cords.upLeft.x,height:a.cords.botRight.y-a.cords.upLeft.y,top:a.cords.upLeft.y,left:a.cords.upLeft.x},html:""});return n.addClass("remote-selected-page-box").html('<div class="callpy_chat_baloon_close">×</div>').addClass("callpy-animation-target"),e(document.body).append(n),n.click(function(){iowisp.nightstalker.phoenix({action:"delete_select_area",element_id:e(this).attr("id").replace("callpy-remote-tools-box-","")}),e.callpy_select("delete",e(this).attr("id").replace("callpy-remote-tools-box-","")),e(this).remove()}),i},"delete":function(e){for(var t=0;t<i.length;t++)if(i[t].element_id==e)return i.splice(t,1)}}}(jQuery1),function(e){e.callpy_pointer=function(i){return a[i]?a[i].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof i&&i?void e.error("Метод с именем "+i+" не существует для "+t):a.init.apply(this,arguments)};var t=(e.callpy_pointer,"$jcallpy.callpy_pointer"),i=[],a={init:function(){return i},create:function(t){var a=e.extend({
client_id:!1,element_id:!1,circle:{left:!1,top:!1},tooltip:{left:!1,top:!1},message:!1},t);i.push({element_id:a.element_id,circle:{left:a.circle.left,top:a.circle.top},tooltip:{left:a.tooltip.left,top:a.tooltip.top},message:a.message});var n=e("<div/>",{id:"remote-control-circle"+a.element_id,css:{left:a.circle.left+"px",top:a.circle.top+"px"}}).addClass("remote-control-circle").addClass("callpy-animation-target");e(document.body).append(n);var o='                                <div class="callpy_lable_tooltip_body">                                    <div class="callpy_chat_baloon_close" onclick="$jcallpy.callpy_pointer(\'delete\', '+a.element_id+')">×</div>                                    <div>                                        <div style="position: relative; float: left;width: 100%;">                                            '+iowisp.escapeHtml(a.message)+'                                        </div>                                        <div style="clear: both;"></div>                                    </div>                                </div>                                <div class="callpy_lable_corner"></div>                                <div class="callpy_lable_corner_white"></div>',l={tooltipElem:e("<div/>",{"class":"callpy_lable_tooltip_wrapper callpy-animation-target",html:o,id:"callpy_tooltip_pointer_block"+a.element_id,css:{left:a.tooltip.left+"px",top:a.tooltip.top+"px"}}),html:"",offset:20};l.tooltipElem.appendTo(document.body);var s=13+parseInt(a.circle.left)-(l.tooltipElem.outerWidth()/2^0);if(console.log(s),0>s&&(e("#callpy_tooltip_pointer_block"+a.element_id).find(".callpy_lable_corner, .callpy_lable_corner_white").animate({marginLeft:"-="+Math.abs(s)},0),s=0),s+l.tooltipElem.outerWidth()>e(document).width()){var r=s+l.tooltipElem.outerWidth()-e(document).width();s-=r,e("#callpy_tooltip_pointer_block"+a.element_id).find(".callpy_lable_corner, .callpy_lable_corner_white").animate({marginLeft:"+="+r},0)}return i},"delete":function(t){iowisp.nightstalker.phoenix({action:"delete_visual_message",element_id:t}),e("#remote-control-circle"+t+", #callpy_tooltip_pointer_block"+t).remove();for(var a=0;a<i.length;a++)if(i[a].element_id==t)return i.splice(a,1)}}}(jQuery1),kunnka.CChat=function(){this.module_name="Chat ",this.module_log_rang=100;var e=this;1==sven?(this.history=callpy_storage.iowisp.m_chat.history,this.first_time=!0,this.save_state=0,this.lich="no_call"):(this.history=[],this.first_time=!0,this.save_state=0,this.lich="no_call"),this.call_type=1,this.managerWriteTimer=null,this.init=function(){if(1==iowisp.invoker.type){if(iowisp.initialize_data.init_data.managers.length>0&&(!sven||0==iowisp.initialize_data.init_data.online))for(var e=0;e<iowisp.initialize_data.init_data.managers.length;e++)iowisp.viper({action:"register_client",key:iowisp.initialize_data.init_data.managers[e].key,type:2,far_id:0,name:iowisp.initialize_data.init_data.managers[e].name,subname:iowisp.initialize_data.init_data.managers[e].subname,avatar:iowisp.initialize_data.init_data.managers[e].avatar,position:iowisp.initialize_data.init_data.managers[e].position,status:iowisp.initialize_data.init_data.managers[e].status,site_id:iowisp.initialize_data.init_data.managers[e].site_id,mail:iowisp.initialize_data.init_data.managers[e].mail,channel:iowisp.initialize_data.init_data.managers[e].channel,webRTCsupp:iowisp.initialize_data.init_data.managers[e].webRTCsupp,departments:iowisp.initialize_data.init_data.managers[e].departments});1==iowisp.invoker.site_info.mobileOff&&iowisp.isMobile()||$jcallpy.callpy_init(),iowisp.initialize_data.init_data.shadowfiend?iowisp.shadowfiend({action:"manager_changed",user:iowisp.initialize_data.init_data.shadowfiend.user,manager:iowisp.initialize_data.init_data.shadowfiend.manager}):(sven||$jcallpy.callpy_consultant("set"),iowisp.lycan.cripping()),iowisp.haste.automessage_pageCheck()}},this.setUtm=function(){$jcallpy("#callpy_link").attr("href","http://callpy.com/?utm_source="+iowisp.invoker.site+"&utm_medium="+(iowisp.invoker.peer_key?"online":"offline")+"&utm_term="+($jcallpy.callpy_status("api").visible?"chat":"shortcut")+"&utm_campaign=callpy"),$jcallpy("#shortcut_callpy_link").attr("href","http://callpy.com/?utm_source="+iowisp.invoker.site+"&utm_medium="+(iowisp.invoker.peer_key?"online":"offline")+"&utm_term="+($jcallpy.callpy_status("api").visible?"chat":"shortcut")+"&utm_campaign=callpy")},this.call=function(){var e=localStorage.getItem("sandkung");e?1==e&&(1==iowisp.magnus.webRTCsupp&&1==iowisp.earthshaker[iowisp.invoker.peer_key].webRTCsupp?iowisp.magnus.wildaxes(!0,!0):iowisp.magnus.amplify()):(iowisp.lycan.restoreInIE&&(iowisp.lycan.handleCallFlag=!1),localStorage.setItem("sandkung",2),1==iowisp.magnus.webRTCsupp&&1==iowisp.earthshaker[iowisp.invoker.peer_key].webRTCsupp?iowisp.m_chat.call_webrtc():iowisp.magnus.amplify())},this.endCall=function(t){var i=localStorage.getItem("sandkung");1==i?e.end_dialup_from_self():2==i?e.end_dialup_from_self(t):3==i&&iowisp.m_chat.end_call_from_self()},this.end_call_webrtc=function(){e.lich="no_call",e.save_state=0,document.getElementById("callpy_webrtc_video_tag")&&(document.getElementById("callpy_webrtc_video_tag").src=""),document.getElementById("callpy_webrtc_video_self_tag")&&(document.getElementById("callpy_webrtc_video_self_tag").src=""),iowisp.magnus.pc&&iowisp.magnus.pc.close(),iowisp.magnus.stream&&iowisp.magnus.stream.getTracks().forEach(function(e){e.stop()}),iowisp.magnus.pc=null,iowisp.magnus.stream=null,iowisp.magnus.remotestream=null},this.rubick=function(){return e.lich="no_call",e.first_time=!0,e.save_state=0,!0},this.end_call_from_peer=function(){"call"==iowisp.m_chat.lich?(iowisp.lycan.restoreInIE&&(iowisp.lycan.handleCallFlag=!1),localStorage.removeItem("sandkung"),"webrtc"==iowisp.magnus.call_type?e.end_call_webrtc():iowisp.magnus.qop(),$jcallpy.callpy_status("set","call_off"),iowisp.magnus.stop_ping(),$jcallpy.callpy_call("_removeIframe")):$jcallpy.callpy_status("set","call_off")},this.end_call_from_self=function(){iowisp.nightstalker.phoenix(iowisp.tidehunter.antimage("end_call")),iowisp.lycan.restoreInIE&&(iowisp.lycan.handleCallFlag=!1),localStorage.removeItem("sandkung"),"call"==iowisp.m_chat.lich&&("webrtc"==iowisp.magnus.call_type?e.end_call_webrtc():iowisp.magnus.qop(),iowisp.magnus.stop_ping(),$jcallpy.callpy_call("_removeIframe"))},this.end_dialup_from_peer=function(){if("no_call"!=iowisp.m_chat.lich){if("3"==localStorage.getItem("sandkung"))return void e.end_call_from_peer();iowisp.lycan.restoreInIE&&(iowisp.lycan.handleCallFlag=!1),localStorage.removeItem("sandkung"),"webrtc"==iowisp.magnus.call_type?("incoming"==iowisp.m_chat.lich?$jcallpy.callpy_status("set","incoming_call_off"):$jcallpy.callpy_status("set","dial_off"),e.end_call_webrtc()):("incoming"==iowisp.m_chat.lich?$jcallpy.callpy_status("set","incoming_call_off"):$jcallpy.callpy_status("set","dial_off"),iowisp.magnus.qop()),iowisp.magnus.stop_ping(),clearTimeout(iowisp.magnus.dialupTimer)}},this.end_dialup_from_self=function(t){t||iowisp.nightstalker.phoenix(iowisp.tidehunter.antimage("end_dialup")),iowisp.lycan.restoreInIE&&(iowisp.lycan.handleCallFlag=!1),localStorage.removeItem("sandkung"),"no_call"!=iowisp.m_chat.lich&&("incoming"==iowisp.m_chat.lich||"calling_to_manager"==iowisp.m_chat.lich,"webrtc"==iowisp.magnus.call_type?e.end_call_webrtc():iowisp.magnus.qop()),iowisp.magnus.stop_ping(),clearTimeout(iowisp.magnus.dialupTimer)},this.start_call=function(t){return e.lich="call",iowisp.nightstalker.flash_object.to_flash("to_flash",{action:"start_call",withVideo:t}),$jcallpy.callpy_call("_createIframe"),localStorage.setItem("callpy_call_time",(new Date).getTime()),!0},this.answer=function(t){1==iowisp.magnus.webRTCsupp&&1==iowisp.earthshaker[iowisp.invoker.peer_key].webRTCsupp?iowisp.magnus.stream||t.noOffer?(e.lich="call",$jcallpy.callpy_call("_createIframe"),localStorage.setItem("callpy_call_time",(new Date).getTime()),t.noOffer||localStorage.setItem("sandkung","3"),t.noOffer?$jcallpy.callpy_status("set","call_on",!0):$jcallpy.callpy_status("set","call_on")):iowisp.magnus.stream||(e.lich="no_call",$jcallpy.callpy_status("set","call_on")):document.getElementById("callpy_access_to_equip_flash")?(e.lich="call",$jcallpy.callpy_call("_createIframe"),localStorage.setItem("callpy_call_time",(new Date).getTime()),iowisp.nightstalker.flash_object.to_flash("to_flash",{action:"start_call",withVideo:!1}),localStorage.setItem("sandkung","3"),$jcallpy.callpy_status("set","call_on")):(e.lich="no_call",$jcallpy.callpy_status("set","call_on"))},this.call_webrtc=function(){e.save_state=1,e.lich="calling_to_manager",iowisp.magnus.wildaxes(!0,!0)},this.reincarnation=function(t){if(iowisp.nightstalker.phoenix(iowisp.tidehunter.antimage("send_message",{0:t,1:iowisp.earthshaker[iowisp.invoker.peer_key].name}))){iowisp.m_chat.history.length||iowisp.nightstalker.to_fms({action:"update_status",status:"1"+($jcallpy.callpy_status("api").visible&&iowisp.invoker.peer_key?"1":"0")+"1",peer_key:iowisp.invoker.peer_key?iowisp.invoker.peer_key:0,domain:iowisp.invoker.site,referer:encodeURIComponent(window.location.href),width:$jcallpy(window).width(),title:document.title}),e.history.push({message:t,receiver:iowisp.invoker.key,sender:iowisp.invoker.peer_key,received:0,read:1});var i=localStorage.getItem("callpy_greets");i=i?JSON.parse(i):{};for(var a=0;a<iowisp.invoker.site_info.greets.length;a++)i[iowisp.invoker.site_info.greets[a].id]||(i[iowisp.invoker.site_info.greets[a].id]=1);return localStorage.setItem("callpy_greets",JSON.stringify(i)),localStorage.getItem("callpy_hm")||(localStorage.setItem("callpy_hm",(new Date).getTime()),iowisp.haste.holding_init()),!0}return!1},this.kotel=function(t){iowisp.m_chat.history.length||iowisp.nightstalker.to_fms({action:"update_status",status:"2"+($jcallpy.callpy_status("api").visible&&iowisp.invoker.peer_key?"1":"0")+"1",peer_key:iowisp.invoker.peer_key?iowisp.invoker.peer_key:0,domain:iowisp.invoker.site}),t.mtype&&"file"==t.mtype||(t.message=iowisp.urlHighlight(t.message)),$jcallpy.callpy_message("add",{text:t.message,from:1,time:(new Date).getTime(),read:0}),e.history.push({message:t.message,receiver:t.peer_key,sender:t.key,received:1,read:0});var i=localStorage.getItem("callpy_greets");i=i?JSON.parse(i):{};for(var a=0;a<iowisp.invoker.site_info.greets.length;a++)i[iowisp.invoker.site_info.greets[a].id]||(i[iowisp.invoker.site_info.greets[a].id]=1);if(localStorage.setItem("callpy_greets",JSON.stringify(i)),iowisp.haste.holdingTimer){for(var n in iowisp.haste.holdingTimer)clearTimeout(iowisp.haste.holdingTimer[n]);iowisp.haste.holdingTimer=null;for(var o={},a=0;a<iowisp.invoker.site_info.holds.length;a++)o[iowisp.invoker.site_info.holds[a].id]=1;localStorage.callpy_holds=JSON.stringify(o)}e.setMessagesRead()},this.feast=function(t){e.history=t.history;for(var i=!1,a=0;a<e.history.length;a++){var n=!0;a==e.history.length-1&&(n=!1),0==e.history[a].read&&(i=!0),$jcallpy.callpy_message("add",{text:e.history[a].message,from:e.history[a].sender==iowisp.invoker.key?0:1,animate:0,mass:!0,read:e.history[a].read,name:e.history[a].managerName,time:1e3*e.history[a].time})}i&&e.setMessagesRead()},this.setMessagesRead=function(){if(iowisp.lycan.toss&&$jcallpy.callpy_status("api").visible){for(var t=!1,i=e.history.length-1;i>=0&&(1!=e.history[i].received||0==e.history[i].read);i--)e.history[i].read=1,t=!0;t&&iowisp.nightstalker.to_fms({action:"setMessagesRead",site_id:iowisp.invoker.site_id,site:iowisp.invoker.site,channel:iowisp.invoker.channel,key:iowisp.invoker.key})}},this.craggy=function(e){if(iowisp.invoker.site_info[e.name]=e.value,"status"==e.name&&"1"==e.value)for(var t=0;t<e.managers.length;t++)iowisp.earthshaker[e.managers[t].key]||iowisp.viper(e.managers[t]);"chat_type"==e.name&&(localStorage.setItem("callpy_lastchat",(new Date).getTime()),localStorage.removeItem("tiny")),iowisp.lycan.cripping();var i={};i[e.name]=e.value,$jcallpy.callpy_settings("set",i)},this.get_user_avatar=function(e){return iowisp.earthshaker[e]?{normal:iowisp.earthshaker[e].avatar+".jpg",tail:iowisp.earthshaker[e].avatar+"_tail.png"}:void 0},this.managerWriting=function(){$jcallpy.callpy_message("add",{type:"typing",from:1,time:(new Date).getTime(),read:0}),clearTimeout(e.managerWriteTimer),e.managerWriteTimer=setTimeout(function(){$jcallpy.callpy_message("clearTyping")},5e3)}},kunnka.abaddon=function(){this.module_name="Flash ",this.module_log_rang=100,this.PeerConnection=null,this.IceCandidate=null,this.SessionDescription=null,this.pc=null,this.pc_config=null,this.stream=null,this.audiostream=null,this.remotestream=null,this.audio=!1,this.video=!1,this.video_support=!1,this.connected_to_rp=!1,this.webRTCsupp=0,this.call_type=null,this.stateTimer=null,this.pingTimer=null,this.pingRequestTimer=null,this.disconnectLimit=5e3,this.pingLimit=1e4,this.pingCount=0,this.dialupTimer=null,this.dialupLimit=25e3,this.webRTCtype=navigator.mozGetUserMedia?"firefox":"chrome",this.peer_webRTCtype=null,this.access_equip=!1,this.iceCandidateBuffer=[],this.receivedDescription=!1,this.videostream=null,(window.mozRTCPeerConnection||window.webkitRTCPeerConnection)&&(this.webRTCsupp=1);var e=this;this.flash_path=kunnka.bloodseeker+"swf/",this.nsp=null,this.crush=function(){iowisp.nightstalker.flash_object=document.getElementById("callpy_access_to_equip_flash")},this.bash=function(){if(!e.connected_to_rp){if(e.connected_to_rp=!0,iowisp.invoker.site)e.nsp=iowisp.realplexor.bersekersblood(iowisp.invoker.site_id,iowisp.invoker.site);else{e.nsp="callpy";for(var t in iowisp.invoker.site_info){e.nsp=iowisp.realplexor.bersekersblood(iowisp.invoker.site_id,iowisp.invoker.site_info[t].domain);break}}if(iowisp.realplexor.init("https://rp."+kunnka.callpy_domain,e.nsp),2!=iowisp.invoker.type)null==localStorage.getItem("callpy_cid")?(iowisp.realplexor.setCursor(iowisp.invoker.site_id+"_"+(1==iowisp.invoker.type?"c_":"m_")+iowisp.invoker.key+"_"+iowisp.invoker.channel,iowisp.invoker.timestamp),localStorage.setItem("callpy_cid",iowisp.invoker.timestamp)):iowisp.realplexor.setCursor(iowisp.invoker.site_id+"_"+(1==iowisp.invoker.type?"c_":"m_")+iowisp.invoker.key+"_"+iowisp.invoker.channel,parseFloat(localStorage.getItem("callpy_cid"))+.001),iowisp.realplexor.lifebreak(iowisp.invoker.site_id+"_"+(1==iowisp.invoker.type?"c_":"m_")+iowisp.invoker.key+"_"+iowisp.invoker.channel,function(e,t,i){e=JSON.parse(e),localStorage.setItem("callpy_cid",i),localStorage.setItem("callpy_lastRpx",(new Date).getTime()),iowisp.nightstalker.storm(e)});else{null==localStorage.getItem("callpy_mcid")&&localStorage.setItem("callpy_mcid",JSON.stringify({})),iowisp.legion.cids=JSON.parse(localStorage.getItem("callpy_mcid"));var i;for(var t in iowisp.invoker.channel)"manager"==t?(i="manager_"+iowisp.invoker.key+"_"+iowisp.invoker.channel[t],!iowisp.legion.cids[t]||(new Date).getTime()/1e3-iowisp.legion.cids[t]>15?iowisp.realplexor.setCursor(i,iowisp.initialize_data.timestamp):iowisp.realplexor.setCursor(i,parseFloat(iowisp.legion.cids[t])+.001),iowisp.realplexor.lifebreak(i,function(e,t,i){e=JSON.parse(e),iowisp.legion.cids.manager=i,localStorage.setItem("callpy_mcid",JSON.stringify(iowisp.legion.cids)),iowisp.legion.from_rlpx(e)})):(i=t+"_m_"+iowisp.invoker.key+"_"+iowisp.invoker.channel[t],"1"==iowisp.invoker.site_info[t].status&&(iowisp.legion.cids[t]?iowisp.realplexor.setCursor(i,parseFloat(iowisp.legion.cids[t])+.001):iowisp.realplexor.setCursor(i,iowisp.initialize_data.timestamp),iowisp.realplexor.lifebreak(i,function(t,i,a){t=JSON.parse(t);var n=i.split("_");n=n[0].replace(e.nsp,""),iowisp.legion.cids[n]=a,localStorage.setItem("callpy_mcid",JSON.stringify(iowisp.legion.cids)),t.site_id=n,iowisp.nightstalker.storm(t)})))}iowisp.realplexor.execute()}},this.isConnectedToRpx=function(){return(new Date).getTime()-localStorage.getItem("callpy_lastRpx")<3e4},this.amplify=function(t){e.call_type="flash",e.access_equip=!0,swfobject.hasFlashPlayerVersion("10")?(t=t?t:{},t.flash_name=t.flash_name?t.flash_name:e.flash_path+"callpyFlash.swf",t.flash_place=t.flash_place?t.flash_place:"callpy_access_to_equip_flash",t.flash_width=t.flash_width?t.flash_width:"215",t.flash_height=t.flash_height?t.flash_height:"138",t.flash_version=t.flash_version?t.flash_version:"9.0.0",t.flash_install=t.flash_install?t.flash_install:"playerProductInstall.swf",t.flash_vars=t.flash_vars?t.flash_vars:{},t.flash_params=t.flash_params?t.flash_params:{},t.flash_params.wmode=t.flash_params.wmode?t.flash_params.wmode:"opaque",t.flash_params.allowscriptaccess=t.flash_params.allowscriptaccess?t.flash_params.allowscriptaccess:"always",t.flash_params.embed=t.flash_params.embed?t.flash_params.embed:"callpy_access_to_equip_flash",t.flash_attribs=t.flash_attribs?t.flash_attribs:{},t.flash_on_load=t.flash_on_load?t.flash_on_load:e.crush,swfobject.embedSWF(t.flash_name,t.flash_place,t.flash_width,t.flash_height,t.flash_version,t.flash_install,t.flash_vars,t.flash_params,t.flash_attribs,t.flash_on_load)):(e.access_equip=!1,$jcallpy("#callpy_access_to_equip_overlay_flash").css("left","-3000px"),localStorage.removeItem("sandkung"),iowisp.m_chat.lich="no_call",$jcallpy("#callpy_call_button_call").show(),$jcallpy("#callpy_call_button_connection").hide())},this.qop=function(){"call"==iowisp.m_chat.lich&&iowisp.nightstalker.flash_object.to_flash("to_flash",{action:"end_call"}),iowisp.m_chat.lich="no_call",iowisp.wisp&&(iowisp.m_chat.save_state=0),swfobject.removeSWF("callpy_access_to_equip_flash"),iowisp.nightstalker.flash_object=null,$jcallpy("#callpy_access_to_equip_overlay_flash").remove()},this.wildaxes=function(t,i){e.call_type="webrtc",e.PeerConnection=window.mozRTCPeerConnection||window.webkitRTCPeerConnection,e.IceCandidate=window.mozRTCIceCandidate||window.RTCIceCandidate,e.SessionDescription=window.mozRTCSessionDescription||window.RTCSessionDescription,navigator.getUserMedia=navigator.getUserMedia||navigator.mozGetUserMedia||navigator.webkitGetUserMedia,e.audio=!0,e.video=!1,e.video_support=!0,e.access_equip=!0,navigator.getUserMedia({audio:!0,video:!1},e.callofwind,function(t){e.access_equip=!1;var i=localStorage.getItem("sandkung");iowisp.m_chat.lich="no_call","2"==i?$jcallpy.callpy_status("set","equip_mic_off",!0):"1"==i&&($jcallpy.callpy_status("set","equip_mic_off",!0),iowisp.nightstalker.phoenix(iowisp.tidehunter.antimage("end_dialup"))),localStorage.removeItem("sandkung"),"DevicesNotFoundError"==t.name?alert("Для звонка необходим микрофон!"):t.message.indexOf("secure origins")===!1?alert("Ошибка доступа к микрофону! Возможно, микрофон занят другим приложением. Закройте все приложения и повторите попытку."):alert("Для доступа к микрофону в браузере Chrome требуется защищенный протокол https. К сожалению, данный сайт его не поддерживает, вы можете использовать для звонка, например, Firefox.")})},this.callofwind=function(t){if(e.access_equip=!1,iowisp.wisp){var i=localStorage.getItem("sandkung");if(!i)return e.pc&&e.pc.close(),t.getTracks().forEach(function(e){e.stop()}),e.pc=null,e.stream=null,t=null,void(e.remotestream=null);"2"==i?($jcallpy.callpy_status("set","dial_on",!0),iowisp.m_chat.lich="calling_to_manager"):(iowisp.lycan.restoreInIE&&(iowisp.lycan.handleCallFlag=!1),localStorage.setItem("sandkung",3),iowisp.m_chat.answer({noOffer:!0}))}else if(iowisp.legion){if($jcallpy("#callpy_access_to_equip_overlay").remove(),$jcallpy(document.body).removeClass("callpy_access_equip_overlay"),"no_call"==iowisp.m_chat.lich||"call"==iowisp.m_chat.lich)return;"incoming"==iowisp.m_chat.lich?$jcallpy.chat("accept_call",{id:iowisp.invoker.peer_key,site_id:iowisp.invoker.site_id}):"calling_to_client"==iowisp.m_chat.lich&&$jcallpy.chat("start_call")}e.pc_config={iceServers:[{url:"turn:"+kunnka.callpy_domain+":3478",username:"dimaadmin",credential:"Xvm7djqiYhXnTAWA"},{url:"stun:"+kunnka.callpy_domain+":3478"}]},e.pc=new e.PeerConnection(e.pc_config,void 0),e.stream=t,e.receivedDescription=!1,e.pc.addStream(e.stream),e.pc.onicecandidate=e.innerbeast,e.pc.onaddstream=e.roar,e.pc.oniceconnectionstatechange=function(){e.pc&&("connected"!=e.pc.iceConnectionState&&"completed"!=e.pc.iceConnectionState||(iowisp.legion?document.getElementById("callpy_webrtc_video_tag").src=URL.createObjectURL(e.pc.getRemoteStreams()[0]):document.getElementById("callpy_client_video").src=URL.createObjectURL(e.pc.getRemoteStreams()[0])))},iowisp.wisp?"2"==i?(iowisp.nightstalker.phoenix(iowisp.tidehunter.antimage("enigma",{0:1,1:e.webRTCtype})),e.dialupTimer=setTimeout(e.autoEndDialup,e.dialupLimit)):(e.peer_webRTCtype!=e.webRTCtype&&"chrome"==e.webRTCtype&&e.createOffer(),iowisp.nightstalker.phoenix(iowisp.tidehunter.antimage("necrophos",{0:e.webRTCtype}))):iowisp.legion&&("incoming"==iowisp.m_chat.lich?(iowisp.m_chat.lich="call",e.peer_webRTCtype!=e.webRTCtype&&"chrome"==e.webRTCtype&&e.createOffer(),iowisp.nightstalker.phoenix(iowisp.tidehunter.antimage("necrophos",{0:e.webRTCtype}))):"calling_to_client"==iowisp.m_chat.lich&&(iowisp.nightstalker.phoenix(iowisp.tidehunter.antimage("enigma",{0:1,1:e.webRTCtype})),e.dialupTimer=setTimeout(e.autoEndDialup,e.dialupLimit))),e.start_ping(),e.pingCount=0},this.start_ping=function(){iowisp.nightstalker.phoenix(iowisp.tidehunter.antimage("ping",{0:"request"})),e.pingTimer=setTimeout(e.ping_failed,e.disconnectLimit)},this.ping_request=function(e){iowisp.legion?iowisp.legion.selected_user==e.key&&iowisp.invoker.site_id==e.site_id?"call"!=iowisp.m_chat.lich&&"incoming"!=iowisp.m_chat.lich||iowisp.nightstalker.xspot("to_peer",{action:"ping",pingtype:"answer",site_id:iowisp.invoker.site_id,key:iowisp.invoker.key,type:2,peer_key:e.key,peer_type:1,domain:iowisp.invoker.site,where:"to_fms"}):iowisp.nightstalker.xspot("to_peer",{action:"ping",pingtype:"answer",site_id:e.site_id,key:iowisp.invoker.key,type:2,peer_key:e.key,peer_type:1,domain:iowisp.invoker.site_info[e.site_id].domain,where:"to_fms"}):iowisp.nightstalker.phoenix(iowisp.tidehunter.antimage("ping",{0:"answer"}))},this.ping_answer=function(){e.pingCount=0,clearTimeout(e.pingTimer),clearTimeout(e.pingRequestTimer),(iowisp.wisp&&(e.pc||iowisp.nightstalker.flash_object)||iowisp.legion&&(e.pc&&"closed"!=e.pc.signalingState||iowisp.nightstalker.flash_object))&&(e.pingRequestTimer=setTimeout(e.start_ping,e.disconnectLimit))},this.ping_failed=function(){e.pc&&(e.pingCount++,3==e.pingCount?iowisp.legion?(console.log("PING FAILED - MANAGER"),"call"==iowisp.m_chat.lich?iowisp.m_chat.end_call_from_peer():(iowisp.m_chat.end_dialup_from_peer({key:iowisp.legion.selected_user,site_id:iowisp.invoker.site_id}),iowisp.nightstalker.phoenix(iowisp.tidehunter.antimage("end_dialup")))):(console.log("PING FAILED - CLIENT"),"call"==iowisp.m_chat.lich?iowisp.m_chat.end_call_from_peer():(iowisp.m_chat.end_dialup_from_peer(),iowisp.nightstalker.phoenix(iowisp.tidehunter.antimage("end_dialup")))):(console.log("NO ANSWER FOR PING REQUEST #"+e.pingCount),e.stop_ping(),e.start_ping()))},this.stop_ping=function(){clearTimeout(e.pingTimer),clearTimeout(e.pingRequestTimer)},this.autoEndDialup=function(){$jcallpy("#callpy_button_call").trigger("click")},this.innerbeast=function(e){e.candidate&&iowisp.nightstalker.phoenix(iowisp.tidehunter.antimage("icecandidate",{0:e.candidate.sdpMLineIndex,1:e.candidate.sdpMid,2:e.candidate.candidate}))},this.roar=function(t){console.log("Got remote stream"),console.log(t.stream),e.remotestream=t.stream,iowisp.legion?document.getElementById("callpy_webrtc_video_tag").src=URL.createObjectURL(t.stream):document.getElementById("callpy_client_video").src=URL.createObjectURL(t.stream)},this.breathefire=function(t){e.pc.setLocalDescription(t),iowisp.nightstalker.phoenix(iowisp.tidehunter.antimage("description",{0:{sdp:t.sdp,type:t.type},1:e.video}))},this.createAnswer=function(){e.pc.createAnswer(e.breathefire,function(e){console.log(e)},void 0)},this.createOffer=function(){console.log("Creating offer!!!"),e.pc.createOffer(e.breathefire,function(e){console.log(e)},{mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}})},this.tidebringer=function(t){e.pc&&("firefox"==e.webRTCtype&&(t.descriptor.sdp=t.descriptor.sdp.replace(/UDP\/TLS\//gi,"")),e.pc.setRemoteDescription(new e.SessionDescription(t.descriptor),e.createAnswer,function(e){console.log(e)}),e.receivedDescription=!0,e.iceCandidateBuffer.length&&e.executeCandidateBuffer())},this.torrent=function(t){e.pc&&(e.pc.setRemoteDescription(new e.SessionDescription(t.descriptor)),e.receivedDescription=!0,e.iceCandidateBuffer.length&&e.executeCandidateBuffer())},this.grow=function(t){e.pc&&(e.receivedDescription?e.pc.addIceCandidate(new e.IceCandidate({sdpMLineIndex:t.label,candidate:t.candidate})):e.iceCandidateBuffer.push(t))},this.executeCandidateBuffer=function(){for(var t=0;t<e.iceCandidateBuffer.length;t++)e.grow(e.iceCandidateBuffer[t]);e.iceCandidateBuffer=[]},this.switchToVideo=function(t){iowisp.legion&&$jcallpy.chat("access_overlay"),e.access_equip=!0,navigator.getUserMedia({audio:!0,video:!0},function(i){iowisp.legion&&$jcallpy("#callpy_access_to_equip_overlay").remove(),e.access_equip=!1,iowisp.legion&&!t?$jcallpy.chat("start_video",!0):($jcallpy.callpy_status("set","video_start",!0),$jcallpy("#callpy_video_chat").attr("checked","checked")),e.receivedDescription=!1,e.pc.close(),e.pc=new e.PeerConnection(e.pc_config,void 0),e.stream.getTracks().forEach(function(e){e.stop()}),e.stream=i,e.pc.addStream(e.stream),e.pc.onicecandidate=e.innerbeast,e.pc.onaddstream=e.roar,e.pc.oniceconnectionstatechange=function(){e.pc&&("connected"!=e.pc.iceConnectionState&&"completed"!=e.pc.iceConnectionState||(iowisp.legion?document.getElementById("callpy_webrtc_video_tag").src=URL.createObjectURL(e.pc.getRemoteStreams()[0]):document.getElementById("callpy_client_video").src=URL.createObjectURL(e.pc.getRemoteStreams()[0])))},iowisp.legion?document.getElementById("callpy_webrtc_video_self_tag").src=URL.createObjectURL(e.stream):document.getElementById("callpy_client_video_self").src=URL.createObjectURL(e.stream),iowisp.nightstalker.phoenix(iowisp.tidehunter.antimage("call_state",{0:"video"}))},function(t){e.access_equip=!1,iowisp.legion&&$jcallpy("#callpy_access_to_equip_overlay").remove(),"DevicesNotFoundError"==t.name?alert("Для переключения в режим видео необходима видеокамера!"):alert("Для переключения в режим видео необходимо разрешить доступ к видеокамере!")})},this.peer_to_video=function(t){e.receivedDescription=!1,e.pc.close(),e.pc=new e.PeerConnection(e.pc_config,void 0),e.pc.addStream(e.stream),e.pc.onicecandidate=e.innerbeast,e.pc.onaddstream=e.roar,e.pc.oniceconnectionstatechange=function(){e.pc&&("connected"!=e.pc.iceConnectionState&&"completed"!=e.pc.iceConnectionState||(iowisp.legion?document.getElementById("callpy_webrtc_video_tag").src=URL.createObjectURL(e.pc.getRemoteStreams()[0]):document.getElementById("callpy_client_video").src=URL.createObjectURL(e.pc.getRemoteStreams()[0])))},e.peer_webRTCtype==e.webRTCtype||"chrome"==e.webRTCtype?iowisp.nightstalker.phoenix(iowisp.tidehunter.antimage("call_createOffer",{})):e.createOffer(),clearTimeout(e.pingTimer),iowisp.legion?$jcallpy.chat("on_video"):iowisp.wisp&&$jcallpy.callpy_status("set","video_start")},this.switchToAudio=function(){e.access_equip=!0,navigator.getUserMedia({audio:!0,video:!1},function(t){$jcallpy("#callpy_access_to_equip_overlay").remove(),e.access_equip=!1,e.pc.close(),e.receivedDescription=!1,e.pc=new e.PeerConnection(e.pc_config,void 0),e.stream.getTracks().forEach(function(e){e.stop()}),e.stream=t,e.pc.addStream(e.stream),e.pc.onicecandidate=e.innerbeast,e.pc.onaddstream=e.roar,e.pc.oniceconnectionstatechange=function(){e.pc&&("connected"!=e.pc.iceConnectionState&&"completed"!=e.pc.iceConnectionState||(iowisp.legion?document.getElementById("callpy_webrtc_video_tag").src=URL.createObjectURL(e.pc.getRemoteStreams()[0]):document.getElementById("callpy_client_video").src=URL.createObjectURL(e.pc.getRemoteStreams()[0])))},document.getElementById("callpy_webrtc_video_self_tag").src="",iowisp.nightstalker.phoenix(iowisp.tidehunter.antimage("call_state",{0:"audio"}))},function(t){$jcallpy("#callpy_access_to_equip_overlay").remove(),e.access_equip=!1,alert("Ошибка!")})},this.peer_to_audio=function(t){e.receivedDescription=!1,e.pc.close(),e.pc=new e.PeerConnection(e.pc_config,void 0),e.pc.addStream(e.stream),e.pc.onicecandidate=e.innerbeast,e.pc.onaddstream=e.roar,e.pc.oniceconnectionstatechange=function(){e.pc&&("connected"!=e.pc.iceConnectionState&&"completed"!=e.pc.iceConnectionState||(iowisp.legion?document.getElementById("callpy_webrtc_video_tag").src=URL.createObjectURL(e.pc.getRemoteStreams()[0]):document.getElementById("callpy_client_video").src=URL.createObjectURL(e.pc.getRemoteStreams()[0])))},e.createOffer(),clearTimeout(e.pingTimer)},this.changeCallState=function(t){"true"==t.video?(e.video=!0,e.pc.removeStream(e.audiostream),e.pc.addStream(e.stream)):"false"==t.video&&(e.video=!1,e.pc.removeStream(e.stream),e.pc.addStream(e.audiostream)),e.createOffer()},this.switchCamera=function(t){iowisp.legion?e.stream.getVideoTracks().length?(e.stream.getVideoTracks()[0].enabled=t.status,t.status||iowisp.nightstalker.phoenix({action:"peerDisabledCamera"})):e.switchToVideo():e.stream.getVideoTracks().length?(e.stream.getVideoTracks()[0].enabled=t.status,t.status?($jcallpy.callpy_status("set","video_start",!0),$jcallpy("#callpy_video_chat").attr("checked","checked")):iowisp.nightstalker.phoenix({action:"peerDisabledCamera"})):e.switchToVideo(!0)}},kunnka.eldertitan=function(){this.module_name="Control ",this.module_log_rang=100;var e=this;this.top_scroll=0,this.send_scroll_flag=!0,this.send_click_flag=!0,this.send_select_flag=!0,this.lastScroll=0,this.schedule=!1,this.resizeTimer=null,this.inputTimer=null,this.textAreaTimer=null,this.xpos=null,this.ypos=null,this.mouseCoords=[],this.mouseStartTime=null,this.mouseTimer=null,this.arrowCanvas=null,this.ballCanvas=null,this.clickCanvas=null,this.init=function(){3==iowisp.invoker.type&&(iowisp.beastmaster&&iowisp.beastmaster.mirana(kunnka.bloodseeker+"/css/proxy_screen.css",document.getElementsByTagName("head")[0]),$jcallpy(document).ready(function(){iowisp.nightstalker.berserkcall(iowisp.tidehunter.antimage("get_cookies",{})),iowisp.nightstalker.berserkcall(iowisp.tidehunter.antimage("get_data",{0:"mouse_watch_button_state"}));for(var e=$jcallpy("iframe"),t=0;t<e.length;t++)$jcallpy(e[t]).attr("src").indexOf("autoplay=1")&&$jcallpy(e[t]).attr("src",$jcallpy(e[t]).attr("src").replace("autoplay=1",""))}),iowisp.nightstalker.berserkcall({action:"iframe_loaded"})),window.addEventListener?(window.addEventListener("click",e.send_click,!0),window.addEventListener("scroll",e.send_scroll,!0)):(window.attachEvent("onclick",e.send_click),window.attachEvent("onscroll",e.send_scroll)),1==iowisp.invoker.type&&($jcallpy(window).resize(function(){clearTimeout(e.resizeTimer),e.resizeTimer=setTimeout(e.hook,500)}),1==iowisp.invoker.activePage&&window.addEventListener("mousemove",e.onmousemove_handler,!0)),3==iowisp.invoker.type&&$jcallpy(window).resize(function(){e.arrowCanvas&&e.ballCanvas&&e.clickCanvas&&(e.arrowCanvas.setSize($jcallpy(document).width(),$jcallpy(document).height()),e.ballCanvas.setSize($jcallpy(document).width(),$jcallpy(document).height()),e.clickCanvas.setSize($jcallpy(document).width(),$jcallpy(document).height()))}),"complete"!=document.readyState?window.addEventListener("load",e.documentLoaded,!0):e.documentLoaded()},this.documentLoaded=function(){if(3==iowisp.invoker.type&&(e.arrowCanvas=new USER_WATCH.canvas.Create("user_watch_arrow",100),e.ballCanvas=new USER_WATCH.canvas.Create("user_watch_balls",10),e.clickCanvas=new USER_WATCH.canvas.Create("user_watch_clicks",50)),sven){var t=localStorage.getItem("callpy_fields");t&&(t=JSON.parse(t),e.setInputs(t))}localStorage.removeItem("callpy_fields"),$jcallpy("input").on("input",function(){e.send_input_change({id:$jcallpy(this).attr("id"),name:$jcallpy(this).attr("name"),type:$jcallpy(this).attr("type")},$jcallpy(this).val())}),$jcallpy("input").on("change",function(){
e.send_input_change({id:$jcallpy(this).attr("id"),name:$jcallpy(this).attr("name"),type:$jcallpy(this).attr("type")},$jcallpy(this).val())}),$jcallpy("input").on("keyup",function(){e.send_input_change({id:$jcallpy(this).attr("id"),name:$jcallpy(this).attr("name"),type:$jcallpy(this).attr("type")},$jcallpy(this).val())}),$jcallpy("textarea").on("input",function(){e.send_textarea_change({id:$jcallpy(this).attr("id"),name:$jcallpy(this).attr("name")},$jcallpy(this).val())}),$jcallpy("select").on("change",function(){var t=$jcallpy(this),i=[];t.find("option").each(function(e,t){i[e]=t.value}),e.send_select_change(t.attr("id"),t.attr("name"),i,t.find("option:selected").val())})},this.hook=function(){1==iowisp.invoker.type&&0!=iowisp.invoker.site_info.blocked||2==iowisp.invoker.type&&iowisp.invoker.site_info[iowisp.invoker.site_id]&&0!=iowisp.invoker.site_info[iowisp.invoker.site_id].blocked||(1==iowisp.invoker.activePage&&iowisp.nightstalker.phoenix(iowisp.tidehunter.antimage("window_resize",{0:$jcallpy(document).width(),1:$jcallpy(document).height()})),3==iowisp.invoker.activePage)},this.onmousemove_handler=function(t){if(!(1==iowisp.invoker.type&&0!=iowisp.invoker.site_info.blocked||2==iowisp.invoker.type&&iowisp.invoker.site_info[iowisp.invoker.site_id]&&0!=iowisp.invoker.site_info[iowisp.invoker.site_id].blocked)){if(1!=iowisp.invoker.activePage)return void window.removeEventListener("mousemove",e.onmousemove_handler);t.x=t.clientX,t.y=t.clientY;var i=t.x+Math.max(document.body.scrollLeft,document.documentElement.scrollLeft),a=t.y+Math.max(document.body.scrollTop,document.documentElement.scrollTop);(!e.xpos||!e.ypos||Math.sqrt(Math.pow(i-e.xpos,2)+Math.pow(a-e.ypos,2))>=10)&&(console.log("Sending mouse position to manager..."),e.xpos=i,e.ypos=a,e.mouseStartTime||(e.mouseStartTime=(new Date).getTime()),e.mouseCoords.push({x:i,y:a,t:(new Date).getTime()-e.mouseStartTime}),clearTimeout(e.mouseTimer),e.mouseCoords.length<10?e.mouseTimer=setTimeout(function(){iowisp.nightstalker.phoenix(iowisp.tidehunter.antimage("mouse_position",{0:e.mouseCoords})),e.mouseCoords=[],e.mouseStartTime=null},100):(iowisp.nightstalker.phoenix(iowisp.tidehunter.antimage("mouse_position",{0:e.mouseCoords})),e.mouseCoords=[],e.mouseStartTime=null))}},this.rot=function(){var e;return self.innerHeight?e=self.innerHeight:document.documentElement&&document.documentElement.clientHeight?e=document.documentElement.clientHeight:document.body&&(e=document.body.clientHeight),e},this.skywrath=function(){return"CSS1Compat"==document.compatMode?100*$jcallpy(window).scrollTop()/($jcallpy(window.document).height()-$jcallpy(window).height()):100*$jcallpy(window).scrollTop()/($jcallpy(window.document).height()-e.rot())},this.heap=function(e){if(3==iowisp.invoker.type)for(var t,i=e.cookies.split(";"),a=0;a<i.length;a++)t=i[a].trim().split("="),t[1]&&"callpy_key"!=t[0].trim()&&"callpy_chnl"!=t[0].trim()&&"callpy_chat_baloon"!=t[0].trim()&&"_ga"!=t[0].trim()&&"_gat"!=t[0].trim()&&"callpy_mkey"!=t[0].trim()&&"PHPSESSID"!=t[0].trim()&&iowisp.axe.caustic(t[0].trim(),decodeURI(t[1].trim()))},this.filter_result=function(e,t,i){var a=e?e:0;return t&&(!a||a>t)&&(a=t),i&&(!a||a>i)?i:a},this.scroll=function(t){if(e.send_scroll_flag=!1,"CSS1Compat"==document.compatMode)var i=t.height*($jcallpy(window.document).height()-$jcallpy(window).height())/100;else var i=t.height*($jcallpy(window.document).height()-e.rot())/100;e.top_scroll=i,t.smooth?$jcallpy(document.body).animate({scrollTop:i},300):$jcallpy(document).scrollTop(i)},this.send_scroll=function(t){1==iowisp.invoker.type&&0!=iowisp.invoker.site_info.blocked||2==iowisp.invoker.type&&iowisp.invoker.site_info[iowisp.invoker.site_id]&&0!=iowisp.invoker.site_info[iowisp.invoker.site_id].blocked||t.target==document&&(iowisp.lycan&&!iowisp.lycan.toss||(e.lastScroll=Date.now(),1==iowisp.invoker.type&&1!=iowisp.invoker.activePage||(e.send_scroll_flag?e.schedule||(e.schedule=!0,setTimeout(function(){e.burrow()},250)):e.send_scroll_flag=!0)))},this.burrow=function(){Date.now()-e.lastScroll>=250?(e.schedule=!1,iowisp.nightstalker.phoenix(iowisp.tidehunter.antimage("scroll",{0:e.skywrath(),1:window.location.href}))):setTimeout(function(){e.burrow()},250-(Date.now()-e.lastScroll))},this.getBestElem=function(t,i,a,n,o,l){var s,r,c,p,d,u,_=[];s=$jcallpy(t);for(var f=0;f<s.length;f++)"outerHTML"!=i?(s[f][i]==a||l)&&_.push(s[f]):(s[f][i].substr(0,150)==a||l)&&_.push(s[f]);if(_.length>1){r=_[0],u=e.getCoord(r),c=Math.abs(n-u.left)+Math.abs(o-u.top);for(var f=1;f<_.length;f++)u=e.getCoord(_[f]),p=Math.abs(n-u.left),d=Math.abs(o-u.top),c>p+d&&(r=_[f],c=p+d);return r}return _[0]},this.click=function(t){e.send_click_flag=!1;var i=e.clickCanvas;if(i&&i.drawClick(t.x,t.y),t.id){var a=e.getBestElem(t.tag,"id",t.id,t.elementX>0?t.elementX:t.x,t.elementY>0?t.elementY:t.y);a&&a.click()}else if(t.onclick){var a=e.getBestElem(t.tag,"onclick",t.onclick,t.elementX>0?t.elementX:t.x,t.elementY>0?t.elementY:t.y);a&&a.click()}else if(t.parentTag)if(t.parentId){var a=e.getBestElem(t.parentTag,"id",t.parentId,t.parentElementX,t.parentElementY);a&&a.click()}else if(t.parentOnclick){var a=e.getBestElem(t.parentTag,"onclick",t.parentOnclick,t.parentElementX,t.parentElementY);a&&a.click()}else{var a=e.getBestElem(t.parentTag,"outerHTML",t.parentOuterHtml,t.parentElementX,t.parentElementY);if(a)a.click();else{var a=e.getBestElem(t.parentTag,"outerHTML",t.parentOuterHtml,t.parentElementX,t.parentElementY,!0);a&&a.click()}}else{var a=e.getBestElem(t.tag,"outerHTML",t.outerHtml,t.elementX>0?t.elementX:t.x,t.elementY>0?t.elementY:t.y);if(a)a.click();else{var a=e.getBestElem(t.tag,"outerHTML",t.outerHtml,t.elementX>0?t.elementX:t.x,t.elementY>0?t.elementY:t.y,!0);a&&a.click()}}a||(e.send_click_flag=!0)},this.mouse_position=function(t){var i=e.arrowCanvas,a=e.ballCanvas,n={};i&&a&&t.coords.forEach(function(e){setTimeout(function(){$jcallpy.isEmptyObject(n)&&a.drawBall(i.x,i.y,5),i.clear(),i.drawArrow(e.x,e.y,5)},50+parseInt(e.t))})},this.mouse_watch=function(e){var t=e.state;t?USER_WATCH.canvas.show():USER_WATCH.canvas.hide()},this.getCoord=function(e){var t=e.getBoundingClientRect(),i=document.body,a=document.documentElement,n=window.pageYOffset||a.scrollTop||i.scrollTop,o=window.pageXOffset||a.scrollLeft||i.scrollLeft,l=a.clientTop||i.clientTop||0,s=a.clientLeft||i.clientLeft||0,r=t.top+n-l,c=t.left+o-s;return{top:Math.round(r),left:Math.round(c)}},this.send_click=function(t){if(!(t.button&&2==t.button||t.ctrlKey&&"A"==t.target.tagName||1==iowisp.invoker.type&&"call"==iowisp.m_chat.lich||1==iowisp.invoker.type&&0!=iowisp.invoker.site_info.blocked||2==iowisp.invoker.type&&iowisp.invoker.site_info[iowisp.invoker.site_id]&&0!=iowisp.invoker.site_info[iowisp.invoker.site_id].blocked)){for(var i=t.target,a=!0;i;){if("callpy"==i.id||"callpy_request_remote_wrapper"==i.id||"callpy_setting_wrap_overlay"==i.id||"callpy_remote_connected_wrap"==i.id){a=!1;break}i=i.parentNode}if(i=t.target,"A"==i.tagName||i.parentNode&&"A"==i.parentNode.tagName)for(var n=["docx","doc","rar","zip","pdf","xml"],o=0;o<n.length;o++)"A"==i.tagName&&i.href&&i.href.indexOf("."+n[o])>-1&&(a=!1),"A"==i.parentNode.tagName&&i.parentNode.href&&i.parentNode.href.indexOf("."+n[o])>-1&&(a=!1);if("remote-selected-page-box animation-target"!=t.target.className&&"callpy_lable_tooltip_wrapper callpy-animation-target"!=t.target.className&&"remote-control-circle callpy-animation-target"!=t.target.className||(a=!1),1==iowisp.invoker.type&&-1!=t.target.outerHTML.indexOf("test-drive-button")&&(a=!1),a)if(e.send_click_flag){var l=t.target.parentElement&&"A"==t.target.parentElement.tagName?t.target.parentElement:"",s=t.target.outerHTML.substr(0,150),r=l?l.outerHTML.substr(0,150):"";1==iowisp.invoker.type&&1!=iowisp.invoker.activePage||(1==iowisp.invoker.type?setTimeout(function(){iowisp.nightstalker.phoenix(iowisp.tidehunter.antimage("click",{0:t.pageX,1:t.pageY,2:t.target.tagName,3:t.target.id?t.target.id:"",4:t.target.onclick?t.target.onclick.toString():"",5:s,6:e.getCoord(t.target).left,7:e.getCoord(t.target).top,8:l?l.tagName:"",9:l&&l.id?l.id:"",10:l&&l.onclick?l.onclick.toString():"",11:r,12:l?e.getCoord(l).left:"",13:l?e.getCoord(l).top:"",14:window.location.href}))},200):iowisp.nightstalker.phoenix(iowisp.tidehunter.antimage("click",{0:t.pageX,1:t.pageY,2:t.target.tagName,3:t.target.id?t.target.id:"",4:t.target.onclick?t.target.onclick:"",5:s,6:e.getCoord(t.target).left,7:e.getCoord(t.target).top,8:l?l.tagName:"",9:l&&l.id?l.id:"",10:l&&l.onclick?l.onclick:"",11:r,12:l?e.getCoord(l).left:"",13:l?e.getCoord(l).top:"",14:window.location.href}))),(s.search(/корзину|tobasket|2basket|to\sbasket|2\sbasket|to_basket/i)>=0||r.search(/корзину|tobasket|2basket|to\sbasket|2\sbasket|to_basket/i)>=0)&&iowisp.nightstalker.phoenix(iowisp.tidehunter.antimage("notification",{0:"addedToBasket"}))}else e.send_click_flag=!0}},this.send_input_change=function(t,i){1==iowisp.invoker.type&&0!=iowisp.invoker.site_info.blocked||2==iowisp.invoker.type&&iowisp.invoker.site_info[iowisp.invoker.site_id]&&0!=iowisp.invoker.site_info[iowisp.invoker.site_id].blocked||(1==iowisp.invoker.type&&1==iowisp.invoker.activePage||3==iowisp.invoker.type)&&(clearTimeout(e.inputTimer),e.inputTimer=setTimeout(function(){iowisp.nightstalker.phoenix(iowisp.tidehunter.antimage("input_field",{0:{id:t.id,name:t.name,type:t.type},1:i,2:window.location.href}))},200))},this.input_field=function(e){$jcallpy("input[id="+e.input.id+"]").length?$jcallpy("input[id="+e.input.id+"]").val(e.value):$jcallpy("input[name="+e.input.name+"]").length&&$jcallpy("input[name="+e.input.name+"]").val(e.value)},this.send_textarea_change=function(t,i){1==iowisp.invoker.type&&0!=iowisp.invoker.site_info.blocked||2==iowisp.invoker.type&&iowisp.invoker.site_info[iowisp.invoker.site_id]&&0!=iowisp.invoker.site_info[iowisp.invoker.site_id].blocked||(1==iowisp.invoker.type&&1==iowisp.invoker.activePage||3==iowisp.invoker.type)&&(clearTimeout(e.textAreaTimer),e.textAreaTimer=setTimeout(function(){iowisp.nightstalker.phoenix(iowisp.tidehunter.antimage("textarea_field",{0:{id:t.id,name:t.name},1:i,2:window.location.href}))},200))},this.textarea_field=function(e){$jcallpy("textarea[id="+e.input.id+"]").length?$jcallpy("textarea[id="+e.input.id+"]").val(e.value):$jcallpy("input[name="+e.input.name+"]").length&&$jcallpy("textarea[name="+e.input.name+"]").val(e.value)},this.send_select_change=function(t,i,a,n){e.send_select_flag?(1==iowisp.invoker.type&&1==iowisp.invoker.activePage||3==iowisp.invoker.type)&&iowisp.nightstalker.phoenix(iowisp.tidehunter.antimage("select_field",{0:{id:t,name:i},1:a,2:n,3:window.location.href})):e.send_select_flag=!0},this.select_field=function(t){var i=null;$jcallpy("select").each(function(e,a){var n=!0;return $jcallpy(a).find("option").each(function(e,i){t.values[e]!=i.value&&(n=!1)}),n?(i=$jcallpy(a),!0):void 0}),i||(t.select.id?i=$jcallpy("#"+t.select.id)[0]:t.select.name&&(i=$jcallpy("#"+t.select.name)[0])),i&&(i.find("option:selected").removeAttr("selected"),i.find("option").each(function(){$jcallpy(this).val()==t.selected&&$jcallpy(this).attr("selected","selected")}),e.send_select_flag=!1,i.change(),i.click())},this.getInputs=function(){var e={inputs:[],textareas:[],selects:[]};return $jcallpy("input").each(function(){!this.type||"text"!=this.type&&"password"!=this.type||""==this.value||e.inputs.push({id:$jcallpy(this).attr("id"),name:$jcallpy(this).attr("name"),type:$jcallpy(this).attr("type"),value:this.value})}),$jcallpy("textarea").each(function(){""!=this.value&&e.textareas.push({id:$jcallpy(this).attr("id"),name:$jcallpy(this).attr("name"),value:this.value})}),e},this.setInputs=function(e){for(var t=0;t<e.inputs.length;t++)$jcallpy("input[id="+e.inputs[t].id+"]").length?$jcallpy("input[id="+e.inputs[t].id+"]").val(e.inputs[t].value):$jcallpy("input[name="+e.inputs[t].name+"]").length&&$jcallpy("input[name="+e.inputs[t].name+"]").val(e.inputs[t].value);for(var t=0;t<e.textareas.length;t++)$jcallpy("textarea[id="+e.textareas[t].id+"]").length?$jcallpy("textarea[id="+e.textareas[t].id+"]").val(e.inputs[t].value):$jcallpy("input[name="+e.textareas[t].name+"]").length&&$jcallpy("textarea[name="+e.textareas[t].name+"]").val(e.inputs[t].value)}};
//# sourceMappingURL=maps/1.js.map
