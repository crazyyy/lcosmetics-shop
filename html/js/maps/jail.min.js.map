{"version":3,"sources":["jail.min.js"],"names":["e","t","n","jQuery","r","define","amd","this","$","s","data","bind","event","options","images","u","o","length","getAttribute","splice","i","setTimeout","extend","each","window","f","a","currentTarget","unbind","type","l","test","timeout","attr","loadHiddenImages","h","is","offset","c","top","left","scrollTop","scrollLeft","width","height","Image","onload","hide","src","removeAttr","effect","speed","css","show","callbackAfterEachImage","call","callback","jail","parent","get","nodeName","toUpperCase","triggerElement","placeholder","prototype","init","later","onEvent","fn"],"mappings":"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","file":"jail.min.js","sourcesContent":["(function(e,t){var n=t(jQuery),r=typeof define==\"function\"&&define.amd;r?define(e,[\"jquery\"],n):(this.jQuery||this.$||this)[e]=n})(\"jail\",function(e){function s(e,n){var r=!1;!n||(r=n.data(\"triggerElem\")),!!r&&typeof r.bind==\"function\"&&(r.bind(e.event,{options:e,images:n},u),t.bind(\"resize\",{options:e,images:n},u))}function o(e){var t=0;if(e.length===0)return;for(;;){if(t===e.length)break;e[t].getAttribute(\"data-src\")?t++:e.splice(t,1)}}function u(n){var i=n.data.images,u=n.data.options;i.data(\"poller\",setTimeout(function(){r=e.extend({},i),o(r),e(r).each(function(){if(this===window)return;f(u,this,r)});if(a(r)){e(n.currentTarget).unbind(n.type);return}if(u.event!==\"scroll\"){var l=/scroll/i.test(u.event)?i.data(\"triggerElem\"):t;u.event=\"scroll\",i.data(\"triggerElem\",l),s(u,e(r))}},u.timeout))}function a(t){var n=!0;return e(t).each(function(){!e(this).attr(\"data-src\")||(n=!1)}),n}function f(n,r,i){var s=e(r),o=/scroll/i.test(n.event)?i.data(\"triggerElem\"):t,u=!0;n.loadHiddenImages||(u=h(s,o,n)&&s.is(\":visible\")),u&&l(o,s,n.offset)&&c(n,s)}function l(e,t,n){var r=e[0]===window,i=r?{top:0,left:0}:e.offset(),s=i.top+(r?e.scrollTop():0),o=i.left+(r?e.scrollLeft():0),u=o+e.width(),a=s+e.height(),f=t.offset(),l=t.width(),c=t.height();return s-n<=f.top+c&&a+n>=f.top&&o-n<=f.left+l&&u+n>=f.left}function c(t,n){var s=new Image;s.onload=function(){n.hide().attr(\"src\",s.src),n.removeAttr(\"data-src\"),t.effect?(t.speed?n[t.effect](t.speed):n[t.effect](),n.css(\"opacity\",1),n.show()):n.show(),o(r),!t.callbackAfterEachImage||t.callbackAfterEachImage.call(this,n,t),a(r)&&!!t.callback&&!i&&(t.callback.call(e.jail,t),i=!0)},s.src=n.attr(\"data-src\")}function h(n,i,o){var u=n.parent(),a=!0;while(u.length&&u.get(0).nodeName.toUpperCase()!==\"BODY\"){if(u.css(\"overflow\")===\"hidden\"){if(!l(u,n,o.offset)){a=!1;break}}else if(u.css(\"overflow\")===\"scroll\"&&!l(u,n,o.offset)){a=!1,e(r).data(\"triggerElem\",u),o.event=\"scroll\",s(o,e(r));break}if(u.css(\"visibility\")===\"hidden\"||n.css(\"visibility\")===\"hidden\"){a=!1;break}if(i!==t&&u===i)break;u=u.parent()}return a}var t=e(window),n={timeout:1,effect:!1,speed:400,triggerElement:null,offset:0,event:\"load\",callback:null,callbackAfterEachImage:null,placeholder:!1,loadHiddenImages:!1},r=[],i=!1;return e.jail=function(t,r){var i=t||{},s=e.extend({},n,r);e.jail.prototype.init(i,s),/^(load|scroll)/.test(s.event)?e.jail.prototype.later.call(i,s):e.jail.prototype.onEvent.call(i,s)},e.jail.prototype.init=function(n,r){n.data(\"triggerElem\",r.triggerElement?e(r.triggerElement):t),!r.placeholder||n.each(function(){e(this).attr(\"src\",r.placeholder)})},e.jail.prototype.onEvent=function(t){var n=this;t.triggerElement?s(t,n):n.bind(t.event,{options:t,images:n},function(t){var n=e(this),i=t.data.options,s=t.data.images;r=e.extend({},s),c(i,n),e(t.currentTarget).unbind(t.type)})},e.jail.prototype.later=function(t){var n=this;setTimeout(function(){r=e.extend({},n),n.each(function(){f(t,this,n)}),t.event=\"scroll\",s(t,n)},t.timeout)},e.fn.jail=function(t){return new e.jail(this,t),r=[],this},e.jail});\n$(function(){ $('img.imagejail').jail({ effect: 'fadeIn', speed : 400, placeholder : 'catalog/view/javascript/jquery/jail/grey.gif' }); });"],"sourceRoot":"/source/"}